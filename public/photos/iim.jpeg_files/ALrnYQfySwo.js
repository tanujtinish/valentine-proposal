;/*FB_PKG_DELIM*/

__d("MAWCommonWebWorkerErrorLogging",["Env","ErrorGuard","ErrorPubSub","ErrorSetup","ErrorTransport","JSErrorLoggingConfig","SiteData","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(){(e||(e=r("ErrorGuard"))).skipGuardGlobal((s||(s=r("Env"))).nocatch),r("ErrorSetup").setup({appId:r("JSErrorLoggingConfig").appId,client_revision:r("SiteData").client_revision,extra:r("JSErrorLoggingConfig").extra,loggingFramework:"worker",projectBlocklist:r("JSErrorLoggingConfig").projectBlocklist,report_source:r("JSErrorLoggingConfig").report_source,report_source_ref:r("JSErrorLoggingConfig").report_source_ref,sample_weight:r("JSErrorLoggingConfig").sampleWeight!=null?r("JSErrorLoggingConfig").sampleWeight:0,site_category:"armadillo-worker"},o("ErrorTransport").log),t.addEventListener("unhandledrejection",function(e){var t=e.reason;(u||(u=r("ErrorPubSub"))).reportError(r("getErrorSafe")(t))})}r("ErrorSetup").preSetup(),l.init=c}),98);
__d("WAAbPropsHelpers",["WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=86400,m=600,p=604800;function _(e){return e==null?d:Math.max(m,Math.min(p,e))}function f(e){var t=[];return Object.keys(e).forEach(function(n){var r=e[n],o=r[0],a=r[1],i=r[2];typeof o=="number"&&t.push({configName:n,configCode:o,configDefault:i})}),t}function g(e,t){var n=e[t][0];return typeof n=="number"?n:null}function h(t,n){switch(typeof n){case"boolean":return t==="1";case"number":return parseFloat(t);case"string":return t;default:return o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["parseValue: unsure how to read ",""])),t),null}}function y(e,t){var n=new Map;t.forEach(function(e){var t=e.configCode,r=e.configExpoKey,o=e.configValue;n.set(t,{configValue:o,configExpoKey:r})});var r={},o={};return f(e).forEach(function(e){var t=e.configCode,a=e.configDefault,i=e.configName,l=n.get(t);if(l!=null){var s=l.configExpoKey,u=l.configValue,c=h(u,a);c!=null&&(r[i]=c),o[t]=s!=null?s:null}}),{values:r,expoKeys:o}}function C(e,t,n){var r=babelHelpers.extends({},t,e),a={};return Object.keys(r).forEach(function(e){if(n[e]==null){o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["maybeUpdatePropValues: deleting config ",""])),e);return}a[e]=r[e]}),a}function b(e,t,n){var r=babelHelpers.extends({},t,e),a={},i=f(n).map(function(e){return e.configCode}),l=new Set(i),s=new Set;return Object.keys(r).forEach(function(e){var n=parseInt(e,10),i=t?t[n]:null;l.has(n)?(r[n]!==i&&(o("WALogger").LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["maybeUpdateExpoKeys: config_expo_key "," changed"])),n),i!=null&&i.trim()&&s.add(i)),a[n]=r[n]):(o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["maybeUpdateExpoKeys: deleting config_expo_key ",""])),n),i!=null&&i.trim()&&s.add(i))}),{propExpoKeys:a,expoKeysToDelete:s}}function v(e,t){if(t!=null){var n=t;if(e.forEach(function(e){n.delete(e)}),n.size!==0)return{internalExpoKeys:n,expoKeyStr:Array.from(n).join(",")}}}l.maybeUpdateRefresh=_,l.asAbList=f,l.asAbCode=g,l.parseAbProps=y,l.maybeUpdatePropValues=C,l.maybeUpdateExpoKeys=b,l.maybeUpdateInternalExpoKeys=v}),98);
__d("WAAbProps",["WAAbPropsHelpers","err"],(function(t,n,r,o,a,i,l){"use strict";var e=null;function s(t){if(e)return e;throw r("err")("abProps::"+t+" called before startAbProps")}function u(t,n){e==null&&(e={config:n,db:t})}function c(){return s("getHash").db.getHash()}function d(){return s("getRefreshSecs").db.getRefreshSecs().then(function(e){return o("WAAbPropsHelpers").maybeUpdateRefresh(e)})}function m(){return s("getConfig").config}function p(){return s("getAbProps").db.getAbProps()}function _(e){return s("getAbProps").db.setAbProps(e)}l.startAbProps=u,l.getHash=c,l.getRefreshSecs=d,l.getConfig=m,l.getAbProps=p,l.setAbProps=_}),98);
__d("WAAbPropConverters",[],(function(t,n,r,o,a,i){"use strict";function e(e){if(!e)return{};var t={};return Object.keys(e).forEach(function(n){var r=e[n];r!=null&&(t[n]=r)}),t}i.convertAbPropsToPlainObject=e}),66);
__d("WAAbPropsCache",["WAAbPropConverters"],(function(t,n,r,o,a,i,l){"use strict";var e=86400,s=(function(){function t(e){var t=e.abHash,n=e.abKey,r=e.expoKeyStr,o=e.internalExpoKeys,a=e.lastSyncTime,i=e.overridePropValues,l=e.propExpoKeys,s=e.propValues,u=e.refresh;this.$1=i!=null?i:{},this.$2=s,this.$4=t,this.$3=n,this.$5=a,this.$7=u,this.$6=r,this.$8=o,this.$9=l}var n=t.prototype;return n.getAbProp=function(t){var e;return this.$1[t]!=null?this.$1[t]:(e=this.$2)==null?void 0:e[t]},n.getHash=function(){return this.$4},n.getRefreshSecs=function(){var t;return(t=this.$7)!=null?t:e},n.overrideAbProp=function(t,n){this.$1[t]=n},n.readAll=function(){var e={abKey:this.$3,hash:this.getHash(),refresh:this.getRefreshSecs(),lastSyncTime:this.$5||0};if(this.$9!=null&&(e.propExpoKeys=this.$9),this.$8!=null&&(e.internalExpoKeys=this.$8),this.$6!=null&&(e.expoKeyStr=this.$6),this.$2!=null){var t=this.$2;t!=null&&(e.propValues=o("WAAbPropConverters").convertAbPropsToPlainObject(t),this.$1!=null&&(e.propValues=babelHelpers.extends({},e.propValues,o("WAAbPropConverters").convertAbPropsToPlainObject(this.$1))))}return e},n.rewrite=function(t){var e=t.abHash,n=t.abKey,r=t.expoKeyStr,o=t.internalExpoKeys,a=t.lastSyncTime,i=t.propExpoKeys,l=t.propValues,s=t.refresh;this.$2=l,this.$4=e,this.$3=n,this.$5=a,this.$7=s,this.$6=r,this.$8=o,this.$9=i},t})();l.AbPropsCache=s}),98);
__d("WAAbPropsTypes",[],(function(t,n,r,o,a,i){"use strict";var e={noyb_opt_out_flag:[3488,"bool",!1,!1],service_improvement_opt_out_flag:[3664,"bool",!1,!1],msgrw_test_bool:[704,"bool",!1,!1],msgrw_test_int:[705,"int",0,0],msgrw_test_string:[706,"string","test_string","test_string"],msgrw_test_float:[707,"float",1,1],msgrw_icdc_alert_trigger_failure_count:[1233,"int",8,8],msgrw_icdc_cooldown_interval_in_minutes:[1234,"int",35,35],msgrw_icdc_interval_in_minutes:[1236,"int",1500,1500],msgrw_logger_entries:[1298,"int",0,0],msgrw_max_keys:[2453,"int",812,812],msgrw_job_manager_conf:[2667,"string",'{"maxConcurrency": 5,"bestEffortWaitTimeoutSec": 300,"highPriorityQuota":5,"lowPriorityQuota":1}','{"maxConcurrency": 5,"bestEffortWaitTimeoutSec": 300,"highPriorityQuota":5,"lowPriorityQuota":1}'],client_group_participants_limit:[618,"int",257,257],client_group_name_length_limit:[1200,"int",25,25]};i.ABPropConfigs=e}),66);
__d("WAAbPropsConverters",["WAAbPropsTypes","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t){var n={expoKeyStr:t.expoKeyStr,internalExpoKeys:t.internalExpoKeys?Array.from(t.internalExpoKeys):[],lastSyncTime:t.lastSyncTime,refresh:t.refresh};if(t.abHash!=null&&(n.abHash=t.abHash),t.abKey!=null&&(n.abKey=t.abKey),t.propExpoKeys){var r=t.propExpoKeys,a=[];Object.keys(r).forEach(function(e){var t=Number(e),n={expoKey:t};r[t]!=null&&(n.value=r[t]),a.push(n)}),n.propExpoKeys=a}if(t.propValues){var i=t.propValues,l=[];Object.keys(i).forEach(function(t){var n={name:t,value:{}};switch(typeof i[t]){case"boolean":n.value.boolValue=i[t];break;case"number":n.value.intValue=i[t];break;case"string":n.value.strValue=i[t];break;default:o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["convertAbPropsParsedToDbEntity: unsure how to read ",""])),i[t]);return}l.push(n)}),n.propValues=l}return n}function c(e){var t={expoKeyStr:e.expoKeyStr,internalExpoKeys:e.internalExpoKeys,lastSyncTime:e.lastSyncTime,propExpoKeys:e.propExpoKeys,refresh:e.refresh};if(e.hash!=null&&(t.abHash=e.hash),e.abKey!=null&&(t.abKey=e.abKey),e.propValues){var n=e.propValues,r={};Object.keys(n).forEach(function(e){n[e]!=null&&(r[e]=n[e])}),t.propValues=r}return t}function d(e){var t=e.abHash,n=e.abKey,r=e.expoKeyStr,a=e.internalExpoKeys,i=e.lastSyncTime,l=e.propExpoKeys,u=e.propValues,c=e.refresh,d={abHash:t,abKey:n,expoKeyStr:r,lastSyncTime:i,refresh:c};if(a!=null&&(d.internalExpoKeys=new Set(a)),l!=null){var m={};l.forEach(function(e){e.expoKey!=null&&(m[e.expoKey]=e.value)}),d.propExpoKeys=m}if(u!=null){var p={};u.forEach(function(e){var t=e.name,n=o("WAAbPropsTypes").ABPropConfigs[t];if(!(n==null||n.length<3)){var r=n[2];switch(typeof r){case"boolean":p[t]=e.value.boolValue;return;case"number":p[t]=e.value.intValue;return;case"string":p[t]=e.value.strValue;return;default:o("WALogger").WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["convertDbAbPropsToParsed: unsure how to read ",""])),r);return}}}),d.propValues=p}return d}l.convertAbPropsParsedToDbEntity=u,l.convertAbPropsDataToParsed=c,l.convertDbAbPropsToParsed=d}),98);
__d("WAAbPropsToUI",["WAAbPropsTypes"],(function(t,n,r,o,a,i,l){"use strict";var e=["client_group_participants_limit","client_group_name_length_limit"];function s(t){var n=t!=null?t:{},r={};return e.forEach(function(e){n[e]!=null?r[e]=n[e]:r[e]=o("WAAbPropsTypes").ABPropConfigs[e][2]}),r}l.prepareAbPropsForUI=s}),98);
__d("WAHandleFailureUtils",["FBLogger","MAWODSProxy","Promise","WABridge","WAOdsEnums","asyncToGeneratorRuntime","getErrorSafe","promiseDone","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("requireDeferred")("MAWClearSignalAndTempStores").__setRef("WAHandleFailureUtils"),u={GENERIC_FAILURE:"400",NOT_AUTHORIZED:"401",TEMP_BANNED:"402",BANNED:"403",CAT_EXPIRED:"413",CAT_INVALID:"414",NOT_FOUND:"415",CAT_SESSION_INVALID:"418",INTERNAL_ERROR:"500",SERVER_UNAVAILABLE:"503"};function c(){return new(e||(e=n("Promise")))(function(e,t){s.onReady(function(n){r("promiseDone")(n.clearSignalAndTempStores(),function(){return e()},function(e){var n=r("getErrorSafe")(e);r("FBLogger")("wmi").catching(n).mustfix("Failed to clear signal and temp stores"),t(n)})})})}function d(){return c().then(function(){o("WABridge").getBridge().fireAndForget("event","logout",{})})}function m(){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield c(),o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.WA_REREGISTRATION,key:"reregister_phone"}),o("WABridge").getBridge().fireAndForget("event","reregisterDevice",{})}),p.apply(this,arguments)}l.FAILURE_CODES=u,l.clearRegistrationAndTempData=c,l.deregisterPhone=d,l.reregisterPhone=m}),98);
__d("WASignalDB",["BrowserLockManager","QPLFlow","WAHandleFailureUtils","WAHex","WAIDBTypes","WALogger","WAResolvable","Worm","WormEAR","WormIDbDriver","WormIDbUtils","asyncToGeneratorRuntime","err","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e,s={identity:{primaryKey:"deviceJid",indexes:{userJid:{fields:["userJid"],unique:!1}}},contacts:{primaryKey:"contactJid",indexes:{}},session:{indexes:{},primaryKey:"id"},senderKeySessions:{primaryKey:"id",indexes:{groupJid:{fields:["groupJid"],unique:!1},userJid:{fields:["userJid"],unique:!1}}},prekey:{indexes:{},primaryKey:"keyId"},prekeyGeneration:{indexes:{},primaryKey:"generationId"},signedPrekey:{indexes:{},primaryKey:"keyId"},meta:{indexes:{},primaryKey:"key"},plaintextMeta:{indexes:{},primaryKey:"key",secure:!1},icdcFails:{indexes:{},primaryKey:"contactJid"},personalSenderKeyStatuses:{indexes:{},primaryKey:"groupJid"}},u,c=new(o("WAResolvable")).Resolvable;function d(e,t,n,r,o,a){return m.apply(this,arguments)}function m(){return m=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,a,i,l,d,m){var p=m!=null?o("QPLFlow").startQPLFlow(m,{timeoutInMs:r("justknobx")._("3415"),annotations:{string:{operationType:"initDb"}}}):null;try{yield g(n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=o("WAHex").parseHex(a),n="signalDb",r=new(o("WormEAR")).WormEAR(s,n,e),_=new(o("Worm")).WormDatabase(new(o("WormIDbDriver")).WormIDbDriver(t,n,s,r,d,{blockingErrorThreshold:i,onBlockingError:l,safeToDeleteStores:new Set(["stanzaQueue","danglingQueue","migration"]),onTransactionError:function(n){if(n instanceof o("WormEAR").DecryptionError){var e=n;if(e.store==="icdcFails")return;o("WormIDbUtils").promisifyIDbRequest(o("WAIDBTypes").idb().deleteDatabase(t)).then(function(){return o("WAHandleFailureUtils").reregisterPhone()})}}}),m);u=_,yield _.init({eventFlow:p}),c.resolve(_),p==null||p.endSuccess()}))}catch(t){throw p==null||p.endFail("error"),o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[WORM] Error performing initDb: ",""])),t),t}}),m.apply(this,arguments)}function p(){if(u==null)throw r("err")("Signal Db v3 is not initialized");return u}function _(){return c.promise}function f(e){return"Signal - "+e}function g(e){return r("BrowserLockManager")!=null?r("BrowserLockManager").request("wajs_make_signal_v3_db",e):e()}l.makeSignalDb=d,l.getDb=p,l.getDbPromise=_,l.signalOp=f}),98);
__d("WAGetMetaApi",["WASignalDB"],(function(t,n,r,o,a,i,l){"use strict";var e=function(){return o("WASignalDB").getDb().runInTransaction(["meta"],"readonly",function(e){return e.stores.meta.bulkGet(["certificateChain","deviceId","identityKeyPair","abProps","edgeInfo","clockSkew","authKeyPair"]).then(function(e){var t,n,r,o,a,i,l,s=e[0],u=e[1],c=e[2],d=e[3],m=e[4],p=e[5],_=e[6];return{abProps:d==null||(t=d.value)==null?void 0:t.abProps,authKeyPair:_==null||(n=_.value)==null?void 0:n.authKeyPair,certificateChain:s==null||(r=s.value)==null?void 0:r.certificateChain,clockSkew:p==null||(o=p.value)==null?void 0:o.clockSkew,deviceId:u==null||(a=u.value)==null?void 0:a.deviceId,edgeInfo:m==null||(i=m.value)==null?void 0:i.edgeInfo,identityKeyPair:c==null||(l=c.value)==null?void 0:l.identityKeyPair}})},o("WASignalDB").signalOp("getMeta"))};l.getMeta=e}),98);
__d("WAGetAbPropsApi",["WAGetMetaApi"],(function(t,n,r,o,a,i,l){"use strict";var e=function(){return o("WAGetMetaApi").getMeta().then(function(e){var t=e.abProps;return t})};l.getAbProps=e}),98);
__d("WASetMetaApi",["WASignalDB"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t){return o("WASignalDB").getDb().runInTransaction(["meta"],"readwrite",function(e){return e.stores.meta.bulkPut(Object.entries(t).map(function(e){var t,n=e[0],r=e[1];return{key:n,value:(t={},t[n]=r,t)}}))},o("WASignalDB").signalOp("setMeta")).then(function(){})};l.setMeta=e}),98);
__d("WASetAbPropsApi",["WASetMetaApi"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t){return o("WASetMetaApi").setMeta({abProps:t})};l.setAbProps=e}),98);
__d("WAAbPropsInit",["Promise","WAAbProps","WAAbPropsCache","WAAbPropsConverters","WAAbPropsToUI","WAAbPropsTypes","WABridge","WAGetAbPropsApi","WALogger","WASetAbPropsApi","asyncToGeneratorRuntime","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c;function d(){if(!c)throw r("err")("Trying to get hash before AbProps gets initialized");return(u||(u=n("Promise"))).resolve(c.getHash())}function m(){if(!c)throw r("err")("Trying to get refresh secs before AbProps gets initialized");return(u||(u=n("Promise"))).resolve(c.getRefreshSecs())}var p={getAbProps:function(){if(!c)throw r("err")("Trying to read ABProps before they gets initialized");return(u||(u=n("Promise"))).resolve(c.readAll())},getHash:d,getRefreshSecs:m,setAbProps:(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t,n=o("WAAbPropsConverters").convertAbPropsDataToParsed(e);(t=c)==null||t.rewrite(n),yield o("WASetAbPropsApi").setAbProps(o("WAAbPropsConverters").convertAbPropsParsedToDbEntity(n)),_(n)});function t(t){return e.apply(this,arguments)}return t})()};function _(e){if(e.propValues){var t=o("WAAbPropsToUI").prepareAbPropsForUI(e.propValues);o("WABridge").getBridge().fireAndForget("event","abPropsUpdated",{abProps:t})}}function f(){return g.apply(this,arguments)}function g(){return g=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Starting ABProps store"])));var t=yield o("WAGetAbPropsApi").getAbProps(),n={};t&&(n=o("WAAbPropsConverters").convertDbAbPropsToParsed(t)),c=new(o("WAAbPropsCache")).AbPropsCache(n),o("WAAbProps").startAbProps(p,o("WAAbPropsTypes").ABPropConfigs),_(n),o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["ABProps inited"])))}),g.apply(this,arguments)}function h(e,t){if(c==null)throw r("err")("Trying to override ABProp before they get initialized");var n=c;n.overrideAbProp(e,t),_(o("WAAbPropsConverters").convertAbPropsDataToParsed(n.readAll()))}function y(e){return o("WAAbPropsTypes").ABPropConfigs[e][2]}function C(){if(!c)throw r("err")("Trying to read ABProps before they get initialized");return c.readAll()}function b(e){if(!c)throw r("err")("Trying to read ABProp "+e+" before AbProps gets initialized");var t=c.getAbProp(e);return t!=null?t:y(e)}l.getHash=d,l.getRefreshSecs=m,l.initAbProps=f,l.overrideAbProp=h,l.getAbDefault=y,l.getAbProps=C,l.getAbProp=b}),98);
__d("MAWWebWorkerLogger",["MAWBridge","MAWConsoleLogger","MAWLeakDetection","MAWLoggingSwitches","MAWSaveLogToDisk","WAAbPropsInit","WAJids","WATagsLogger","asyncToGeneratorRuntime","err","fb-error","gkx","vulture"],(function(t,n,r,o,a,i,l){"use strict";var e=2;function s(){o("WATagsLogger").initializeWaLogger(c)}function u(){return r("gkx")("19609")}var c={count:function(t,n){m("count",t,n),o("MAWConsoleLogger").logToConsole("count",t,n)},debug:function(t,n,r){o("MAWConsoleLogger").logToConsole("log",t,n,r)},devConsole:function(t,n,r,a){for(var e=arguments.length,i=new Array(e>4?e-4:0),l=4;l<e;l++)i[l-4]=arguments[l];switch(t){case"COUNT":o("MAWConsoleLogger").logToConsole.apply(void 0,["count",n,r,a].concat(i));break;case"DEV":o("MAWConsoleLogger").logToConsole.apply(void 0,["log",n,r,a].concat(i));break;case"DEV_XMPP":o("MAWConsoleLogger").logToConsole.apply(void 0,["log",n,r,a].concat(i));break;case"LOG":o("MAWConsoleLogger").logToConsole.apply(void 0,["info",n,r,a].concat(i));break;case"WARN":o("MAWConsoleLogger").logToConsole.apply(void 0,["warn",n,r,a].concat(i));break;case"ERROR":o("MAWConsoleLogger").logToConsole.apply(void 0,["error",n,r,a].concat(i));break;case"CATCHING":o("MAWConsoleLogger").logToConsole.apply(void 0,["error",n,r,a].concat(i));break}},error:function(t,n,a){var e=o("MAWLeakDetection").maybeReplaceVaultedString(t);a?f(e,n,a):f("webworker",n,r("err")(o("WAJids").maybeSanitizeLogLineText(e))),o("MAWConsoleLogger").logToConsole("error",e,n)},info:function(t,n){m("log",t,n),o("MAWConsoleLogger").logToConsole("info",t,n)},logRestricted:function(t,n){r("vulture")("Tn9_EjlWPE27MyzCHyzuKXtZXIc="),m("logRestricted",t,n),o("MAWConsoleLogger").logToConsole("log",t,n)},warn:function(t,n){m("warn",t,n),o("MAWConsoleLogger").logToConsole("warn",t,n)}};function d(){try{return o("WAAbPropsInit").getAbProp("msgrw_logger_entries")}catch(e){return o("WAAbPropsInit").getAbDefault("msgrw_logger_entries")}}function m(e,t,n){if(o("MAWLoggingSwitches").removeLoggingFromBridge){if(o("MAWSaveLogToDisk").saveLogEntry("worker",o("MAWSaveLogToDisk").formatLog({date:Date.now(),logLevel:e,logString:t,tags:n})),!u()){e==="count"&&o("MAWBridge").getBridge().fireAndForget("event","log",{logLevel:e,logString:t,tags:n},!0);return}e!=="debug"&&o("MAWBridge").getBridge().fireAndForget("event","log",{logLevel:e,logString:t,tags:n},!0)}}function p(){return _.apply(this,arguments)}function _(){return _=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield o("MAWSaveLogToDisk").forceCachedLogEntryPersist()}),_.apply(this,arguments)}function f(t,n,a){var i=0;if(a.taalOpcodes!=null){var l;(l=a.taalOpcodes)==null||l.forEach(function(e){e===r("fb-error").TAALOpcode.PREVIOUS_FRAME&&i++})}else i=e;o("MAWLoggingSwitches").removeLoggingFromBridge&&o("MAWSaveLogToDisk").saveLogEntry("worker",o("MAWSaveLogToDisk").formatErrorForLogging(t,n,a,i,d(),a.stack)),u()||o("MAWBridge").getBridge().fireAndForget("event","logError",{entriesToReport:d(),framesToPop:i,logString:t,message:a.message,stack:a.stack,tags:n},!0)}l.setupWebWorkerWaLogger=s,l.flushLogs=p}),98);
__d("EARInitType",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["EB_INIT","LS_INIT","MAW_INIT","MAW_RP_INIT","MAW_IN_UI_INIT"]),l=e;i.default=l}),66);
__d("IndexedDbPolyfills",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(){this.onsuccess=null,this.onerror=null,this.$1=new Map}var t=e.prototype;return t.emit=function(t){for(var e=this.$1.get(t),n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];if(e!==void 0)for(var a of e)a.apply(void 0,r);t==="success"&&this.onsuccess!=null?this.onsuccess.apply(this,r):t==="error"&&this.onerror!=null&&this.onerror.apply(this,r)},t.addEventListener=function(t,n,r){var e=this;r===void 0&&(r={});var o=r,a=o.signal,i=this.$1.get(t);i===void 0&&(i=new Set,this.$1.set(t,i)),i.add(n),a!=null&&(a.onabort=function(){e.removeEventListener(t,n)})},t.removeEventListener=function(t,n){var e=this.$1.get(t);e!==void 0&&e.delete(n)},e})(),l=function(){return function(t,n){var r=this.openCursor(t!=null?t:null),o=[],a=new e;return r.onsuccess=function(e){var t=e.target.result;if(t!=null&&(n===void 0||o.length<n))o.push(t.value),t.continue();else{a.result=o,a.onsuccess==null||a.onsuccess({target:{readyState:"done",result:o}});return}},r.onerror=function(e){a.onerror==null||a.onerror(e)},a}},s=typeof window!="undefined"?window:self;typeof s.IDBObjectStore!="undefined"&&s.IDBObjectStore.prototype.getAll===void 0&&(s.IDBObjectStore.prototype.getAll=l()),i.IDBRequest=e,i.getAll=l}),66);
__d("MAWIndexedDBDeletion",["CurrentMessengerUser","FBLogger","MAWIndexedDbMetadata","Promise","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,o){return indexedDB==null||t==null?(e||(e=n("Promise"))).resolve():new(e||(e=n("Promise")))(function(e,n){var a=indexedDB.deleteDatabase(t);a.onsuccess=function(){r("FBLogger")("maw_db").warn("%s db was deleted",o),e()},a.onblocked=function(){r("FBLogger")("maw_db").mustfix("Cannot delete %s db: blocked. Make sure DB is closed.",o)},a.onerror=function(){r("FBLogger")("maw_db").mustfix("Cannot delete %s db",o),n(a.error)}})}function u(){return c.apply(this,arguments)}function c(){return c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var t=o("CurrentMessengerUser").getID();yield(e||(e=n("Promise"))).all([s(o("MAWIndexedDbMetadata").dbName(t),"maw_v1"),s(o("MAWIndexedDbMetadata").restoreDbName2(t),"maw_v3"),s(o("MAWIndexedDbMetadata").jobsDbName(t),"signal"),s(o("MAWIndexedDbMetadata").logDbName(t),"logDb")])}),c.apply(this,arguments)}l.deleteDB=s,l.deleteMAWPersistence=u}),98);
__d("MAWEARGenNewKeychainCryptoKey",["FBLogger","MAWCryptoConsts","MAWKeychainCrypto","MAWWebInitDataHelpers","MessengerWebInitData","WATimeUtils","asyncToGeneratorRuntime","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";function e(){return s.apply(this,arguments)}function s(){return s=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{var e,t=o("MAWWebInitDataHelpers").getLastAccountKeyFormatVersion(),n=(yield(e=o("MAWKeychainCrypto")).getAccountKeys(t))[0],a=e.genBrowserEncryptionKeyString(),i=e.genDatabaseEncryptionSeed(),l=yield e.encryptDataToStringBuffer(n,i),s=o("WATimeUtils").castToUnixTime(o("WATimeUtils").unixTime()+o("MAWCryptoConsts").ENC_KEY_TTL);return{accountKeyString:yield e.generateHashString(o("MAWWebInitDataHelpers").getAccountKeysString(t)[0]),appIdOrigin:r("MessengerWebInitData").appId,expiration:s,formatVersion:t,key:a,seed:l,userKeyBaseString:yield e.generateHashString(r("MessengerWebInitData").userKeyBase)}}catch(e){var u=r("getErrorSafe")(e);throw r("FBLogger")("messenger_web").catching(u).mustfixThrow("Failed to generateNewKey")}}),s.apply(this,arguments)}l.default=e}),98);
__d("MAWEARKeychainDecryptionError",[],(function(t,n,r,o,a,i){"use strict";var e=(function(e){function t(t){var n;return n=e.call(this,t)||this,n.name="MAWEARKeychainDecryptionError",n.message=t,n}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error));i.default=e}),66);
__d("MAWWorkerSetupArgs",[],(function(t,n,r,o,a,i){"use strict";var e=null;function l(t){e=t}function s(){return e}function u(){e=null}i.setWorkerSetupArgs=l,i.getWorkerSetupArgs=s,i.resetWorkerSetupArgs=u}),66);
__d("MAWGenKeychainCryptoKeyWithVersion",["ExecutionEnvironment","FBLogger","MAWCurrentUser","MAWEARKeychainDecryptionError","MAWKeychainCrypto","MAWWebInitDataHelpers","MAWWorkerSetupArgs","MessengerWebInitData","Promise","asyncToGeneratorRuntime","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e,t,n,r,o,a,i){return c.apply(this,arguments)}function c(){return c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,a,i,l,u,c,d){l===void 0&&(l=1);try{var m=yield o("MAWKeychainCrypto").getAccountKeys(l),p=yield(s||(s=n("Promise"))).all([o("MAWKeychainCrypto").importBrowserEncryptionKey(t),s.all(m.map(function(e){return o("MAWKeychainCrypto").decryptDataToArrayBuffer(e,a).catch(function(){return null})}))]),_=p[0],f=p[1],g=yield s.all(f.filter(Boolean).map(function(e){return o("MAWKeychainCrypto").genDatabaseEncryptionKey(_,e).catch(function(){return null})})),h=g.filter(Boolean);if(h.length===0)throw new(r("MAWEARKeychainDecryptionError"))("Failed to generate keys from seed");return{keys:h,version:i}}catch(t){var y=null,C=null,b=o("MAWWorkerSetupArgs").getWorkerSetupArgs();(e||(e=r("ExecutionEnvironment"))).isInWorker&&b!=null&&(y=b.userKeyBase===r("MessengerWebInitData").userKeyBase,C=b.fbId===o("MAWCurrentUser").getID());var v=o("MAWWebInitDataHelpers").getAccountKeysString(l),S=v&&v[0]!=null?yield o("MAWKeychainCrypto").generateHashString(v[0]):null;throw r("FBLogger")("messenger_web").catching(r("getErrorSafe")(t)).mustfix("Failed to genKeyWithVersion: accountKeyBackfilled = %s; accountKeyExists = %s; acccountKeyMatches = %s; userKeyBaseBackilled = %s; userKeyBaseExists = %s; userKeyBaseMatches = %s; appIdOrigin = %s; appIdInitData = %s; userIdMatches = %s; isInWorker = %s; userKeyBase_match_between_threads = %s; userId_match_between_threads = %s; formatVersion = %s;",u!=null,v!=null,u===S,c!=null,r("MessengerWebInitData").userKeyBase!=null,c===(yield o("MAWKeychainCrypto").generateHashString(r("MessengerWebInitData").userKeyBase)),d,r("MessengerWebInitData").appId,o("MAWCurrentUser").getID()===String(r("MessengerWebInitData").userId),(e||(e=r("ExecutionEnvironment"))).isInWorker,y,C,l),t}}),c.apply(this,arguments)}l.default=u}),98);
__d("MWEARKeychainV3Errors",[],(function(t,n,r,o,a,i){"use strict";var e=(function(e){function t(t){var n;return n=e.call(this,t)||this,n.name="EARKeychainNotFoundError",n.message=t,n}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error));i.EARKeychainNotFoundError=e}),66);
__d("MWLocalStorageErrorHandler",["cr:3449"],(function(t,n,r,o,a,i,l){"use strict";function e(){n("cr:3449")&&n("cr:3449").clearLocalStorageBigValues()}l.onQuotaExceeded=e}),98);
__d("MAWLocalStorage",["LocalStorageWrapper","MWLocalStorageErrorHandler","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e){o("WALogger").LOG([e])}function u(e){o("WALogger").ERROR([e])}function c(){return o("LocalStorageWrapper").getStorage(s)}function d(){return o("LocalStorageWrapper").isLocalStorageAvailable(s)}function m(e,t,n){return o("LocalStorageWrapper").setItemGuarded(e,t,n,u,o("MWLocalStorageErrorHandler").onQuotaExceeded)}function p(t,n){t==null?o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["not storage found"]))):t.removeItem(n)}l.getStorage=c,l.isLocalStorageAvailable=d,l.setItemGuarded=m,l.removeItemGuarded=p}),98);
__d("MWTabCommunicationChannel",["MAWLocalStorage"],(function(t,n,r,o,a,i,l){"use strict";var e=typeof window!="undefined"?window:self;function s(e){var t=o("MAWLocalStorage").getStorage(),n=function(r){o("MAWLocalStorage").setItemGuarded(t,e,JSON.stringify(r))},r=function(r){window.removeEventListener("storage",r),o("MAWLocalStorage").removeItemGuarded(t,e)},a=function(t){window.addEventListener("storage",t)},i=function(n){return n!=null&&n.key===e&&typeof n.newValue=="string"?JSON.parse(n.newValue):null};return{getMessage:i,onRequestReceived:function(t){var e=function(n){var e=i(n);e!=null&&t(e)};return a(e),{release:function(){r(e)}}},sendMessage:n,stopWaitingForReply:r,waitForReply:a}}function u(t){var n=new e.BroadcastChannel(t),r=new Set;n.addEventListener("message",function(e){r.forEach(function(t){t(e)})});var o=function(t){r.add(t)},a=function(t){r.delete(t)},i=function(t){n.postMessage(JSON.stringify(t))},l=function(t){return t!=null&&typeof t.data=="string"?JSON.parse(t.data):null};return{getMessage:l,onRequestReceived:function(t){var e=function(n){var e=l(n);e!=null&&t(e)};return o(e),{release:function(){a(e)}}},sendMessage:i,stopWaitingForReply:a,waitForReply:o}}function c(t){return e.BroadcastChannel!=null?u(t):s(t)}l.getChannel=c}),98);
__d("MWTabCommunication",["MWTabCommunicationChannel","Promise","clearTimeout","pageID","promiseDone","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(){function t(e,t){var n=this;this.$2=null,this.$5=function(e){var t=n.$4.getMessage(e);t!=null&&t.a==="sb"&&t.t!==n.tabID()&&t.r===n.tabID()&&t.k!=null&&(n.$2&&n.$2(t.k),n.$4.stopWaitingForReply(n.$5),n.$2=null)},this.$1=e,this.$3=t!=null?t:500,this.$4=o("MWTabCommunicationChannel").getChannel(e)}var a=t.prototype;return a.tabID=function(){return r("pageID")},a.$6=function(){var e={a:"r",t:this.tabID()};this.$4.sendMessage(e)},a.listenToRequest=function(r){return this.listenToRequestAsync(function(){return(e||(e=n("Promise"))).resolve(r())})},a.listenToRequestAsync=function(t){var e=this,n=function(o){o.a==="r"&&o.t!==e.tabID()&&r("promiseDone")(t().then(function(t){var n={a:"sb",k:t,r:o.t,t:e.tabID()};e.$4.sendMessage(n)}))};return this.$4.onRequestReceived(n)},a.$7=function(){var t=this;return new(e||(e=n("Promise")))(function(e){t.$2=e,t.$4.waitForReply(t.$5),t.$6()})},a.request=function(o,a){var t=this,i,l=function(){i!=null&&r("clearTimeout")(i)};return(e||(e=n("Promise"))).race([this.$7().then(function(e){return t.$4.stopWaitingForReply(t.$5),o(e)}),new e(function(e){i=r("setTimeout")(function(){e(a()),t.$4.stopWaitingForReply(t.$5)},t.$3)})]).then(function(e){return l(),e})},t})();l.MWTabCommunication=s}),98);
__d("MWBroadcastChannelPolyfill",["FBLogger","LocalStorageWrapper","MessengerLogHistory","Random","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MessengerLogHistory").getInstance("client_init");function s(t){e.debug("[MWBroadcastChannelPolyfill] "+t)}function u(e){r("FBLogger")("messenger_web").mustfix(e)}var c={},d=o("LocalStorageWrapper").getStorage(s);function m(e){var t="$BroadcastChannel$"+e+"$",n=!1,a=function(n){var e,r;if(n.storageArea===d){var o=n.newValue;if(!(o==null||o==="")&&((e=n.key)==null?void 0:e.substring(0,t.length))===t){var a=JSON.parse(o);(r=c[t])==null||r.forEach(function(e){e({data:a})})}}};return window.addEventListener("storage",a),{addEventListener:function(n,r){c[t]=c[t]||new Set,c[t].add(r)},close:function(){n||(n=!0,c={},window.removeEventListener("storage",a))},postMessage:function(a){if(n){r("FBLogger")("ls_web_init").mustfix("Broadcast channel is closed");return}var e=JSON.stringify(a),i=t+String(Date.now())+"$"+String(r("Random").uint32());o("LocalStorageWrapper").setItemGuarded(d,i,e,u),r("setTimeout")(function(){o("LocalStorageWrapper").removeItemGuarded(d,i,u)},500)},removeEventListener:function(n,r){var e;(e=c[t])==null||e.delete(r)}}}l.default=m}),98);
__d("MWBroadcastChannel",["MWBroadcastChannelPolyfill"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return self.BroadcastChannel!=null?new self.BroadcastChannel(e):r("MWBroadcastChannelPolyfill")(e)}l.MWBroadcastChannel=e}),98);
__d("MWLSDatabaseNames",[],(function(t,n,r,o,a,i){"use strict";var e="LightSpeed",l=e+"V3";i.name=e,i.lightspeedPrefix=l}),66);
__d("MWLSIndexedDBName",["MAWCurrentUser","MWLSDatabaseNames"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e=o("MAWCurrentUser").getID();return o("MWLSDatabaseNames").lightspeedPrefix+e}l.dbName=e}),98);
__d("ReStoreTabNotifier",["CurrentMessengerUser","FBLogger","MWBroadcastChannel","MWLSIndexedDBName","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e=o("CurrentMessengerUser").getIDorEIMU();function s(t){var n=o("MWBroadcastChannel").MWBroadcastChannel(t==="restore-table-"+e+"-"+o("MWLSIndexedDBName").dbName()?"mwChat-"+e:t);function a(e,t){try{n.postMessage([e,t])}catch(e){r("FBLogger")("messenger_web").catching(r("getErrorSafe")(e)).warn("Failed to broadcast changes")}}function i(e,t){n.addEventListener("message",function(n){var r=n.data,o=r[0];o===e&&t(r[1])})}return{onEventReceive:i,postMessage:a}}l.default=s}),98);
__d("MWEARKeychainV3",["$InternalEnum","Deferred","ExecutionEnvironment","FBLogger","LSPlatformLsInitLog","MAWCryptoConsts","MAWCurrentUser","MAWEARGenNewKeychainCryptoKey","MAWGenKeychainCryptoKeyWithVersion","MAWQplProxy","MAWReliabilityMonitor","MWEARKeychainV3Errors","MWTabCommunication","Promise","QPLUserFlow","Random","ReStoreTabNotifier","WAArrayBufferUtils","WAResultOrError","WATimeUtils","asyncToGeneratorRuntime","getErrorSafe","gkx","memoizeOneWithArgs","promiseDone","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=function(){return{accountKey:null,databaseEncryptionKeys:new Map,dbReady:new(r("Deferred")),latestVersion:o("MAWCryptoConsts").VERSION}},c={global_ear:u(),maw_ear:u()},d=null,m=(function(){var e=Object.keys(c).reduce(function(e,t){return e[t]="none",e},{});return{get:function(n){return e[n]},is:function(n,r){return e[n]===r},set:function(n,r){var t;e[n]=r,(t=d)==null||t.updateState()}}})();function p(e){c[e]=u(),m.set(e,"none")}function _(e,t){m.set(e,t)}function f(e){for(var t=o("Random").uint32();e.some(function(e){return e.randomisedVersion===t});)t=o("Random").uint32();return t}var g={global_ear:function(){return null},maw_ear:function(){return null}},h=function(t){return g[t]()},y=function(t,n){g[t]=function(){return n}},C=function(t,n){y(t,n),k(t).dbReady.resolve()},b={global_ear:"browserEncryptionMetaV2",maw_ear:"encryptionMetaV3"},v=r("memoizeOneWithArgs")(function(e,t){return new(o("MWTabCommunication")).MWTabCommunication("ear_keys_"+t+"_"+e)});function S(e,t,n){return R.apply(this,arguments)}function R(){return R=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var a;if(n===void 0&&(n=U),r("gkx")("9396")&&r("FBLogger")("messenger_web").info("Initialise EAR keychain: %s",e),d=B(e),m.is(e,"success")&&k(e).databaseEncryptionKeys.size!==0)return o("WAResultOrError").makeResult(E(e));var i=o("MAWCurrentUser").getID(),l=r("ReStoreTabNotifier")("channel-ear-keychain-v3-"+i);l.onEventReceive("notifyEarKeychainV2",w);var u=(s||(s=r("ExecutionEnvironment"))).isInWorker?"Worker":"UI";n(e+"_ear_init_start",{string:(a={},a["initFlow_"+e+"_"+u]=t,a)});try{var c,p=yield W(l,e,void 0,n);n(e+"_ear_import_end");for(var _ of p)k(e).databaseEncryptionKeys.set(_.result.version,{dbEntry:_.entry,keys:_.result.keys});return M(e),v(e,i).listenToRequest(function(){return JSON.stringify(Array.from(k(e).databaseEncryptionKeys.entries()).map(function(e){var t=e[0],n=e[1],r=n.dbEntry,a=n.keys;return[t,{dbEntry:r,keys:a.map(function(e){return o("WAArrayBufferUtils").arrayBufferToString(e)})}]}))}),n(e+"_ear_init_end",{string_array:(c={},c[e+"_randomisedVersionKeys"+u]=L(e).map(function(e){var t=e[0],n=e[1].dbEntry;return String(n.randomisedVersion)}),c)}),m.set(e,"success"),o("WAResultOrError").makeResult(E(e))}catch(t){return m.set(e,"failure"),n(e+"_ear_init_error"),r("gkx")("9396")&&r("FBLogger")("messenger_web").catching(r("getErrorSafe")(t)).mustfix("Failed to setup EAR Keychain V3. Namespace: %s",e),o("WAResultOrError").DEPRECATED_makeError("keychain-setup-failure",r("getErrorSafe")(t))}}),R.apply(this,arguments)}function L(e){return Array.from(k(e).databaseEncryptionKeys.entries())}function E(e){return k(e).latestVersion}function k(e){return c[e]}function I(e,t){var n=t!=null?t:E(e),a=k(e).databaseEncryptionKeys.get(n);if(a==null){r("promiseDone")($(e).then(function(e){var t=e.map(function(e){return e.version}).includes(n);r("FBLogger")("messenger_web").info("EAR Keychain DB match found: %s. Version = %s. NumberVersions = %s",t,n,e.length)}));var i=E(e),l=Array.from(k(e).databaseEncryptionKeys.keys());throw r("FBLogger")("messenger_web").mustfix("EAR Key v%s was null. Latest version: %s has key: %s, keychain length: %s, currentLatestVersion: %s, init status %s, in worker %s",n,i,k(e).databaseEncryptionKeys.get(i)==null,k(e).databaseEncryptionKeys.size,Math.max.apply(Math,l),m.get(e),(s||(s=r("ExecutionEnvironment"))).isInWorker),new(o("MWEARKeychainV3Errors")).EARKeychainNotFoundError("EAR Key "+n+" was null.")}return{dbEntry:a.dbEntry,keys:a.keys,randomisedVersion:a.dbEntry.randomisedVersion,version:n}}function T(e){return r("MAWGenKeychainCryptoKeyWithVersion")(e.key,e.seed,e.version,e.formatVersion,e.accountKeyString,e.userKeyBaseString,e.appIdOrigin)}var D=n("$InternalEnum")({UNKNOWN:-1,NO_KEY:0,EBSM_EARV2_UPGRADE:1,RANDOMISED_VERSION_UPGRADE:2,EXPIRED_KEY:3,FORCE_KEY_ROTATION:4});function x(e){if(e.length===0)return{reason:D.NO_KEY,result:!0};var t=e[e.length-1];return o("WATimeUtils").isInFuture(t.expiration)?{result:!1}:{reason:D.EXPIRED_KEY,result:!0}}function $(t){var r=N(t,"readonly");return new(e||(e=n("Promise")))(function(e,n){r.onabort=function(){return n(r.error)},r.onerror=function(){return n(r.error)};var o=r.objectStore(b[t]).getAll();o.onsuccess=function(){return e(o.result)},o.onerror=function(){return n(o.error)}}).then(P)}function P(e){var t=e.find(function(e){return e.version==null});t!=null&&r("FBLogger")("messenger_web").mustfix("EAR Keychain Rotation null version: fields nonnull: %s %s %s %s %s %s",t.id==null,t.key==null,t.seed==null,t.formatVersion==null,t.accountKeyString==null,t.userKeyBaseString==null);var n=e.filter(function(e){return e.version!=null});return n.sort(function(e,t){return e.version-t.version})}function N(e,t){var n=h(e);if(n==null)throw r("FBLogger")("messenger_web").mustfixThrow("Encryption IndexDB should've been initialized. Namespace: %s",e);return n.transaction(b[e],t,{durability:"strict"})}var M=function(t){var e=Array.from(k(t).databaseEncryptionKeys.keys());e.length>0?k(t).latestVersion=Math.max.apply(Math,e):r("FBLogger")("messenger_web").mustfix("EAR latest version does not exist")},w=function(t){var e=t.namespace,o=t.version;r("promiseDone")(n("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{r("FBLogger")("messenger_web").info("Received key rotation notification. Namespace: %s",e),yield k(e).dbReady.getPromise();var t=(yield $(e)).find(function(e){return e.version===o});if(t==null)throw r("FBLogger")("messenger_web").mustfixThrow("Notified new Ear Key but missing in DB");var n=yield T(t);k(e).databaseEncryptionKeys.set(n.version,{dbEntry:t,keys:n.keys}),M(e),r("FBLogger")("messenger_web").info("Rotated key successfully. Namespace: %s",e)}catch(t){return r("FBLogger")("messenger_web").catching(r("getErrorSafe")(t)).mustfix("Failed to handleNewVersion. In worker %s. Namespace: %s.",(s||(s=r("ExecutionEnvironment"))).isInWorker,e)}})())};function A(e){return m.get(e)!=="none"}function F(e){return m.get(e)}function O(e){return m.is(e,"success")?(k(e).databaseEncryptionKeys.size===0&&r("FBLogger")("messenger_web").mustfix("Keychain initialised but no keys present"),!0):!1}function B(e){return o("MAWReliabilityMonitor").MAWReliabilityMonitorSingleton.startMonitoring("EARv3",function(){return{extra:{isKeychainInitialised:O(e).toString(),latestVersion:E(e).toString()},reason:m.get(e),state:(function(){switch(m.get(e)){case"none":return o("MAWReliabilityMonitor").HealthReportState.PENDING;case"success":return o("MAWReliabilityMonitor").HealthReportState.OK;case"failure":return o("MAWReliabilityMonitor").HealthReportState.ERROR;default:return o("MAWReliabilityMonitor").HealthReportState.UNKNOWN}})()}})}function W(e,t,n,r){return q.apply(this,arguments)}function q(){return q=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,o,a,i){var l=yield r("MAWEARGenNewKeychainCryptoKey")();i(o+"_ear_raw_key_generated");var u=yield new(e||(e=n("Promise")))(function(e,n){var u=N(o,"readwrite");u.onerror=function(){return n(u.error)},u.onabort=function(){return n(u.error)};var c=u.objectStore(b[o]).getAll();c.onerror=function(){return n(c.error)},c.onsuccess=function(){var d;i(o+"_ear_keys_fetched");var m=P(c.result),p=x(m),_=p.reason,g=p.result;if((a==null?void 0:a.forceKeyRotation)!==!0&&!g)return e(m);var h=(a==null?void 0:a.forceKeyRotation)===!0?D.FORCE_KEY_ROTATION:_!=null?_:D.UNKNOWN,y=m.map(function(e){return e.version}),C=(d=y[y.length-1])!=null?d:0;r("FBLogger")("messenger_web").info("Key rotation. EAR versions: %s. Latest version: %s. Namespace: %s, Worker: %s",y.toString(),C,o,(s||(s=r("ExecutionEnvironment"))).isInWorker);var v=babelHelpers.extends({},l,{randomisedVersion:f(m),source:h,version:C+1});i(o+"_ear_adding_new_key"),u.oncomplete=function(){m.push(babelHelpers.extends({},v,{id:v.version})),t.postMessage("notifyEarKeychainV2",{namespace:o,version:v.version}),i(o+"_ear_gen_key_end"),e(m)};var S=u.objectStore(b[o]).add(v);S.onerror=function(){return n(r("FBLogger")("messenger_web").catching(S.error).mustfixThrow("Failed to rotate EAR key"))}}});i(o+"_ear_import_start");var c=yield e.allSettled(u.map(function(e){return T(e).then(function(t){return{entry:e,result:t}})})),d=c[c.length-1];if(d.status==="rejected"){var m,p=(m=a==null?void 0:a.corruptedEARRetryCount)!=null?m:0;if(p>=1)throw d.reason;return W(t,o,{corruptedEARRetryCount:p+1,forceKeyRotation:!0},i)}return c.map(function(e){if(e.status==="fulfilled")return e.value}).filter(Boolean)}),q.apply(this,arguments)}var U=function(t,n){o("LSPlatformLsInitLog").addPoint(t,n),V(t,n)},V=function(t,n){var e=r("qpl")._(25310776,"6155");(s||(s=r("ExecutionEnvironment"))).isInWorker?o("MAWQplProxy").sendQplPointThroughBridge(e,"backend_"+t,{annotations:n}):(r("QPLUserFlow").addPoint(e,"ui_"+t),n!=null&&r("QPLUserFlow").addAnnotations(e,n))},H=function(t,n){return v(t,n).request(function(e){var n=JSON.parse(e);return n.forEach(function(e){var n=e[0],r=e[1],a=r.keys.map(o("WAArrayBufferUtils").stringToArrayBuffer);k(t).databaseEncryptionKeys.set(n,{dbEntry:r.dbEntry,keys:a})}),M(t),m.set(t,"success"),!0},function(){return!1})};l.InitStatus=m,l.resetKeychain__TEST_ONLY_DO_NOT_USE=p,l.setInitStatus__TEST_ONLY_DO_NOT_USE=_,l.generateNewRandomisedVersionNumber=f,l.setNamespaceSourceDbWithoutMarkingDbReady=y,l.setNamespaceSourceDbAndMarkAsReady=C,l.getEncryptionKeysTabCommunication=v,l.init=S,l.getLatestVersion=E,l.getKeychain=k,l.getDbEncryptionKey=I,l.isKeychainSettled=A,l.getKeychainInitStatus=F,l.isKeychainInitialised=O,l.logMawInitPoint=V,l.importKeysFromOtherTab=H}),98);
__d("WAWorkerGlobalScope",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){return typeof window!="undefined"?window:typeof globalThis!="undefined"?globalThis:self})();i.workerGlobalScope=e}),66);
__d("MAWEncryptionIndexedDbV2",["BrowserLockManager","EARInitType","ExecutionEnvironment","FBLogger","IndexedDbPolyfills","MAWCurrentUser","MAWIndexedDBDeletion","MAWIndexedDbMetadata","MAWQplProxy","MWEARKeychainV3","Promise","QPLUserFlow","WALogger","WAWorkerGlobalScope","err","qpl","vulture"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;n("IndexedDbPolyfills");var c="browserEncryptionMetaV2",d="version",m=1,p=6e4,_=null,f=null,g=null;function h(){return r("vulture")("GkRiObQOOMaU6C5SJlXrRPEuYoc="),_}function y(){return _!=null}var C=(function(e){function t(){return e.apply(this,arguments)||this}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error));function b(e,t){t===void 0&&(t=0);var a=o("MAWCurrentUser").getID();return t>m?(L(e,"ear_idb_retry_failed_max_reached"),(u||(u=n("Promise"))).reject(new C)):_!=null?(L(e,"ear_db_exists"),(u||(u=n("Promise"))).resolve()):indexedDB==null?(L(e,"ear_idb_unavailable"),(u||(u=n("Promise"))).reject(r("err")("IndexedDB API not available"))):(L(e,"ear_db_open_start",{bool:{browserLockEnabled:r("BrowserLockManager")!=null}}),new(u||(u=n("Promise")))(function(n,i){var l=function(o){b(e,t+1).then(n).catch(function(e){if(e instanceof C)return i(o);i(e)})};try{g=o("MAWIndexedDbMetadata").encryptionDbName(a);var u=indexedDB.open(g),m=o("WAWorkerGlobalScope").workerGlobalScope.setTimeout(function(){i(r("err")("IndexedDB initialisation timeout in %s flow, isInWorker: %s, openRequest: %s",String(e),(s||(s=r("ExecutionEnvironment"))).isInWorker?"true":"false",u.readyState))},p);u.onupgradeneeded=function(t){o("WAWorkerGlobalScope").workerGlobalScope.clearTimeout(m),L(e,"ear_db_upgrade_start");var n=t.target.result;if(!n.objectStoreNames.contains(c)){var r=n.createObjectStore(c,{autoIncrement:!0,keyPath:"id"});r.createIndex(d,d,{unique:!0})}L(e,"ear_db_upgrade_end")},u.onblocked=function(){L(e,"ear_db_open_blocked"),o("WAWorkerGlobalScope").workerGlobalScope.setTimeout(function(){i(r("err")("EAR Open timed out while blocked"))},2e3)},u.onsuccess=function(t){o("WAWorkerGlobalScope").workerGlobalScope.clearTimeout(m);var a=t.target.result;if(!a.objectStoreNames.contains(c)){var s=u.result.objectStoreNames.contains(c);return r("FBLogger")("messenger_web").warn("Missing encryption meta table. Is store present: %s",s),o("WAWorkerGlobalScope").workerGlobalScope.clearTimeout(m),S(a,"missing_encryption_meta_table").then(function(){l(r("err")("Malformed encryption DB"))}).catch(function(t){return L(e,"ear_idb_retry_failed_delete_failed"),i(r("err")("Failed to delete malformed encryption DB: "+t.message))})}a.onversionchange=function(){a.close(),r("FBLogger")("messenger_web").info("EAR onversionchange triggered"),o("WAWorkerGlobalScope").workerGlobalScope.clearTimeout(m),f==null||f()},L(e,"ear_db_open_end"),_=a,o("MWEARKeychainV3").setNamespaceSourceDbAndMarkAsReady("global_ear",_),n()},u.onerror=function(){if(o("WAWorkerGlobalScope").workerGlobalScope.clearTimeout(m),u.error.name==="UnknownError")return L(e,"ear_db_open_error_unknown_error"),l(u.error);L(e,"ear_db_open_error"),i(u.error)}}catch(t){L(e,"ear_db_error"),i(t)}}))}function v(e){f=f==null?e:f}function S(e,t){return e===void 0&&(e=_),r("FBLogger")("messenger_web").warn("EAR DB deletion triggered: %s",t),e!=null&&e.close(),o("MAWIndexedDBDeletion").deleteDB(g,"ear")}function R(t){switch(t){case r("EARInitType").EB_INIT:return r("qpl")._(521477507,"1406");case r("EARInitType").MAW_INIT:return r("qpl")._(25310776,"6155");case r("EARInitType").MAW_RP_INIT:return o("WALogger").DEV(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[Armadillo Web Remote Presence] MAW RP Initialising EAR"]))),r("qpl")._(25310776,"6155");case r("EARInitType").LS_INIT:return r("qpl")._(25305590,"1127");case r("EARInitType").MAW_IN_UI_INIT:return null}}function L(e,t,n){var a=R(e);a!=null&&((s||(s=r("ExecutionEnvironment"))).isInWorker?o("MAWQplProxy").sendQplPointThroughBridge(a,"worker_"+t,{annotations:n}):(r("QPLUserFlow").addPoint(a,t),n!=null&&r("QPLUserFlow").addAnnotations(a,n)))}l.storeName=c,l.ENCRYPTION_MAW_STORES_INDEX=d,l.getEncryptionDB=h,l.isEncryptionDBInited=y,l.makeEncryptionDB=b,l.maybeSetEncryptionDbOnVersionChange=v,l.deleteEncryptionDB_UNSAFE=S}),98);
__d("MAWKeychain",["MWEARKeychainV3"],(function(t,n,r,o,a,i,l){"use strict";var e={getDbEncryptionKey:o("MWEARKeychainV3").getDbEncryptionKey,getLatestVersion:o("MWEARKeychainV3").getLatestVersion,init:o("MWEARKeychainV3").init};l.default=e}),98);
__d("MWSetupDBEncryption",["BrowserLockManager","ExecutionEnvironment","FBLogger","MAWEncryptionIndexedDbV2","MAWKeychain","MWEARKeychainV3","Promise","WAResultOrError","asyncToGeneratorRuntime","getErrorSafe","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=function(t,n){return n()};function c(e){u=e}var d="mw_ear_db";function m(e){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){try{return yield o("MAWEncryptionIndexedDbV2").makeEncryptionDB(e),yield u("init_setup_keychain",function(){return r("MAWKeychain").init("global_ear",e)})}catch(n){var t=n instanceof Error?n:r("getErrorSafe")(n);return r("FBLogger")("messenger_web").catching(t).mustfix("[%s] EAR setup error",String(e)),o("WAResultOrError").DEPRECATED_makeError("keychain-setup-failure",t)}}),p.apply(this,arguments)}function _(e){return o("MAWEncryptionIndexedDbV2").getEncryptionDB()!=null&&o("MWEARKeychainV3").isKeychainInitialised("global_ear")?(s||(s=n("Promise"))).resolve(o("WAResultOrError").makeResult(o("MWEARKeychainV3").getLatestVersion("global_ear"))):r("BrowserLockManager")!=null?new(s||(s=n("Promise")))(function(t,o){r("promiseDone")(r("BrowserLockManager").request(d,n("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{var n=yield m(e);t(n)}catch(e){o(e)}})),function(e){},function(e){o(e)})}):m(e)}function f(e,t){t===void 0&&(t=function(t){return!0});var r=null;return function(a){return r==null&&(r=e(a).then(function(e){return r=t(e)?(s||(s=n("Promise"))).resolve(e):null,e}).catch(function(e){throw r=null,e})),r}}var g=f(function(t){return _(t)},function(e){return(e==null?void 0:e.success)===!0}),h=(e||(e=r("ExecutionEnvironment"))).isInWorker?g:_;l.setPerformanceMeasurementTool=c,l.init=h}),98);
__d("BackendInitLoggingUtils",["ErrorMetadata","MAWCommonWebWorkerErrorLogging","MAWLoggerUtils","MAWQplProxy","MAWWebWorkerLogger","MWSetupDBEncryption","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t,n){return o("MAWQplProxy").measurePerfInQPL_USE_WITH_CARE(r("qpl")._(25310776,"6155"),"backend_"+t,n)},s=function(t){return o("MAWQplProxy").sendQplPointThroughBridge(r("qpl")._(25310776,"6155"),t)},u=function(t){return o("MAWQplProxy").sendQplPointThroughBridge(r("qpl")._(1056839232,"112"),t)};function c(){o("MAWWebWorkerLogger").setupWebWorkerWaLogger(),o("MAWCommonWebWorkerErrorLogging").init(),r("ErrorMetadata").addGlobalMetadata("MESSENGER_E2EE_WEB","ENVIRONMENT","worker"),o("MAWLoggerUtils").initMessengerWebLogging(),o("MWSetupDBEncryption").setPerformanceMeasurementTool(e)}l.measureMawInit=e,l.MAWInitPoint=s,l.MAWMICPoint=u,l.initializeBackendLogging=c}),98);
__d("EBLogger",["FBLogger"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t){return r("FBLogger")("wmi_eb",t)};l.EBLogger=e}),98);
__d("EBMinosCheckWasmFeatureSupport",["asyncToGeneratorRuntime","gkx","wasm-feature-detect"],(function(t,n,r,o,a,i,l){"use strict";var e=null;function s(){return u.apply(this,arguments)}function u(){return u=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(e!=null)return e;var t=yield o("wasm-feature-detect").bulkMemory(),n=yield o("wasm-feature-detect").bigInt(),r=yield o("wasm-feature-detect").referenceTypes();return e=t&&n&&r,e}),u.apply(this,arguments)}function c(){return d.apply(this,arguments)}function d(){return d=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=yield s();if(!e)return!1;var t=r("gkx")("20911");return t}),d.apply(this,arguments)}l.checkWasmFeatureSupport=s,l.checkWasmFeatureSupportAndGK=c}),98);
__d("MWEBUseLocalStorage",["WALogger","WebStorage","getMWEncryptedBackupsIsLocalStorageSupported"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t,n){var a=t,i=n!=null?n:"true";if(o("getMWEncryptedBackupsIsLocalStorageSupported").getMWEncryptedBackupsIsLocalStorageSupported()){var l;o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Encrypted Backups key "," written to local storage"])),a),(l=(s||(s=r("WebStorage"))).getLocalStorage())==null||l.setItem(a,i)}}function c(e){var t=e;if(o("getMWEncryptedBackupsIsLocalStorageSupported").getMWEncryptedBackupsIsLocalStorageSupported()){var n;(n=(s||(s=r("WebStorage"))).getLocalStorage())==null||n.removeItem(t)}}function d(e){if(o("getMWEncryptedBackupsIsLocalStorageSupported").getMWEncryptedBackupsIsLocalStorageSupported()){var t,n=e;return(t=(s||(s=r("WebStorage"))).getLocalStorageForRead())==null?void 0:t.getItem(n)}return null}function m(e){if(o("getMWEncryptedBackupsIsLocalStorageSupported").getMWEncryptedBackupsIsLocalStorageSupported()){var t,n=e;return((t=(s||(s=r("WebStorage"))).getLocalStorageForRead())==null?void 0:t.getItem(n))!=null}return!0}l.mwEBCreateLocalStorageEntry=u,l.mwEBDeleteLocalStorageEntry=c,l.mwEBGetLocalStorageEntryValue=d,l.mwEBGetIsLocalStorageEntryValuePresent=m}),98);
__d("EBReenrollmentTriggerHandler",["EBLogger","LSIntEnum","MWEBUseLocalStorage","MWEncryptedBackupsLocalStorageEntryEnum"],(function(t,n,r,o,a,i,l){"use strict";var e,s=o("EBLogger").EBLogger().tags(["DefaultEBReenrollmentTriggerHandler"]),u=(function(){function t(){}var n=t.prototype;return n.handle=function(n){s.debug("Running default reenrollment trigger handler for reason: "+(e||(e=o("LSIntEnum"))).toNumber(n.deviceReenrollmentReason));for(var t of r("MWEncryptedBackupsLocalStorageEntryEnum").members())s.debug("Clearing local storage key: "+t),t!==r("MWEncryptedBackupsLocalStorageEntryEnum").MW_EB_HAS_OPTED_OUT_OF_AUTO_RESTORE&&o("MWEBUseLocalStorage").mwEBDeleteLocalStorageEntry(t)},t})();l.DefaultEBReenrollmentTriggerHandler=u}),98);
__d("MWEBODSCategory",[],(function(t,n,r,o,a,i){"use strict";var e=7319;i.default=e}),66);
__d("MWEBODSEntityName.enum",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum")({MW_EB_PIN_RESTORE_AUTH:"mw_eb_pin_restore_auth",MW_EB_RC_RESTORE_AUTH:"mw_eb_rc_restore_auth",MW_EB_AUTO_RESTORE_AUTH:"mw_eb_auto_restore_auth",MW_EB_OTC_AUTH:"mw_eb_otc_auth",MW_EB_ONBOARDING_AUTH:"mw_eb_onboarding_auth",MW_EBSM_HYDRATION:"mw_ebsm_hydration",MW_EBSM_IDB:"mw_eb_ebsm_idb",MW_EBSM_CORRUPTION:"mw_ebsm_corruption",MW_EBSM_CORRUPTION_RELOAD:"mw_ebsm_corruption_reload",MW_EBSM_RESTORE_PERSISTENCE_ERROR:"mw_ebsm_restore_persistence",MW_EBSM_IDB_TABLE_DELETION:"mw_ebsm_idb_table_deletion",MW_EBSM_WORKER_SUFFIX:"_worker",MW_EBSM_COUNTERS:"mw_ebsm_counters",MW_EBSM_FETCH_BACKUP_IDS:"mw_ebsm_fetch_backup_ids",MW_EB_SWITCH_CONSISTENCY:"mw_eb_switch_consistency",MAW_EB_UPLOAD_TRACKING:"maw_eb_upload_tracking",MAW_EB_UPLOAD_COUNTER:"maw_eb_upload_counter",MAW_EB_RESTORE_COUNTER:"maw_eb_restore_counter",EB_SYMMETRIC_ENCRYPTION_JS_RUST_SHADOW_TEST:"eb_symmetric_encryption_js_rust_shadow_test",MAW_EB_FRONTEND_QPL_IN_WORKER:"maw_eb_frontend_qpl_in_worker",MW_EB_RETROACTIVE_BACKUP:"mw_eb_retroactive_backup"}),l=e;i.default=l}),66);
__d("EBReenrollmentTriggerListener",["EBReenrollmentTriggerHandler","LSIntEnum","MWEBODSCategory","MWEBODSEntityName.enum","ODS","ReQL","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(function(){function t(e){this.$1=new Map,this.$4=new(o("EBReenrollmentTriggerHandler")).DefaultEBReenrollmentTriggerHandler,this.$2=e,this.$5()}var n=t.prototype;return n.$5=function(){var t=this;return this.$3==null&&(this.$3=o("ReQL").fromTableAscending(this.$2.tables.encrypted_backups_reenrollment_trigger).take(1).subscribe(function(n,a){if(a.operation==="add"||a.operation==="put"){(e||(e=o("ODS"))).bumpEntityKey(r("MWEBODSCategory"),r("MWEBODSEntityName.enum").MW_EBSM_COUNTERS,"reenrollment_trigger");var l=t.getDefaultHandler();if(a.value.deviceReenrollmentReason!=null){var u;l=(u=t.$1.get((s||(s=o("LSIntEnum"))).unwrapIntEnum(a.value.deviceReenrollmentReason)))!=null?u:l}l.handle(a.value),r("promiseDone")(t.$2.runInTransaction(function(e){return e.encrypted_backups_reenrollment_trigger.delete(a.value.pk)},"readwrite",void 0,void 0,i.id+":77"))}})),this.$3},n.attachHandler=function(t,n){this.$1.set(t,n)},n.getDefaultHandler=function(){return this.$4},t})(),c;function d(e){return c!=null||(c=new u(e)),c}function m(e){return c==null&&d(e),c}l.initEBReenrollmentTriggerListener=d,l.getEBReenrollmentTriggerListener_TESTING_ONLY=m}),98);
__d("EphemeralMediaViewMode",[],(function(t,n,r,o,a,i){var e=Object.freeze({READ_ONCE:0,REPLAYABLE:1,PERMANENT:2});i.default=e}),66);
__d("LSContactUserBlockAction",[],(function(t,n,r,o,a,i){var e=Object.freeze({MN_UNBLOCK:0,MN_BLOCK:1,FB_UNBLOCK:2,FB_BLOCK:3});i.default=e}),66);
__d("LSDataTraceTag",[],(function(t,n,r,o,a,i){"use strict";var e=0,l=1,s=2,u=3,c=4,d=5,m=6,p=7,_=20,f=21,g=22,h=23,y=24,C=25,b=26,v=27,S=28,R=29,L=30,E=31,k=32,I=33,T=34,D=35,x=36,$=37,P=38,N=39,M=40,w=41,A=42;i.none=e,i.sticker=l,i.image=s,i.animatedImage=u,i.video=c,i.audio=d,i.file=m,i.xma=p,i.messageTypeNone=_,i.messageTypeText=f,i.messageTypeFutureproof=g,i.messageTypeCiphertext=h,i.messageTypeUnavailable=y,i.messageTypeImage=C,i.messageTypeVideo=b,i.messageTypePtt=v,i.messageTypeAdmin=S,i.messageTypeRevoked=R,i.messageTypeGif=L,i.messageTypeSticker=E,i.messageTypeExpiredEphemeral=k,i.messageTypeEphemeralSettingAdmin=I,i.messageTypeEphemeralSyncResponse=T,i.messageTypeEphemeralScreenshotAction=D,i.messageTypeDeleteForMe=x,i.messageTypeEphemeralSettingChangeFromCurrentDevice=$,i.messageTypeAlertICDC=P,i.messageTypeGroupInvite=N,i.messageTypeXMA=M,i.messageTypeReaction=w,i.messageTypeSenderKeyDistribution=A}),66);
__d("LSHotEmojiSize",[],(function(t,n,r,o,a,i){var e=Object.freeze({NONE:0,SMALL:1,MEDIUM:2,LARGE:3});i.default=e}),66);
__d("LSMEBTaskCreationSource",[],(function(t,n,r,o,a,i){var e=Object.freeze({UNKNOWN:-1,TEST_ONLY:0,TAM:1,MEM:2,RETROACTIVE_BACKUP:3,TAM_WEB:4,ACT_MESSAGE_DELETE:5,ACT_THREAD_DELETE:6,ACT_UPDATE_ATTACHMENT:7,TAM_PERSISTENCE_TASK:8,TAM_XMA_TOMBSTONE:9,MEM_RECEIVE:10,MEM_SEND:11,MEM_PEER_SYNC:12,MEM_RECEIVE_PROTOBUF:13,MEM_SEND_PROTOBUF:14,MEM_PEER_SYNC_PROTOBUF:15,MEM_RECEIVE_PROTOBUF_ONLY_FBN:16,MEM_SEND_PROTOBUF_ONLY_FBN:17,MEM_PEER_SYNC_PROTOBUF_ONLY_FBN:18,EB_ADD_DEVICE:21,OPTIMISTIC_THREAD_CREATE_VIA_SHIM:22,ACT_THREAD_INSERT_VIA_SHIM:23,MI_THREAD_INSERT_VIA_SHIM:24,POINT_QUERY_FROM_EB:25,MESSENGER_SEARCH:26,ACT_MESSAGE_RANGE_TASK_HANDLER:27,POINT_QUERY_ON_FULLY_LOADED_THREAD:28,THREAD_CUTOVER:29,HYBRID_THREAD_VERIFY_OR_CREATE_VIA_SHIM:30,BURNER_INTERNAL_LOAD_TESTING_FRAMEWORK:31,THREAD_GALLERY_RESTORE:32,ACT_SURROUNDING_QUERY:33,EB_SNAPSHOT_RESTORE:34,PROTOBUF_RESTORE:39,FTS_INDEX_EB_MESSAGES:40,INSTAMADILLO_DYI:41,MESSENGER_MESSAGE_LIST_PAGINATION:45,DELTA_GENERIC_MESSAGE_SYNC:55,MEDIA_GALLERY_RESTORE:57,EB_PROTOBUF_RESTORE_NO_OP:58,NEW_MEMBER_EXPORT:59,THREAD_POINT_QUERY:76,EB_RESTORE_REPLIED_MESSAGES_AFTER_RANGE_RESTORE:35,REPL_TESTING:36,EB_POINT_QUERY_IN_ACT:37,EB_POINT_QUERY_RETRY_DECRYPTION_FAILURES:38,IGD_DYI:42,FTS_INDEX_EB_MESSAGES_WEB:43,BULK_QUERY_FOR_SEARCH_RESULT:44,MSGR_DYI:46,EB_RESTORE_ON_REGISTRATION:47,EB_RESTORE_ON_OFFLINE_QUEUE_COUNT_LIMIT:48,EB_POINT_QUERY_RESTORE_ON_ACK_DROP:49,EB_POINT_QUERY_RESTORE_ON_DECRYPTION_FAILURE:50,EB_POINT_QUERY_RESTORE_ON_UNAVAILABLE_DEVICE:51,EB_RANGE_QUERY_RESTORE_ON_THREAD_SESSION_ACTIVATE:52,EB_POINT_QUERY_PINNED_MESSAGES:53,EB_POINT_QUERY_RESTORE_PROTOBUF:54,EB_POINT_QUERY_IN_ACT_REACTIONS:56,EB_POINT_QUERY_BUMP_MESSAGES:60,EB_POINT_QUERY_IN_ACT_FOR_INCOMING_RETRY_RECEIPT:61,EB_POINT_QUERY_IN_ACT_FOR_REPORTING:62,EB_POINT_QUERY_IN_ACT_FOR_MESSAGE_STATUS_UPDATE:63,EB_POINT_QUERY_IN_ACT_FOR_REPL_TEST:64,EB_POINT_QUERY_IN_ACT_FOR_FACEBOOK_APP_NSE_NOTIFICATION_RENDERING:65,EB_POINT_QUERY_IN_ACT_FOR_MESSAGE_EXPORT_HANDLING:66,EB_POINT_QUERY_IN_ACT_FOR_TAM_ACT_PROXY:67,EB_POINT_QUERY_IN_ACT_FOR_REALTIME_INCOMING_MESSAGE:68,EB_POINT_QUERY_IN_ACT_FOR_REALTIME_INCOMING_AI_BOT_MESSAGE:69,EB_POINT_QUERY_IN_ACT_FOR_ENCRYPTED_BACKUPS_RESTORE_FOR_PERSISTENCE:70,EB_POINT_QUERY_IN_ACT_FOR_ENCRYPTED_BACKUPS_RESTORE_FOR_INDEXING:71,EB_POINT_QUERY_IN_ACT_FOR_ENCRYPTED_BACKUPS_RESTORE_FOR_NEW_MEMBER_HYDRATION:72,EB_POINT_QUERY_IN_ACT_FOR_ENCRYPTED_BACKUPS_RESTORE_FOR_ECHO_TO_PROTO_CONVERSION:73,EB_POINT_QUERY_IN_ACT_FOR_PENDING_MESSAGE_RECOVERY_HISTORICAL_FUTURE_PROOF:74,EB_POINT_QUERY_IN_ACT_FOR_PENDING_MESSAGE_RECOVERY_REALTIME_BLOCKED:75,EB_POINT_QUERY_TO_FETCH_SENDER_DEVICE_KEYS:77,RESONANCE_UTILS:80,MPS_RESTORE_REVERB_RESTORE:81,REPORTING:82,CLIENT_MESSAGE_TRUNCATION:83,CALLING_XMA:84,EB_ACT_ATTACHMENT_RESTORE:85,EB_MEB_ATTACHMENT_ACCESS_CONTROL_RESTORE:86,FORCE_CLIENT_MESSAGE_TRUNCATION:87,ACT_EDIT_MESSAGE_VALIDATION:88,ACT_REVOKE_MESSAGE_VALIDATION:89,REVERB_CLEANUP_HANDLER_SINGLE_MESSAGE_POINT_QUERY:90,REVERB_CLEANUP_HANDLER_RESTORE_MESSAGES_BEFORE_QUERY:91,REVERB_CLEANUP_HANDLER_RESTORE_MESSAGES_AFTER_QUERY:92,REVERB_CLEANUP_HANDLER_RESTORE_MESSAGES_SURROUNDING_QUERY:93,ACT_FETCH_LOCAL_ONLY_MESSAGE_PK_AND_LOCAL_BACKUP_RESTORE:94,ACT_FETCH_LOCAL_ONLY_MESSAGE_PK_AND_ENCRYPTED_BACKUP_RESTORE:95,FILE_GALLERY_RESTORE:96});i.default=e}),66);
__d("MAWAckLevel",["LSIntEnum","LSMessageSendStatus"],(function(t,n,r,o,a,i,l){"use strict";var e,s={clock:0,contentGone:-3,contentTooBig:-4,contentUnuploadable:-5,expired:-2,failed:-1,failedRetryable:-9,inactiveReceived:-6,partialOptimistic:-8,played:4,read:3,received:2,senderBackFillSent:-7,sent:1};function u(e){return e>0}function c(t){switch(t){case s.partialOptimistic:return(e||(e=o("LSIntEnum"))).ofNumber(0);case s.clock:return(e||(e=o("LSIntEnum"))).ofNumber(1);case s.sent:case s.received:case s.read:case s.played:return(e||(e=o("LSIntEnum"))).ofNumber(2);case s.failedRetryable:return(e||(e=o("LSIntEnum"))).ofNumber(5);default:return(e||(e=o("LSIntEnum"))).ofNumber(4)}}function d(t){switch(t){case s.partialOptimistic:return(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageSendStatus").NONE);case s.clock:return(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageSendStatus").SENDING_TO_SERVER);case s.sent:case s.received:case s.read:case s.played:return(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageSendStatus").SERVER_RECEIVED);case s.failedRetryable:return(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageSendStatus").RETRIABLE_ERROR);default:return(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageSendStatus").NON_RETRIABLE_ERROR)}}l.ACK=s,l.isMsgAuthoritative=u,l.levelToMessagingSendStatusV2=c,l.levelToMessagingSendStatus=d}),98);
__d("WAAckLevel",[],(function(t,n,r,o,a,i){"use strict";var e={SENDER_BACKFILL_SENT:-7,INACTIVE_RECEIVED:-6,CONTENT_UNUPLOADABLE:-5,CONTENT_TOO_BIG:-4,CONTENT_GONE:-3,EXPIRED:-2,FAILED:-1,CLOCK:0,SENT:1,RECEIVED:2,READ:3,PLAYED:4};i.ACK=e}),66);
__d("MAWAdminMsgHelpers",["MAWCreateParticipantAdminMsg","MAWExternalId","MAWRemoveParticipantAdminMsg","WAAckLevel","WAGlobals","WAJids"],(function(t,n,r,o,a,i,l){"use strict";var e="Facebook User",s=1;function u(t){return t==null||t===""?e:t}function c(t){return t!=null?o("WAJids").userIdFromJid(t):e}function d(e,t,n,r){return{ack:o("WAAckLevel").ACK.SENT,id:{author:o("WAJids").AUTHOR_SYSTEM,chat:e,externalId:o("MAWExternalId").generateExternalId()},msgContent:o("MAWCreateParticipantAdminMsg").createParticipantAdminMessage(n==="@me"?o("WAGlobals").getMyUserJid():n,t),serverTs:r,ts:r,type:"Admin"}}function m(e,t,n,r){return{ack:o("WAAckLevel").ACK.SENT,id:{author:o("WAJids").AUTHOR_SYSTEM,chat:e,externalId:o("MAWExternalId").generateExternalId()},msgContent:o("MAWRemoveParticipantAdminMsg").removeParticipantAdminMessage(n==="@me"?o("WAGlobals").getMyUserJid():n,t),serverTs:r,ts:r,type:"Admin"}}function p(e,t){return babelHelpers.extends({},_(e,t),{version:s})}function _(e,t){var n,r=o("WAGlobals").getMyUserJid(),a=t==="@me"?r:t;if(a===r)n={adminMsgContent:[o("WAJids").userIdFromJid(e)],adminType:"currentUserPromotedParticipant"};else if(a==null)n=e===r?{adminMsgContent:[],adminType:"currentUserGotPromoted"}:{adminMsgContent:[o("WAJids").userIdFromJid(e)],adminType:"participantGotPromoted"};else{var i=o("WAJids").userIdFromJid(a);n=e===r?{adminMsgContent:[i],adminType:"participantPromotedYou"}:{adminMsgContent:[i,o("WAJids").userIdFromJid(e)],adminType:"participantPromotedParticipant"}}return n}function f(e,t,n,r){var a=_(t,n);return{ack:o("WAAckLevel").ACK.SENT,id:{author:o("WAJids").AUTHOR_SYSTEM,chat:e,externalId:o("MAWExternalId").generateExternalId()},msgContent:a,serverTs:r,ts:r,type:"Admin"}}function g(e,t){return babelHelpers.extends({},h(e,t),{version:s})}function h(e,t){var n,r=o("WAGlobals").getMyUserJid(),a=t==="@me"?r:t;if(a===r)n=e===r?{adminMsgContent:[],adminType:"currentUserSelfDemoted"}:{adminMsgContent:[o("WAJids").userIdFromJid(e)],adminType:"currentUserDemotedParticipant"};else if(a==null)n=e===r?{adminMsgContent:[],adminType:"currentUserGotDemoted"}:{adminMsgContent:[o("WAJids").userIdFromJid(e)],adminType:"participantGotDemoted"};else{var i=o("WAJids").userIdFromJid(a);n=e===r?{adminMsgContent:[i],adminType:"participantDemotedYou"}:{adminMsgContent:[i,o("WAJids").userIdFromJid(e)],adminType:a===e?"participantSelfDemoted":"participantDemotedParticipant"}}return n}function y(e,t,n,r){var a=h(t,n);return{ack:o("WAAckLevel").ACK.SENT,id:{author:o("WAJids").AUTHOR_SYSTEM,chat:e,externalId:o("MAWExternalId").generateExternalId()},msgContent:a,serverTs:r,ts:r,type:"Admin"}}function C(e,t,n,r){var a,i=[],l=t.subject.content;if(l!=null)return t.subject.user===o("WAGlobals").getMyUserJid()?(a="currentUserNamedGroup",i.push(l)):n==null?(a="unkonwnUserNamedGroup",i.push(l)):(a="participantNamedGroup",i.push(n,l)),{ack:o("WAAckLevel").ACK.SENT,id:{author:o("WAJids").AUTHOR_SYSTEM,chat:e,externalId:o("MAWExternalId").generateExternalId()},msgContent:{adminMsgContent:i,adminType:a},serverTs:r,ts:r,type:"Admin"}}function b(e,t){var n=v(e,t);if(n!=null)return babelHelpers.extends({},n,{version:s})}function v(e,t){var n,r=[];if(e===o("WAGlobals").getMyUserJid())switch(t){case"all_member_add":n="currentUserSetAddModeAllMembers";break;case"admin_add":n="currentUserSetAddModeAdminOnly";break}else if(e!=null)switch(r.push(o("WAJids").userIdFromJid(e)),t){case"all_member_add":n="participantSetAddModeAllMembers";break;case"admin_add":n="participantSetAddModeAdminOnly";break}else switch(t){case"all_member_add":n="serverSetAddModeAllMembers";break;case"admin_add":n="serverSetAddModeAdminOnly";break}if(n!=null)return{adminMsgContent:r,adminType:n}}function S(e,t,n,r){var a=v(n,t);if(a!=null)return{ack:o("WAAckLevel").ACK.SENT,id:{author:o("WAJids").AUTHOR_SYSTEM,chat:e,externalId:o("MAWExternalId").generateExternalId()},msgContent:a,serverTs:r,ts:r,type:"Admin"}}l.UNKNOWN_USER=e,l.maybeUnknownParticipantName=u,l.createAdminMsgContactId=c,l.createParticipantAddAdminMessage=d,l.createParticipantRemoveAdminMsg=m,l.createParticipantPromoteAdminMessage=p,l.createParticipantPromoteAdminMsg=f,l.createParticipantDemoteAdminMessage=g,l.createParticipantDemoteAdminMsg=y,l.createGroupNameChangeAdminMsg=C,l.createMemberAddModeChangeAdminMessage=b,l.createMemberAddModeChangeAdminMsg=S}),98);
__d("MAWCreateParticipantAdminMsg",["MAWAdminMsgHelpers","WAGlobals"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){switch(e){case 1:return{adminMsgContent:[t],adminType:"participantAddedYou"};case 2:return{adminMsgContent:[t,n],adminType:"participantAddedYouAndOneUser"};default:return{adminMsgContent:[t,e.toString()],adminType:"participantAddedYouAndMoreThanOneUsers"}}}function s(e,t,n){switch(e){case 1:return{adminMsgContent:[t],adminType:"currentUserAddedOneParticipant"};case 2:return{adminMsgContent:[t,n],adminType:"currentUserAddedTwoParticipant"};default:return{adminMsgContent:[t,e.toString()],adminType:"currentUserAddedMoreThanTwoParticipant"}}}function u(e,t,n,r){switch(e){case 1:return{adminMsgContent:[t,n],adminType:"participantAddedOneUser"};case 2:return{adminMsgContent:[t,n,r],adminType:"participantAddedTwoUser"}}return{adminMsgContent:[t,n,e.toString()],adminType:"participantAddedMoreThanTwoUser"}}function c(t,n,r,a){var i=a==null?n.map(o("MAWAdminMsgHelpers").createAdminMsgContactId):a,l=i[0],c=i[1],d=r==null?o("MAWAdminMsgHelpers").createAdminMsgContactId(t):o("MAWAdminMsgHelpers").maybeUnknownParticipantName(r);return t===o("WAGlobals").getMyUserJid()?s(n.length,o("MAWAdminMsgHelpers").maybeUnknownParticipantName(l),o("MAWAdminMsgHelpers").maybeUnknownParticipantName(c)):n.includes(o("WAGlobals").getMyUserJid())?e(n.length,o("MAWAdminMsgHelpers").maybeUnknownParticipantName(d),o("MAWAdminMsgHelpers").maybeUnknownParticipantName(n[0]===o("WAGlobals").getMyUserJid()?c:l)):u(n.length,d,o("MAWAdminMsgHelpers").maybeUnknownParticipantName(l),o("MAWAdminMsgHelpers").maybeUnknownParticipantName(c))}l.createParticipantAdminMessage=c}),98);
__d("MAWRemoveParticipantAdminMsg",["MAWAdminMsgHelpers","WAGlobals"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){switch(e){case 1:return{adminMsgContent:[t],adminType:"participantRemovedYou"};case 2:return{adminMsgContent:[t,n],adminType:"participantRemovedYouAndOneUser"};default:return{adminMsgContent:[t,e.toString()],adminType:"participantRemovedYouAndMoreThanOneUsers"}}}function s(e,t,n,r){switch(e){case 1:return r?{adminMsgContent:[],adminType:"currentUserLeftGroup"}:{adminMsgContent:[t],adminType:"currentUserRemovedOneParticipant"};case 2:return{adminMsgContent:[t,n],adminType:"currentUserRemovedTwoParticipant"};default:return{adminMsgContent:[t,e.toString()],adminType:"currentUserRemovedMoreThanTwoParticipant"}}}function u(e,t,n,r,o){switch(e){case 1:return o?{adminMsgContent:[t],adminType:"participantLeftGroup"}:{adminMsgContent:[t,n],adminType:"participantRemovedOneUser"};case 2:return{adminMsgContent:[t,n,r],adminType:"participantRemovedTwoUser"}}return{adminMsgContent:[t,n,e.toString()],adminType:"participantRemovedMoreThanTwoUser"}}function c(t,n,r,a){var i=a==null?n.map(o("MAWAdminMsgHelpers").createAdminMsgContactId):a,l=i[0],c=i[1],d=r==null?o("MAWAdminMsgHelpers").createAdminMsgContactId(t):o("MAWAdminMsgHelpers").maybeUnknownParticipantName(r);return t===o("WAGlobals").getMyUserJid()?s(n.length,o("MAWAdminMsgHelpers").maybeUnknownParticipantName(l),o("MAWAdminMsgHelpers").maybeUnknownParticipantName(c),n[0]===o("WAGlobals").getMyUserJid()):n.includes(o("WAGlobals").getMyUserJid())?e(n.length,d,o("MAWAdminMsgHelpers").maybeUnknownParticipantName(n[0]===o("WAGlobals").getMyUserJid()?c:l)):u(n.length,d,o("MAWAdminMsgHelpers").maybeUnknownParticipantName(l),o("MAWAdminMsgHelpers").maybeUnknownParticipantName(c),n[0]===t)}l.removeParticipantAdminMessage=c}),98);
__d("MAWAdminMsgNormalized",["MAWLocalizationType"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){switch(e){case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_ONE_PARTICIPANT:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_TWO_PARTICIPANTS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_TWO_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU_AND_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_ONE_PARTICIPANT:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LEFT_GROUP:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU_AND_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_TWO_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_PROMOTED_PARTICIPANT:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_DEMOTED_PARTICIPANT:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_PHOTO:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PINNED_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UNPINNED_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_UK_OSA_ADMIN_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_GOT_PROMOTED:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_GOT_DEMOTED:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PROMOTED_YOU:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_DEMOTED_YOU:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PROMOTED_PARTICIPANT:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SELF_DEMOTED:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_DEMOTED_PARTICIPANT:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_DEVICE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_DEVICE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UPDATED_DEVICE:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CLEAR_PARTICIPANT_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CLEAR_OWN_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CLEAR_CURRENT_USER_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_TAKE_SCREENSHOT:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_RECORD_SCREEN:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SET_ADD_MODE_ADMIN_ONLY:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SET_ADD_MODE_ALL_MEMBERS:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_BUMPED_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_BUMPED_CURRENT_USER_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_BUMPED_OWN_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_BUMPED_PARTICIPANT_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_DISABLED:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_ENABLED:case o("MAWLocalizationType").LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_WITH_OTHER_USER_NAME:return{contactIds:t,contents:[]};case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CREATED_POLL:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_MIXED_POLL_UPDATE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_MORE_THAN_ONE_USERS:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_MORE_THAN_TWO_PARTICIPANTS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU_AND_MORE_THAN_ONE_USERS:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_MORE_THAN_TWO_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_NAMED_GROUP:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_HOTLIKE:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_CURRENT_USER_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SET_OWN_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_MINUTES:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_MINUTES:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_HOURS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_HOURS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_DAYS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_DAYS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_OFF:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_SECONDS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_SECONDS:{var n=t[0],r=t[1];return{contactIds:[n],contents:[r]}}case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_MORE_THAN_TWO_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_PARTICIPANT_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CLEAR_PARTICIPANT_NICKNAME:{var a=t[0],i=t[1],l=t[2];return{contactIds:[a,i],contents:[l]}}case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_AI_THEME:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_THEME:{var s=t[0],u=t[1],c=t[2];return{contactIds:[s],contents:[u,c]}}case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CHANGED_POLL_VOTE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_POLL_VOTE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_POLL_VOTE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_POLL_OPTION:{var d=t[0],m=t[1],p=t[2];return{contactIds:[d],contents:[m]}}case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CHANGED_MULTIPLE_POLL_VOTES:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_MULTIPLE_POLL_VOTES:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_MULTIPLE_POLL_VOTES:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_MULTIPLE_POLL_OPTIONS:{var _=t[0],f=t[1],g=t[2],h=t[3];return{contactIds:[_],contents:[f,g]}}case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CHANGED_MULTIPLE_POLL_VOTES:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_MULTIPLE_POLL_VOTES:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_POLL_VOTE:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_MULTIPLE_POLL_VOTES:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_POLL_VOTE:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_NAMED_GROUP:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_NAMED_GROUP:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU_AND_MORE_THAN_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_AI_THEME:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_THEME:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_HOTLIKE:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SET_OWN_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CREATED_POLL:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_POLL_OPTION:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_MULTIPLE_POLL_OPTIONS:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_MIXED_POLL_UPDATE:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CHANGED_POLL_VOTE:case o("MAWLocalizationType").LOCALIZATION_TYPE.POLL_UNSENT_UPDATE:default:return{contactIds:[],contents:t}}}l.deconstructContactIdsFromAdminContent=e}),98);
__d("MAWAdminMsgTypesGrouped",["MAWLocalizationType"],(function(t,n,r,o,a,i,l){"use strict";var e,s=[(e=o("MAWLocalizationType")).LOCALIZATION_TYPE.CUTOVER_IGD_THREAD_ADMIN_MESSAGE,e.LOCALIZATION_TYPE.CUTOVER_THREAD_ADMIN_MESSAGE,e.LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE],u=[e.LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_WITH_OTHER_USER_NAME,e.LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_SELF_THREAD,e.LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_OTHER_USER_NAME_UNKNOWN],c=[e.LOCALIZATION_TYPE.CURRENT_USER_ADDED_DEVICE,e.LOCALIZATION_TYPE.CURRENT_USER_REMOVED_DEVICE,e.LOCALIZATION_TYPE.CURRENT_USER_UPDATED_DEVICE,e.LOCALIZATION_TYPE.PARTICIPANT_ADDED_DEVICE,e.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_DEVICE,e.LOCALIZATION_TYPE.PARTICIPANT_UPDATED_DEVICE],d=[e.LOCALIZATION_TYPE.CURRENT_USER_ADDED_MORE_THAN_TWO_PARTICIPANTS,e.LOCALIZATION_TYPE.CURRENT_USER_ADDED_ONE_PARTICIPANT,e.LOCALIZATION_TYPE.CURRENT_USER_ADDED_TWO_PARTICIPANTS,e.LOCALIZATION_TYPE.CURRENT_USER_REMOVED_MORE_THAN_TWO_PARTICIPANTS,e.LOCALIZATION_TYPE.CURRENT_USER_REMOVED_ONE_PARTICIPANT,e.LOCALIZATION_TYPE.CURRENT_USER_REMOVED_TWO_PARTICIPANTS],m=[e.LOCALIZATION_TYPE.PARTICIPANT_ADDED_MORE_THAN_TWO_USER,e.LOCALIZATION_TYPE.PARTICIPANT_ADDED_ONE_USER,e.LOCALIZATION_TYPE.PARTICIPANT_ADDED_TWO_USER,e.LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU,e.LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_MORE_THAN_ONE_USERS,e.LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_ONE_USER,e.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_MORE_THAN_TWO_USER,e.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_ONE_USER,e.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_TWO_USER,e.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU,e.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU_AND_MORE_THAN_ONE_USERS,e.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU_AND_ONE_USER,e.LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_MORE_THAN_TWO_USER,e.LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_ONE_USER,e.LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_TWO_USER,e.LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU,e.LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU_AND_MORE_THAN_ONE_USER,e.LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU_AND_ONE_USER,e.LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_MORE_THAN_TWO_USER,e.LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_ONE_USER,e.LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_TWO_USER,e.LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_YOU,e.LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_YOU_AND_MORE_THAN_ONE_USER,e.LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_YOU_AND_ONE_USER],p=[e.LOCALIZATION_TYPE.CURRENT_USER_DEMOTED_PARTICIPANT,e.LOCALIZATION_TYPE.CURRENT_USER_PROMOTED_PARTICIPANT,e.LOCALIZATION_TYPE.PARTICIPANT_DEMOTED_PARTICIPANT,e.LOCALIZATION_TYPE.PARTICIPANT_PROMOTED_PARTICIPANT,e.LOCALIZATION_TYPE.CURRENT_USER_GOT_DEMOTED,e.LOCALIZATION_TYPE.CURRENT_USER_GOT_PROMOTED,e.LOCALIZATION_TYPE.CURRENT_USER_SELF_DEMOTED,e.LOCALIZATION_TYPE.PARTICIPANT_GOT_DEMOTED,e.LOCALIZATION_TYPE.PARTICIPANT_GOT_PROMOTED,e.LOCALIZATION_TYPE.PARTICIPANT_PROMOTED_YOU,e.LOCALIZATION_TYPE.PARTICIPANT_DEMOTED_YOU,e.LOCALIZATION_TYPE.PARTICIPANT_SELF_DEMOTED,e.LOCALIZATION_TYPE.CURRENT_USER_SET_ADD_MODE_ADMIN_ONLY,e.LOCALIZATION_TYPE.CURRENT_USER_SET_ADD_MODE_ALL_MEMBERS,e.LOCALIZATION_TYPE.PARTICIPANT_SET_ADD_MODE_ADMIN_ONLY,e.LOCALIZATION_TYPE.PARTICIPANT_SET_ADD_MODE_ALL_MEMBERS,e.LOCALIZATION_TYPE.SERVER_SET_ADD_MODE_ADMIN_ONLY,e.LOCALIZATION_TYPE.SERVER_SET_ADD_MODE_ALL_MEMBERS],_=[e.LOCALIZATION_TYPE.CURRENT_USER_LEFT_GROUP,e.LOCALIZATION_TYPE.PARTICIPANT_LEFT_GROUP],f=[e.LOCALIZATION_TYPE.CURRENT_USER_NAMED_GROUP,e.LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_HOTLIKE,e.LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_NICKNAME,e.LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_PHOTO,e.LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_THEME,e.LOCALIZATION_TYPE.CURRENT_USER_CLEAR_OWN_NICKNAME,e.LOCALIZATION_TYPE.CURRENT_USER_CLEAR_PARTICIPANT_NICKNAME,e.LOCALIZATION_TYPE.CURRENT_USER_SET_OWN_NICKNAME,e.LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_AI_THEME],g=[e.LOCALIZATION_TYPE.PARTICIPANT_NAMED_GROUP,e.LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_CURRENT_USER_NICKNAME,e.LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_HOTLIKE,e.LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_PARTICIPANT_NICKNAME,e.LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_PHOTO,e.LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_THEME,e.LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_AI_THEME,e.LOCALIZATION_TYPE.UNKNOWN_USER_NAMED_GROUP,e.LOCALIZATION_TYPE.PARTICIPANT_CLEAR_CURRENT_USER_NICKNAME,e.LOCALIZATION_TYPE.PARTICIPANT_CLEAR_OWN_NICKNAME,e.LOCALIZATION_TYPE.PARTICIPANT_CLEAR_PARTICIPANT_NICKNAME,e.LOCALIZATION_TYPE.PARTICIPANT_SET_OWN_NICKNAME],h=[e.LOCALIZATION_TYPE.CURRENT_USER_PINNED_MESSAGE,e.LOCALIZATION_TYPE.CURRENT_USER_UNPINNED_MESSAGE,e.LOCALIZATION_TYPE.PARTICIPANT_PINNED_MESSAGE,e.LOCALIZATION_TYPE.PARTICIPANT_UNPINNED_MESSAGE],y=[e.LOCALIZATION_TYPE.CURRENT_USER_LIMIT_SHARING_ENABLED,e.LOCALIZATION_TYPE.CURRENT_USER_LIMIT_SHARING_DISABLED,e.LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_ENABLED,e.LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_DISABLED],C=[e.LOCALIZATION_TYPE.TWO_USERS_CONNECTED,e.LOCALIZATION_TYPE.TWO_USERS_CONNECTED_ONE_MSPLIT],b=[e.LOCALIZATION_TYPE.CURRENT_USER_SEND_UNRENDERABLE_MESSAGE_FALLBACK,e.LOCALIZATION_TYPE.CURRENT_USER_SEND_LIVE_LOCATION_FALLBACK,e.LOCALIZATION_TYPE.CURRENT_USER_SEND_LOCATION_FALLBACK,e.LOCALIZATION_TYPE.CURRENT_USER_SEND_POLL_CREATION_FALLBACK,e.LOCALIZATION_TYPE.CURRENT_USER_SEND_CONTACT_SHARE_FALLBACK,e.LOCALIZATION_TYPE.CURRENT_USER_SEND_STORY_MENTION_FALLBACK,e.LOCALIZATION_TYPE.CURRENT_USER_SEND_BUMP_MESSAGE_FALLBACK,e.LOCALIZATION_TYPE.CURRENT_USER_SEND_STICKER_RECEIVER_FETCH_MESSAGE_FALLBACK],v=[e.LOCALIZATION_TYPE.PARTICIPANT_SEND_UNRENDERABLE_MESSAGE_FALLBACK,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_LIVE_LOCATION_FALLBACK,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_LOCATION_FALLBACK,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_POLL_CREATION_FALLBACK,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_CONTACT_SHARE_FALLBACK,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_STORY_MENTION_FALLBACK,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_BUMP_MESSAGE,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_STICKER_RECEIVER_FETCH_MESSAGE_FALLBACK,e.LOCALIZATION_TYPE.MESSENGER_MEMORY_ENCRYPTED_MESSAGE_FALLBACK,e.LOCALIZATION_TYPE.META_AI_SEND_MESSAGE_FALLBACK,e.LOCALIZATION_TYPE.USER_SEND_UNAVAILABLE_MESSAGE_FALLBACK,e.LOCALIZATION_TYPE.USER_SEND_ENCRYPTED_MESSAGE_FALLBACK,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_BUMP_MESSAGE_ORIGINAL_UNAVAILABLE_FALLBACK,e.LOCALIZATION_TYPE.RTC_XMA_FALLBACK],S=[e.LOCALIZATION_TYPE.CURRENT_USER_BUMPED_MESSAGE,e.LOCALIZATION_TYPE.CURRENT_USER_BUMPED_OWN_MESSAGE],R=[e.LOCALIZATION_TYPE.PARTICIPANT_BUMPED_CURRENT_USER_MESSAGE,e.LOCALIZATION_TYPE.PARTICIPANT_BUMPED_OWN_MESSAGE,e.LOCALIZATION_TYPE.PARTICIPANT_BUMPED_PARTICIPANT_MESSAGE],L=[e.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_DAYS,e.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_HOURS,e.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_MINUTES,e.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_SECONDS,e.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_OFF,e.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_DAYS,e.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_HOURS,e.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_MINUTES,e.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_SECONDS,e.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_DAYS,e.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_HOURS,e.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_MINUTES,e.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_SECONDS,e.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_OFF,e.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_DAYS,e.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_HOURS,e.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_MINUTES,e.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_SECONDS,e.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_DAYS,e.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_HOURS,e.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_MINUTES,e.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_SECONDS,e.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_OFF,e.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_DAYS,e.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_HOURS,e.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_MINUTES,e.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_SECONDS,e.LOCALIZATION_TYPE.EPHEMERAL_SETTINGS_AUTO_RESET],E=[e.LOCALIZATION_TYPE.YOUR_DEVICE_ICDC_ALERT_ADMIN_MESSAGE,e.LOCALIZATION_TYPE.ICDC_ALERT_ADMIN_MESSAGE],k=[e.LOCALIZATION_TYPE.CURRENT_USER_MISSED_AUDIO_CALL,e.LOCALIZATION_TYPE.CURRENT_USER_MISSED_VIDEO_CALL,e.LOCALIZATION_TYPE.PARTICIPANT_STARTED_GROUP_AUDIO_CALL,e.LOCALIZATION_TYPE.PARTICIPANT_STARTED_GROUP_VIDEO_CALL],I=[e.LOCALIZATION_TYPE.CURRENT_USER_AUDIO_CALLED,e.LOCALIZATION_TYPE.CURRENT_USER_STARTED_GROUP_AUDIO_CALL,e.LOCALIZATION_TYPE.CURRENT_USER_STARTED_GROUP_VIDEO_CALL,e.LOCALIZATION_TYPE.CURRENT_USER_VIDEO_CALLED,e.LOCALIZATION_TYPE.PARTICIPANT_MISSED_AUDIO_CALL,e.LOCALIZATION_TYPE.PARTICIPANT_MISSED_VIDEO_CALL,e.LOCALIZATION_TYPE.PARTICIPANT_AUDIO_CALLED,e.LOCALIZATION_TYPE.PARTICIPANT_VIDEO_CALLED],T=[e.LOCALIZATION_TYPE.CURRENT_USER_CREATED_GROUP,e.LOCALIZATION_TYPE.CURRENT_USER_MENTIONED_STORY_IG,e.LOCALIZATION_TYPE.CURRENT_USER_SENT_EVENT,e.LOCALIZATION_TYPE.CURRENT_USER_SENT_POST,e.LOCALIZATION_TYPE.CURRENT_USER_SENT_REEL,e.LOCALIZATION_TYPE.CURRENT_USER_SENT_STORY,e.LOCALIZATION_TYPE.CURRENT_USER_SENT_STORY_HIGHLIGHT,e.LOCALIZATION_TYPE.CURRENT_USER_RECEIVED_STORY_MENTION_IG,e.LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET,e.LOCALIZATION_TYPE.YOU_EPHEMERAL_RECORD_SCREEN,e.LOCALIZATION_TYPE.YOU_EPHEMERAL_TAKE_SCREENSHOT,e.LOCALIZATION_TYPE.CURRENT_USER_UNSENT_MESSAGE],D=[e.LOCALIZATION_TYPE.PARTICIPANT_CREATED_GROUP,e.LOCALIZATION_TYPE.UNKNOWN_USER_CREATED_GROUP,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_ATTACHMENT,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_AUDIO,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_GIF,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_IMAGE,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_STICKER,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_TEXT,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_TEXT_IN_GROUP,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_VIDEO,e.LOCALIZATION_TYPE.PARTICIPANT_SENT_EVENT,e.LOCALIZATION_TYPE.PARTICIPANT_SENT_POST,e.LOCALIZATION_TYPE.PARTICIPANT_SENT_REEL,e.LOCALIZATION_TYPE.PARTICIPANT_SENT_STORY,e.LOCALIZATION_TYPE.PARTICIPANT_SENT_STORY_HIGHLIGHT,e.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_RECORD_SCREEN,e.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_TAKE_SCREENSHOT,e.LOCALIZATION_TYPE.PARTICIPANT_REACT_MESSAGE,e.LOCALIZATION_TYPE.PARTICIPANT_REACT_MESSAGE_IN_GROUP,e.LOCALIZATION_TYPE.PARTICIPANT_UNSENT_MESSAGE,e.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_RECORD_SCREEN,e.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_TAKE_SCREENSHOT],x=[e.LOCALIZATION_TYPE.EMPTY_SNIPPET];l.cutoverAdminMsgs=s,l.dualThreadCutoverAdminMsgs=u,l.deviceChanges=c,l.currentUserAddRemoveParticipant=d,l.otherUserAddRemoveParticipant=m,l.groupPermissionsChanged=p,l.participantLeftGroup=_,l.chatCustomizedByCurrentUser=f,l.chatCustomizedByOtherUser=g,l.pinnedMessageUpdate=h,l.limitSharingUpdate=y,l.twoUsersConnected=C,l.fallbackMsgFromCurrentUser=b,l.fallbackMsgFromOtherUser=v,l.currentUserBumpsMessage=S,l.otherUserBumpsMessage=R,l.ephemeralSettingChanges=L,l.icdcAlerts=E,l.callActionToNotifyAbout=k,l.callActionNotToNotifyAbout=I,l.otherNonAdminMsgToBeBumped=T,l.otherNonAdminMsgToBeMarkedAsUnread=D,l.otherNonAdminMsgToNotTriggerUpdate=x}),98);
__d("MAWAnimatedImageThumbnailStore",[],(function(t,n,r,o,a,i){"use strict";var e=new Map;function l(t){var n;return(n=e.get(t))!=null?n:null}function s(t,n){e.set(t,n)}i.getThumbnailSpec=l,i.setThumbnailSpec=s}),66);
__d("WAPttComposerScaleWaveform",["invariant"],(function(t,n,r,o,a,i,l,s){function e(e,t){return t===e.length?e:t===0?[]:e.length===0?new Array(t).fill(0):t>e.length?u(e,t):c(e,t)}function u(e,t){t>e.length||s(0,75746,t,e.length);var n;if(e.length===1)n=0;else{var r=(t-e.length)/(e.length-1);n=1/(1+r)}var o=[];t>=1&&o.push(e[0]);for(var a=1;a<t-1;a++){var i=a*n,l=Math.floor(i),u=i-l;o.push(d(e[l],e[Math.ceil(i)],u))}return t>=2&&o.push(e[e.length-1]),o}function c(e,t){t<e.length||s(0,75747,t,e.length);var n=[],r=t/e.length,o=0,a=0,i=0;for(var l of e)o+=l,i+=1,a+=r,a>=1&&(n.push(o/i),i=0,o=0,a-=1);return i>0&&n.push(o/i),n}function d(e,t,n){return e+(t-e)*n}l.default=e}),98);
__d("MAWAudioUtils",["FBLogger","Promise","WAMaybeTranscodeOggOpusToWavForPlayback","WAPttComposerScaleWaveform","asyncToGeneratorRuntime","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e,s=8.5,u=100,c=64;function d(e){return m.apply(this,arguments)}function m(){return m=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var a=r("gkx")("3053")?URL.createObjectURL(yield o("WAMaybeTranscodeOggOpusToWavForPlayback").maybeTranscodeOggOpusToWavForPlayback(t)):URL.createObjectURL(t);return new(e||(e=n("Promise")))(function(e,t){var n=new Audio;n.setAttribute("crossOrigin","anonymous"),n.addEventListener("loadedmetadata",function(n){var r=n.currentTarget;if(r instanceof HTMLAudioElement){var o=r.duration;e(Math.ceil(o))}else t("EventTarget returned for event should be HTMLAudioElement")}),n.src=a,n.onabort=function(){t(r("FBLogger")("messenger_web").mustfixThrow("Error loading audio from provided URL"))},n.onerror=function(){var e,o;t(r("FBLogger")("messenger_web").mustfixThrow("getAudioDurationInSeconds: audioElement error code: %s. message: %s",(e=n.error)==null?void 0:e.code,(o=n.error)==null?void 0:o.message))}})}),m.apply(this,arguments)}function p(e){return e.map(function(e){return Math.floor(e*u)})}function _(e,t){return t===void 0&&(t=c),p(r("WAPttComposerScaleWaveform")(e,t))}function f(e){return Array.from(new Uint8Array(e)).join(",")}l.WAVEFORM_SAMPLE_RATE=s,l.WAVEFORM_AMPLITUDE_SCALE=u,l.WAVEFORM_TARGET_SIZE=c,l.getAudioDurationInSeconds=d,l.normalizeWaveformAmplitudes=p,l.recomputeWaveform=_,l.serializeWaveform=f}),98);
__d("MAWBlockUtils",["I64","LSContactUserBlockAction","LSIntEnum","LSThreadBitOffset","ReQL","asyncToGeneratorRuntime","promiseDone","react","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=(c||(c=o("react"))).useCallback,m=[0,31,35,55,56,58,24,25,19,85],p=[0,31,35,55,56,58,24,25,19,85,8,22],_=[35,19,85,56,24,25];function f(){var t=o("react-compiler-runtime").c(2),a=(e||(e=r("useReStore")))(),l;return t[0]!==a?(l=function(t,l){r("promiseDone")(n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(a.tables.participants).getKeyRange(t));if(e!=null){var n=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(a.tables.threads).getKeyRange(e.threadKey).filter(g));if(n!=null){var c=(s||(s=o("I64"))).equal(l,(u||(u=o("LSIntEnum"))).ofNumber(r("LSContactUserBlockAction").MN_BLOCK))?o("LSThreadBitOffset").clear(m,n.capabilities,n.capabilities2,n.capabilities3,n.capabilities4,n.capabilities5):(s||(s=o("I64"))).equal(l,(u||(u=o("LSIntEnum"))).ofNumber(r("LSContactUserBlockAction").FB_BLOCK))?o("LSThreadBitOffset").clear(p,n.capabilities,n.capabilities2,n.capabilities3,n.capabilities4,n.capabilities5):o("LSThreadBitOffset").set(_,n.capabilities,n.capabilities2,n.capabilities3,n.capabilities4,n.capabilities5),d=c[0],f=c[1];yield a.runInTransaction(function(e){var t=babelHelpers.extends({},n,{capabilities:d,capabilities2:f});return e.threads.put(t)},"readwrite",void 0,void 0,i.id+":137")}}})())},t[0]=a,t[1]=l):l=t[1],l}function g(e){return(s||(s=o("I64"))).equal(e.threadType,(u||(u=o("LSIntEnum"))).ofNumber(15))}l.clearedMnBlockCapabilities=m,l.clearedFbBlockCapabilities=p,l.useChangeThreadBlockCapabilities=f}),98);
__d("MAWMediaPreProcessQpl",["MAWSendQplToServer","Random","justknobx","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e=typeof self.BigInt=="function",s=r("justknobx")._("3427")*1e3;function u(t,n){var a=Date.now()+(Math.round(o("Random").random()*1e4)+1e4),i=o("MAWSendQplToServer").startQplUserFlow(r("qpl")._(1056840460,"718"),{bool:{has_big_int_support:e},string:{preprocess_type:t}},a,s);return n&&i.addAnnotations({int:{input_file_size:n.size},string:{mimetype:n.type}}),babelHelpers.extends({},i,{flowDetails:{event:r("qpl")._(1056840460,"718"),instanceKey:a}})}l.startMediaPreProcessQpl=u}),98);
__d("WABlobToImage",["Promise"],(function(t,n,r,o,a,i){"use strict";var e;function l(t){var r;return new(e||(e=n("Promise")))(function(e,n){r=new Image;var o=URL.createObjectURL(t),a=function(){return URL.revokeObjectURL(o)};r.onload=function(){e({image:r,releaseImageMemory:a})},r.onerror=function(){a(),n("loadBlobToImage error")},r.src=o})}i.blobToImage=l}),66);
__d("WACalculateBoundOutputSize",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){return t!=null?l(e.width,e.height,t.width,t.height):{outputWidth:e.width,outputHeight:e.height}}function l(e,t,n,r){var o=e,a=t;return e>t?e>n&&(a*=n/o,o=n):a>r&&(o*=r/a,a=r),{outputWidth:Math.round(Math.max(o,1)),outputHeight:Math.round(Math.max(a,1))}}i.calculateBoundOutputSize=e}),66);
__d("WADecodeImage",["WABlobToImage","WACalculateBoundOutputSize","WATagsLogger","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=o("WATagsLogger").TAGS(["decodeImage"]),c=typeof self.createImageBitmap=="function"&&typeof self.OffscreenCanvas=="function",d=c?m:_;function m(e,t){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n){u.DEV(e||(e=babelHelpers.taggedTemplateLiteralLoose(["start decoding image without DOM: ",""])),t.name);var r=yield self.createImageBitmap(t),a=r.height,i=r.width,l=o("WACalculateBoundOutputSize").calculateBoundOutputSize({width:i,height:a},n),s=l.outputHeight,c=l.outputWidth,d=new self.OffscreenCanvas(c,s),m=g({canvas:d,inputWidth:i,inputHeight:a,outputWidth:c,outputHeight:s,image:r});return m}),p.apply(this,arguments)}function _(e,t){return f.apply(this,arguments)}function f(){return f=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){u.DEV(s||(s=babelHelpers.taggedTemplateLiteralLoose(["start decoding image with DOM: ",""])),e.name);var n=yield o("WABlobToImage").blobToImage(e),r=n.image,a=n.releaseImageMemory,i=r.height,l=r.width,c=o("WACalculateBoundOutputSize").calculateBoundOutputSize({width:l,height:i},t),d=c.outputHeight,m=c.outputWidth,p=document.createElement("canvas"),_=g({canvas:p,inputWidth:l,inputHeight:i,outputWidth:m,outputHeight:d,image:r});return a(),_}),f.apply(this,arguments)}function g(e){var t=e.canvas,n=e.image,r=e.inputHeight,o=e.inputWidth,a=e.outputHeight,i=e.outputWidth;t.width=i,t.height=a;var l=t.getContext("2d");l.fillStyle="rgb(255,255,255)",l.fillRect(0,0,t.width,t.height),l.drawImage(n,0,0,o,r,0,0,i,a);var s=l.getImageData(0,0,i,a);return s}l.canDecodeWithoutDOM=c,l.decodeImage=d,l.decodeImageWithoutDOM=m,l.decodeImageWithDOM=_}),98);
__d("WAByteArray",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){for(var n=t,r=new Uint8Array(e),o=e-1;o>=0;o--)r[o]=n&255,n>>>=8;return r}function l(e){return e.buffer.slice(e.byteOffset,e.byteLength+e.byteOffset)}function s(e,t){if(!e||!t)return!1;var n=new Uint8Array(e),r=new Uint8Array(t),o=n.length,a=r.length;if(o!==a)return!1;for(var i=0;i<o;i++)if(n[i]!==r[i])return!1;return!0}i.intToBytes=e,i.uint8ArrayToBuffer=l,i.compareArrayBuffer=s}),66);
__d("WAPromiseTimeout",["Promise","WACustomError"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(r,a,i){var t=null,l=new(e||(e=n("Promise")))(function(e,n){t=setTimeout(function(){n(new(o("WACustomError")).TimeoutError(i)),clearTimeout(t)},a)});return e.race([r,l]).finally(function(){clearTimeout(t)})};l.promiseTimeout=s}),98);
__d("WAMediaWasmWorkerClient",["FBLogger","Promise","QPLUserFlow","WAByteArray","WACustomError","WAMediaWasmWorkerResource","WAPromiseTimeout","WAResultOrError","WorkerBundleResource","WorkerClient","WorkerMessagePort","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f,g,h,y,C,b,v,S,R,L,E,k,I,T,D,x,$,P,N,M,w=o("WorkerBundleResource").createDedicatedWebWorker(r("WAMediaWasmWorkerResource")),A="media_platform",F=function(){return r("FBLogger")(A).tags(["WAMediaWasmWorkerClient"])},O=new(o("WorkerMessagePort")).WorkerSyncedMessagePort(w,"WAMediaWasmWorker");o("WorkerClient").init(O),F().DEBUG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["initiated."]))),O.addMessageListener("log",function(e){var t=e.logType,n=e.message;switch(t){case"dev":F().DEBUG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["from worker: ",""])),n);break;case"error":F().MUSTFIX(u||(u=babelHelpers.taggedTemplateLiteralLoose(["worker error: ",""])),n);break;default:}}),O.addMessageListener("qpl",function(e){B(e)});function B(e){var t=e.action,n=e.event;switch(t.type){case"point":{r("QPLUserFlow").addPoint(n,t.pointName,{instanceKey:t.instanceKey});break}case"annotations":{r("QPLUserFlow").addAnnotations(n,t.annotations,{instanceKey:t.instanceKey});break}default:F().MUSTFIX(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Unknown QPL action type from worker: ",""])),t.type)}}function W(e){var t=e.eventFlow,n=e.input;return Q({operation:"webpCheck",input:o("WAByteArray").uint8ArrayToBuffer(n)},t)}function q(e){var t=e.eventFlow,n=e.input;return F().INFO(d||(d=babelHelpers.taggedTemplateLiteralLoose(["mp4RepairMuxInWorker processing video"]))),Q({operation:"mp4RepairMux",input:o("WAByteArray").uint8ArrayToBuffer(n)},t)}function U(e){return V.apply(this,arguments)}function V(){return V=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=e.eventFlow,n=e.forceTranscode,r=e.input,a=e.supportsHevc;F().INFO(_||(_=babelHelpers.taggedTemplateLiteralLoose(["transcodeToMp4InWorker processing video"])));var i=K();F().INFO(f||(f=babelHelpers.taggedTemplateLiteralLoose(["sending input bytes to worker, requestId: ",""])),i);var l=yield Y();if(!l.success)return o("WAResultOrError").makeError(l.error);var s=l.value,u=s.onMessageOnce("transcodeToMp4Response",function(e){return e.requestId===i}),c=o("WAByteArray").uint8ArrayToBuffer(r),d=c?[c]:void 0;s.postMessage({input:c,requestId:i,forceTranscode:n,supportsHevc:a,type:"transcodeToMp4Request",qplData:t.flowDetails},d),t==null||t.addPoint("sent_request_to_media_worker_start");var m=yield u,p=m.output;return F().INFO(g||(g=babelHelpers.taggedTemplateLiteralLoose(["received output from worker, requestId: ",", success: ",""])),i,p.success),p.success?(t==null||t.addPoint("sent_request_to_media_worker_end"),p):(t==null||t.addPoint("sent_request_to_media_worker_end"),t==null||t.addAnnotations({string:{errorMessage:p.error.errorMessage}}),o("WAResultOrError").makeError(p.error.errorType))}),V.apply(this,arguments)}function H(e){var t=e.eventFlow,n=e.imageData,r=e.quality,a=e.useHdScanConfig;return Q({operation:"progressiveJpegEncode",input:o("WAByteArray").uint8ArrayToBuffer(n.data),height:n.height,width:n.width,quality:r,useHdScanConfig:a},t)}function G(e){return z.apply(this,arguments)}function z(){return z=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=e.eventFlow,n=e.file,r=e.maxOutputResolution,o=e.quality,a=e.useHdScanConfig,i=yield n.arrayBuffer();return Q({operation:"progressiveJpegEncodeWithFile",input:i,fileName:n.name,fileType:n.type,quality:o,useHdScanConfig:a,maxOutputWidth:r==null?void 0:r.width,maxOutputHeight:r==null?void 0:r.height},t)}),z.apply(this,arguments)}function j(e){F().INFO(m||(m=babelHelpers.taggedTemplateLiteralLoose(["start prewarming media wasm worker, operation: ",""])),e),O.postMessage({type:"prewarm",operation:e})}var K=(function(){var e=0;return function(){return++e}})();function Q(e,t){return X.apply(this,arguments)}function X(){return X=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=K();F().INFO(h||(h=babelHelpers.taggedTemplateLiteralLoose(["sending input bytes to worker, requestId: ",""])),n);var r=yield Y(t);if(!r.success)return r;var a=r.value,i=a.onMessageOnce("mediaOperationResponse",function(e){return e.requestId===n}),l=e.input?[e.input]:void 0;a.postMessage(babelHelpers.extends({},e,{requestId:n,type:"mediaOperationRequest"}),l),t==null||t.addPoint("sent_request_to_media_worker_start");var s=yield i,u=s.output;return u.success?(F().INFO(y||(y=babelHelpers.taggedTemplateLiteralLoose(["received output from worker, requestId: ",""])),n),t==null||t.addPoint("sent_request_to_media_worker_end",{bool:{isOpfsSyncSupported:u.value.isOpfsSyncSupported}}),o("WAResultOrError").makeResult(u.value.bytes)):(F().MUSTFIX(C||(C=babelHelpers.taggedTemplateLiteralLoose(["requestId: ",", error: ",""])),n,u.error.errorMessage),t==null||t.addPoint("sent_request_to_media_worker_fail"),o("WAResultOrError").makeError(u.error.errorType))}),X.apply(this,arguments)}function Y(e){e==null||e.addPoint("get_connected_worker_port_start");var t=3e4;return o("WAPromiseTimeout").promiseTimeout(O.fullyConnected,t).then(function(t){return e==null||e.addPoint("get_connected_worker_port_end"),o("WAResultOrError").makeResult(t)}).catch(function(t){return e==null||e.addPoint("get_connected_worker_port_fail",{string:{workerPortFailure:t instanceof o("WACustomError").TimeoutError?"timeout":"runtime-error"}}),t instanceof o("WACustomError").TimeoutError?o("WAResultOrError").makeError("worker-connection-timeout"):(F().MUSTFIX(p||(p=babelHelpers.taggedTemplateLiteralLoose(["worker-connection-runtime-error: ",""])),t),o("WAResultOrError").makeError("worker-connection-runtime-error"))})}function J(e){return Z.apply(this,arguments)}function Z(){return Z=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t,r,a=e.file,i=e.maxDimension,l=e.thumbnailBlobByteSizeLimitBytes,s=e.thumbnailQualityPercentageWhenAboveByteSizeLimit,u=K();F().INFO(b||(b=babelHelpers.taggedTemplateLiteralLoose(["sending input to worker, requestId: ",""])),u);var c=yield Y();if(!c.success)return c;var d=c.value,m=d.onMessageOnce("mediaGenerateImageThumbnailResponse",function(e){return e.requestId===u}),p=yield a.arrayBuffer(),_=p?[p]:void 0;d.postMessage({input:p,fileName:a.name,fileType:a.type,maxDimension:i,requestId:u,thumbnailBlobByteSizeLimitBytes:l,thumbnailQualityPercentageWhenAboveByteSizeLimit:s,type:"mediaGenerateImageThumbnailRequest"},_);var f=yield m;return F().INFO(v||(v=babelHelpers.taggedTemplateLiteralLoose(["received output from worker, requestId: ",", success: ",""])),u,f.output.success),f.output.success?o("WAResultOrError").makeResult(f.output.value):(F().MUSTFIX(S||(S=babelHelpers.taggedTemplateLiteralLoose(["requestId: ",", error: ",""])),u,(t=f.output.error)==null?void 0:t.errorMessage),(M||(M=n("Promise"))).reject((r=f.output.error)==null?void 0:r.errorMessage))}),Z.apply(this,arguments)}function ee(e,t){return te.apply(this,arguments)}function te(){return te=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){F().INFO(R||(R=babelHelpers.taggedTemplateLiteralLoose(["start media storage shadow test"])));var n=K(),r=yield Y();if(!r.success)return o("WAResultOrError").makeError({errorName:"port-init",errorMessage:r.error});var a=r.value,i=a.onMessageOnce("mediaStorageShadowTestResponse",function(e){return e.requestId===n});a.postMessage({input:e,requestId:n,storageType:t,type:"mediaStorageShadowTestRequest"});var l=yield i,s=l.output;return s.success?(F().INFO(L||(L=babelHelpers.taggedTemplateLiteralLoose(["received storage results from worker, requestId: ",""])),n),o("WAResultOrError").makeResult(s.value)):(F().MUSTFIX(E||(E=babelHelpers.taggedTemplateLiteralLoose(["media storage test failed for storageType: ",", error: ",""])),t,s.error.errorMessage),o("WAResultOrError").makeError({errorName:s.error.errorName,errorMessage:s.error.errorMessage}))}),te.apply(this,arguments)}function ne(e){return re.apply(this,arguments)}function re(){return re=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=e.eventFlow,n=e.input,r=e.mediaType,a=e.rawMimeType,i=K();F().INFO(k||(k=babelHelpers.taggedTemplateLiteralLoose(["start kaleidoscope classifiy in worker, requestId: ",""])),i);var l=yield Y(t);if(!l.success)return o("WAResultOrError").makeError({errorName:l.error});var s=l.value,u=s.onMessageOnce("kaleidoscopeClassifyResponse",function(e){return e.requestId===i});s.postMessage({mediaType:r,rawMimeType:a,input:n,requestId:i,type:"kaleidoscopeClassifyRequest"}),t.addPoint("sent_request_to_media_worker_start");var c=yield u,d=c.output;return d.success?(F().INFO(I||(I=babelHelpers.taggedTemplateLiteralLoose(["received output from worker, requestId: ",""])),i),t==null||t.addPoint("sent_request_to_media_worker_end"),d):(t.addPoint("sent_request_to_media_worker_fail"),o("WAResultOrError").makeError({errorName:d.error}))}),re.apply(this,arguments)}function oe(e){return ae.apply(this,arguments)}function ae(){return ae=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=K();F().INFO(T||(T=babelHelpers.taggedTemplateLiteralLoose(["calculateFilehashInWorker[","]: sending ","B to worker"])),t,e.byteLength);var n=yield Y();if(!n.success)return{transferredBuffer:e,result:n};var r=n.value,a=r.onMessageOnce("calculateFilehashResponse",function(e){return e.requestId===t});r.postMessage({buffer:e,requestId:t,type:"calculateFilehashRequest"},[e]);var i=yield a,l=i.output,s=i.transferredBuffer;return l.success?(F().INFO(D||(D=babelHelpers.taggedTemplateLiteralLoose(["calculateFilehashInWorker[","]: received result from worker"])),t),{transferredBuffer:s,result:o("WAResultOrError").makeResult({filehash:l.value})}):(F().MUSTFIX(x||(x=babelHelpers.taggedTemplateLiteralLoose(["calculateFilehashInWorker[","]: failed: ",""])),t,l.error.errorMessage),{transferredBuffer:s,result:o("WAResultOrError").makeError(l.error.errorType)})}),ae.apply(this,arguments)}function ie(e,t,n){return le.apply(this,arguments)}function le(){return le=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var r=K();F().INFO($||($=babelHelpers.taggedTemplateLiteralLoose(["hmacSha256InWorker[","]: sending ","B to worker"])),r,t.byteLength);var a=yield Y();if(!a.success)return{transferredKeyBuffer:e,transferredBuffer:t,result:a};var i=a.value,l=i.onMessageOnce("calculateHmacSha256Response",function(e){return e.requestId===r});i.postMessage({keyBuffer:e,buffer:t,length:n,requestId:r,type:"calculateHmacSha256Request"},[e,t]);var s=yield l,u=s.output,c=s.transferredBuffer,d=s.transferredKeyBuffer;return u.success?(F().INFO(P||(P=babelHelpers.taggedTemplateLiteralLoose(["hmacSha256InWorker[","]: received result from worker"])),r),{transferredKeyBuffer:d,transferredBuffer:c,result:o("WAResultOrError").makeResult({hmac:u.value})}):(F().MUSTFIX(N||(N=babelHelpers.taggedTemplateLiteralLoose(["hmacSha256InWorker[","]: failed: ",""])),r,u.error.errorMessage),{transferredKeyBuffer:e,transferredBuffer:t,result:o("WAResultOrError").makeError(u.error.errorType)})}),le.apply(this,arguments)}l.webpCheckInWorker=W,l.mp4RepairMuxInWorker=q,l.transcodeToMp4InWorker=U,l.progressiveJpegEncodeInWorker=H,l.progressiveJpegEncodeInWorkerWithFile=G,l.prewarmMediaWasmWorker=j,l.getConnectedWorkerPortWithTimeout=Y,l.generateImageThumbnailInWorker=J,l.runMediaStorageShadowTestWasmWorker=ee,l.kaleidoscopeClassifyInWorker=ne,l.calculateFilehashInWorker=oe,l.hmacSha256InWorker=ie}),98);
__d("MAWImagePreProcess",["MAWGetImageSpec","MAWImageUtils","MAWMediaPreProcessQpl","MWFBLogger","Promise","WABlobToArrayBuffer","WACustomError","WADecodeImage","WAMediaWasmWorkerClient","WAPromiseTimeout","WAResultOrError","asyncToGeneratorRuntime","cometIsMimeTypeForMedia","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f=12e4,g=o("MWFBLogger").MWMediaLogger().tags(["ImagePreProcess"]),h=85,y=["image/heic"];function C(e,t,a,i){var l;i===!0?l={height:r("justknobx")._("187"),width:r("justknobx")._("187")}:l={height:r("justknobx")._("2144"),width:r("justknobx")._("2144")};var s;t?s=e.type==="image/webp"?(_||(_=n("Promise"))).resolve(e):L(e,"image/webp",t,a,l):s=e.type==="image/gif"?(_||(_=n("Promise"))).resolve(e):L(e,"image/jpeg",!1,a,l);var u=e.type==="image/gif";return u?s.then(function(e){return(_||(_=n("Promise"))).all([o("MAWGetImageSpec").getImageSpec(e),e])}).then((function(){var r=n("asyncToGeneratorRuntime").asyncToGenerator(function*(n){var r=n[0],a=n[1];return{file:a,imageSpec:r,plaintext:yield o("WABlobToArrayBuffer").blobToArrayBuffer(a),thumbnailUrlAndSpec:null,type:R(e,t)}});return function(e){return r.apply(this,arguments)}})()):s.then(function(t){return(_||(_=n("Promise"))).all([x(e,r("justknobx")._("2033")),o("MAWGetImageSpec").getImageSpec(t),t])}).then((function(){var r=n("asyncToGeneratorRuntime").asyncToGenerator(function*(r){var a=r[0],i=r[1],l=r[2];return(_||(_=n("Promise"))).resolve({file:l,imageSpec:i,plaintext:yield o("WABlobToArrayBuffer").blobToArrayBuffer(l),thumbnailUrlAndSpec:a,type:R(e,t)})});return function(e){return r.apply(this,arguments)}})())}function b(e,t){return v.apply(this,arguments)}function v(){return v=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,n){var a=t.URL.createObjectURL(e),i=n===!0?r("justknobx")._("2545"):r("justknobx")._("2033"),l=yield o("MAWImageUtils").urlToThumbnailSpec(a,i),s={height:l.height,width:l.width};return{file:e,imageSpec:s,thumbnailSpec:l,type:R(e,n),url:a}}),v.apply(this,arguments)}function S(e,t){return o("MAWGetImageSpec").getImageSpec(e).then(function(r){return(_||(_=n("Promise"))).resolve({file:e,imageSpec:r,stickerReceiverFetchId:t,type:"sticker"})})}function R(e,t){return t===!0?"sticker":e.type==="image/gif"?"animated_image":"image"}function L(e,t,n,r,o){return E.apply(this,arguments)}function E(){return E=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,r,a,i){g.DEBUG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["start image transcode ",""])),e.name);var l=o("MAWMediaPreProcessQpl").startMediaPreProcessQpl("image",e);l.addAnnotations({int:{total_number_of_files:a!=null?a:1},string:{targetMimetype:t}});var s=function(){return I(e,t,h,r,i).then(function(e){return e.success?e.value:(_||(_=n("Promise"))).reject("runtime-error")}).catch(function(e){return g.MUSTFIX(d||(d=babelHelpers.taggedTemplateLiteralLoose(["Error while transcoding image through browser api: ",""])),String(e)),l.addPoint("native_encode_failure",{string:{native_encode_error:e.toString()}}),null})},u=t==="image/jpeg"?yield o("WAPromiseTimeout").promiseTimeout(T(e,h,l,i).then(function(e){return e.success?e.value:(_||(_=n("Promise"))).reject(e.error)}),f).catch(function(e){return e instanceof o("WACustomError").TimeoutError?l.addPoint("mozjpeg_encode_timeout"):l.addPoint("mozjpeg_encode_failure",{string:{mozjpeg_encode_error:e.toString()}}),s()}):yield s();if(u==null)throw l.endFail("unable_to_transcode_image"),g.mustfixThrow("unable to transcode image");return l.endSuccess({int:{compressed_file_size:u.size}}),u}),E.apply(this,arguments)}function k(e,n){var r=t.URL.createObjectURL(e);return o("MAWImageUtils").urlToThumbnail(r,n)}function I(n,r,a,i,l){g.DEBUG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["start image transcoding through browser api"])));var u=t.URL.createObjectURL(n),c=n.name;return o("MAWImageUtils").urlToFile(u,r,a,i,l).then(function(e){var t=e.blob;return g.DEBUG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["finished image transcoding through browser api: "," bytes"])),t.size),o("WAResultOrError").makeResult(new File([t],c,{type:r}))})}function T(e,t,n,r){return D.apply(this,arguments)}function D(){return D=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,r){g.DEBUG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["start process image through wasm, file name: ",""])),e.name),o("WAMediaWasmWorkerClient").prewarmMediaWasmWorker("progressiveJpegEncode"),n.addPoint("prewarm_worker_started");var a;if(o("WADecodeImage").canDecodeWithoutDOM&&(a=yield o("WAMediaWasmWorkerClient").progressiveJpegEncodeInWorkerWithFile({eventFlow:n,file:e,maxOutputResolution:r,quality:t,useHdScanConfig:!0})),a==null||!a.success&&a.error==="decode-image-error"){var i=yield o("WADecodeImage").decodeImageWithDOM(e,r).catch(function(e){throw n.addPoint("image_decode_failure"),e});n.addPoint("image_decode_success"),a=yield o("WAMediaWasmWorkerClient").progressiveJpegEncodeInWorker({eventFlow:n,imageData:i,quality:t,useHdScanConfig:!0})}return a.success?(n.addPoint("pjpeg_encode_success"),g.DEBUG(p||(p=babelHelpers.taggedTemplateLiteralLoose(["finished jpeg transcoding through mozjpeg: "," bytes"])),a.value.byteLength),o("WAResultOrError").makeResult(new File([a.value],e.name,{type:"image/jpeg"}))):a}),D.apply(this,arguments)}function x(e,a){var i=(function(){var r=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var n=t.URL.createObjectURL(e),r=yield o("MAWImageUtils").urlToThumbnail(n,a);return t.URL.revokeObjectURL(n),r});return function(){return r.apply(this,arguments)}})();if(!o("WADecodeImage").canDecodeWithoutDOM)return i();var l=r("justknobx")._("2338")*1024,s=r("justknobx")._("2340");return o("WAPromiseTimeout").promiseTimeout(o("WAMediaWasmWorkerClient").generateImageThumbnailInWorker({file:e,maxDimension:a,thumbnailBlobByteSizeLimitBytes:l,thumbnailQualityPercentageWhenAboveByteSizeLimit:s}).then(function(e){if(!e.success)throw g.mustfixThrow("urlToFileInWorker error: "+e.error);return{height:e.value.height,jpegThumbnail:e.value.blob,width:e.value.width}}).catch(function(e){throw g.catching(e).MUSTFIX(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Error while processing url to thumbnail in worker"]))),e}),f).catch(function(e){return i()})}function $(e){return e==="image/gif"||e==="image/webp"?!0:o("cometIsMimeTypeForMedia").isMimeTypeForPhoto(e)?!y.includes(e):!1}l.imagePreprocess=C,l.optimisticImagePreprocess=b,l.stickerPreprocess=S,l.getJpegThumbnailInfo=k,l.generateImageThumbnailInWorkerWithFallback=x,l.isSupportedImageFileType=$}),98);
__d("WAWebDataUrlToBlob",["err"],(function(t,n,r,o,a,i,l){var e=/^data:((.*?)(;charset=.*?)?)(;base64)?,/;function s(t){var n=t.match(e);if(!n)throw r("err")("invalid data URI");var o=n[2]?n[1]:"text/plain"+(n[3]||";charset=US-ASCII"),a=!!n[4],i=t.slice(n[0].length),l;a?l=atob(i):l=decodeURIComponent(i);for(var s=new ArrayBuffer(l.length),u=new Uint8Array(s),c=0;c<l.length;c+=1)u[c]=l.charCodeAt(c);return new Blob([u],{type:o})}l.dataURLtoBlob=s}),98);
__d("MAWImageUtils",["FBLogger","MAWAnimatedImageThumbnailStore","MAWDbMedia","MAWFrontendMediaUtils","MAWImagePreProcess","MWPBumpEntityKey","Promise","WABlobToArrayBuffer","WACalculateBoundOutputSize","WAWebDataUrlToBlob","err","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e,s="image/jpeg",u=100,c=r("justknobx")._("2338")*1024,d=r("justknobx")._("2340"),m=r("justknobx")._("2545");function p(t,o){o===void 0&&(o=!0);var a;return new(e||(e=n("Promise")))(function(e,n){a=new Image;var i=/^(?:data|blob):/.test(t);o&&!i&&a.setAttribute("crossOrigin","anonymous"),a.onload=e,a.onabort=function(){n(r("FBLogger")("messenger_web").mustfixThrow("Error loading image from provided URL"))},a.onerror=function(){n(r("FBLogger")("messenger_web").mustfixThrow("Wrong blob type"))},a.src=t}).then(function(){return a})}function _(t,r,a,i){if(a===void 0&&(a=!1),t.toBlob)return new(e||(e=n("Promise")))(function(e){var n=i==null?void 0:i/100;t.toBlob(e,r,n)}).then(function(o){var i=c,l=d/100;return a&&o.size>=i?new(e||(e=n("Promise")))(function(e){t.toBlob(e,r,l)}):o});o("MWPBumpEntityKey").bumpEntityKey("maw","data_url_to_blob");var l=o("WAWebDataUrlToBlob").dataURLtoBlob;return(e||(e=n("Promise"))).resolve(l(t.toDataURL(r))).then(function(o){var i=c,s=d/100;return a&&o.size>=i?(e||(e=n("Promise"))).resolve(l(t.toDataURL(r,s))):o})}function f(t,a,i,l,s){var u=p(t);return u.then(function(e){var t=e.naturalWidth,n=e.naturalHeight,r=o("WACalculateBoundOutputSize").calculateBoundOutputSize({height:n,width:t},s),u=r.outputHeight,c=r.outputWidth,d=document.createElement("canvas");d.width=c,d.height=u;var m=d.getContext("2d");return l!==!0&&C(d),m.drawImage(e,0,0,t,n,0,0,c,u),_(d,a,!1,i).then(function(e){return{blob:e,height:u,width:c}})}).catch(function(t){return(e||(e=n("Promise"))).reject(t!=null?t:r("err")("Error loading image from URL"))})}function g(e,t){return p(e).then(function(e){var n=document.createElement("canvas"),r=e.naturalWidth,a=e.naturalHeight,i=n.getContext("2d"),l=b(a,r,t);n.width=l.width,n.height=l.height;var u=n.width,c=n.height;return y(n),i.drawImage(e,0,0,u,c),_(n,s,!0).then(function(e){return o("WABlobToArrayBuffer").blobToArrayBuffer(e).then(function(e){return{height:c,jpegThumbnail:e,width:u}})})})}function h(e,t){return p(e).then(function(e){var n=b(e.naturalHeight,e.naturalWidth,t);return{height:n.height,width:n.width}})}function y(e){var t=e.getContext("2d");t.fillStyle="rgb(247,247,247)",t.fillRect(0,0,e.width,e.height)}function C(e){var t=e.getContext("2d");t.fillStyle="rgb(255,255,255)",t.fillRect(0,0,e.width,e.height)}function b(e,t,n){var r=t!=null?t:n,o=e!=null?e:n;return r>o?r>n&&(o*=n/r,r=n):o>n&&(r*=n/o,o=n),{height:Math.round(Math.max(o,1)),width:Math.round(Math.max(r,1))}}function v(e){return p(e).then(function(e){return{height:e.naturalHeight,width:e.naturalWidth}})}function S(t,a,i){var l=o("MAWAnimatedImageThumbnailStore").getThumbnailSpec(t);if(l)return(e||(e=n("Promise"))).resolve(l);var s=f(t,"image/gif",void 0,void 0,void 0);return s==null?null:s.then(function(e){var n=new File([e.blob],"gif",{type:"image/gif"});return o("MAWImagePreProcess").generateImageThumbnailInWorkerWithFallback(n,Math.max(i!=null?i:e.width,a!=null?a:e.height)).then(function(e){return o("MAWAnimatedImageThumbnailStore").setThumbnailSpec(t,e),e})}).catch(function(e){throw r("FBLogger")("messenger_web_media").mustfixThrow("Failed while generating thumbnail for GIF. URL: ",t,e)})}function R(t){var r=t==null?void 0:t.file,a=t==null?void 0:t.width,i=t==null?void 0:t.height;if(r==null||a==null||i==null)return(e||(e=n("Promise"))).resolve(t);var l=o("MAWFrontendMediaUtils").getMediaTypeAndServerMediaTypeFromBlob(r.type,!0),s=l.mediaType;return s!==o("MAWDbMedia").MEDIA_TYPE.GIF?(e||(e=n("Promise"))).resolve(t):o("MAWImagePreProcess").generateImageThumbnailInWorkerWithFallback(r,Math.max(a,i)).then(function(e){var t=new File([e.jpegThumbnail],"secure_threads_xma_preview_thumbnail",{type:"image/jpeg"});return{file:t,height:e.height,width:e.width}})}l.TYPE_JPEG=s,l.IMG_THUMB_MAX_EDGE=u,l.STICKER_THUMBNAIL_MAX_SIZE=m,l.canvasToBlob=_,l.urlToFile=f,l.urlToThumbnail=g,l.urlToThumbnailSpec=h,l.boundHeightWidth=b,l.urlToImageSpec=v,l.generateGIFThumbnail=S,l.generatePreviewBlobForShare=R}),98);
__d("MAWGetImageSpec",["MAWImageUtils","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";function e(e,n){var r=t.URL.createObjectURL(e);return o("MAWImageUtils").urlToFile(r,n!=null?n:e.type).then(function(e){var t=e.height,n=e.width;return{height:t,width:n}})}function s(e){return u.apply(this,arguments)}function u(){return u=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var n=t.URL.createObjectURL(e),r=yield o("MAWImageUtils").urlToImageSpec(n);return t.URL.revokeObjectURL(n),r}),u.apply(this,arguments)}l.getImageSpec_DEPRECATED=e,l.getImageSpec=s}),98);
__d("MAWMpsMigrationStatus",["ExecutionEnvironment","FBLogger","MAWODSProxy","ODS","WAOdsEnums","gkx","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m={},p="maw-mps-migration",_=new Set;function f(){return r("justknobx")._("5255")?!0:d==null?(r("FBLogger")("wmi").MUSTFIX(e||(e=babelHelpers.taggedTemplateLiteralLoose(["MAWMpsMigrationStatus is not initialised, main thread: ",""])),(c||(c=r("ExecutionEnvironment"))).isInMainThread),!1):d}function g(e){r("FBLogger")("wmi").DEBUG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["MAWMpsMigrationStatus is ",""])),e),d=e,r("gkx")("12996")&&!_.has(p)&&(o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.MPS_MESSAGE_RENDERING,key:"isMigrated."+String(e)}),_.add(p))}function h(e,t){m[e]=t,_.has(e)||((u||(u=o("ODS"))).bumpEntityKey(9819,"worm.db_migration",e+".isMigrated."+String(t)),_.add(e))}function y(e){return m[e]}l.isMigrated=f,l.setStatus=g,l.setDbMigrationState=h,l.isDbMigrationReady=y}),98);
__d("MAWMpsGating",["MAWMpsMigrationStatus","gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("gkx")("10465")}function s(){return e()||r("gkx")("17181")}function u(){return e()||r("gkx")("17846")}function c(){return o("MAWMpsMigrationStatus").isDbMigrationReady("reverb-populate-media-tags")===!0&&(e()||r("gkx")("15207"))}l.isFullMpsEnabled=e,l.isMpsMessageRendering=s,l.isMpsSnippetsCacheServiceEnabled=u,l.isMpsMediaGalleryEnabled=c}),98);
__d("MsgrWebGating",["MAWMpsGating","gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("gkx")("15418")||o("MAWMpsGating").isMpsMessageRendering()}l.isQuotedMessagesInLsEnabled=e}),98);
__d("WAHashUtils",["WABase64"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){return o("WABase64").encodeB64UrlSafe(e,t)}function s(e,t){return o("WABase64").encodeB64UrlSafe(e,t)}function u(e){return e}function c(e){return e}function d(e){return""+e.slice(0,3)}l.toPlaintextHash=e,l.toCiphertextHash=s,l.stringToPlaintextHash=u,l.toHashedPlaintextHash=c,l.sanitisePlaintextHash=d}),98);
__d("getReplyContentForNoteReply",["WAJids"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n,r,a=e.author,i=e.msgId,l=o("WAJids").authorToUserId(a,t),s=(n=e.quote)==null||(n=n.content.msgContent)==null?void 0:n.content,u=(r=e.quote)==null?void 0:r.content.expirationTs;return{isNoteReply:!0,replyMediaExpirationTimestampMs:u!=null?u*1e3:void 0,replyMessageText:s,replySourceId:i,replyToUserId:l}}l.default=e}),98);
__d("MAWBridgeMsg",["FBLogger","LSHotEmojiSize","LSIntEnum","MAWDbMsg","MAWImageUtils","MAWMsgType","MAWUserJidWrapper","MAWVault","MAWXMAUtils","MWPBumpEntityKey","MsgrWebGating","WAAssertUnreachable","WAHashUtils","WAJids","WALogger","WAMsgType","WATimeUtils","getReplyContentForNoteReply","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e,t){var n;if(o("MsgrWebGating").isQuotedMessagesInLsEnabled()){if(e.isForwarded===!0&&e.type!==o("MAWMsgType").MSG_TYPE.STICKER)return{replyType:"FORWARD"};if(o("MAWXMAUtils").isXMAMsgHighlightsTabFriendUpdatesReply(e.xmaMessageType))return{replyToMsgId:e.msgId,replyToUserId:o("WAJids").authorToUserId(e.author,t),replyType:"HIGHLIGHTS_TAB_POST_REPLY",timestampMs:e.sortOrderMs!=null?o("WATimeUtils").castToMillisTime(e.sortOrderMs):null};if(o("MAWXMAUtils").isXMAStoryMention(e.xmaMessageType)||o("MAWXMAUtils").isFBXMAPostMention(e.xmaMessageType)){var r=e.threadJid,a=o("WAJids").interpretAsUserJid(r),i;return a!=null&&(i=o("WAJids").userIdFromJid(a)),o("MAWXMAUtils").isFBXMAPostMention(e.xmaMessageType)?{mentionedUserId:i!=null?i:t,replyType:"FB_POST_MENTION",timestampMs:e.sortOrderMs!=null?o("WATimeUtils").castToMillisTime(e.sortOrderMs):null}:{mentionedUserId:i!=null?i:t,replyType:"FB_STORY_MENTION",timestampMs:e.sortOrderMs!=null?o("WATimeUtils").castToMillisTime(e.sortOrderMs):null}}if(!(o("MAWXMAUtils").isXMAStoryShare(e.xmaMessageType)||o("MAWXMAUtils").isXMAStoryReaction(e.xmaMessageType)||o("MAWXMAUtils").isXMAStoryHighlightShare(e.xmaMessageType)||o("MAWXMAUtils").isXMAMsgHighlightsTabFriendUpdatesReply(e.xmaMessageType))){var l=(n=e.quote)==null?void 0:n.content;if(l!=null){var s=l.author,u=l.expirationTs,c=l.mediaId,d=l.msgContent,m=l.msgId,p=l.plaintextHash,_=l.sourceId,f=l.ts,g=l.type,h=l.xmaMessageType,y=o("WAJids").authorToUserId(s,t);if(g===o("WAMsgType").NOTE_REPLY)return{noteContent:d==null?void 0:d.content,replyMediaExpirationTimestampMs:u!=null?o("WATimeUtils").castToMillisTime(u*1e3):void 0,replyToMsgId:e.msgId,replyToUserId:y,replyType:"LIGHTWEIGHT_STATUS"};if(g===o("MAWMsgType").MSG_TYPE.XMA&&o("MAWXMAUtils").isXMAStoryReply(h)){if(_==null)return;var C=o("MAWXMAUtils").isXMAStoryProducerReply(h);return C?{replyType:"FB_PRODUCER_STORY_REPLY",storyMediaId:c!=null?c:void 0,storyMediaPlaintextHash:p,storyMsgType:c!=null?o("MAWMsgType").MSG_TYPE.IMAGE:void 0,storyOwnerId:y,storyUrl:_,timestampMs:f!=null?o("WATimeUtils").castUnixTimeToMillisTime(f):null}:{replyType:"STORY",storyMediaPlaintextHash:p,storyOwnerId:y,storyUrl:_,timestampMs:f!=null?o("WATimeUtils").castUnixTimeToMillisTime(f):null}}if(m!=null)return{isBumpMsg:e.type===o("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE,replyToMsgId:m,replyType:"MESSAGE"}}}}}function c(e,t,n){var a,i,l,s=((a=e.quote)==null?void 0:a.content.type)===o("WAMsgType").NOTE_REPLY;if(s)return r("getReplyContentForNoteReply")(e,n);var u=(i=e.quote)==null?void 0:i.content;if(o("MAWXMAUtils").isXMAStoryShare(e.xmaMessageType)||o("MAWXMAUtils").isXMAStoryReaction(e.xmaMessageType)||o("MAWXMAUtils").isXMAStoryMention(e.xmaMessageType)||o("MAWXMAUtils").isXMAStoryHighlightShare(e.xmaMessageType)||o("MAWXMAUtils").isXMAMsgHighlightsTabFriendUpdatesReply(e.xmaMessageType)||o("MAWXMAUtils").isFBXMAPostMention(e.xmaMessageType)){var c,d=e.author,m=e.mediaId,p=e.msgId,_=o("WAJids").authorToUserId(d,n);if(o("MAWXMAUtils").isXMAStoryMention(e.xmaMessageType)||o("MAWXMAUtils").isFBXMAPostMention(e.xmaMessageType)){var f=e.threadJid,g;f!=null&&(g=o("WAJids").interpretAsUserJid(f)),g!=null&&(_=o("WAJids").userIdFromJid(g))}return m!=null&&e.plaintextHash==null&&o("MWPBumpEntityKey").bumpEntityKeyWithAppId("maw.reply_attachment_media_missing_plaintext_hash","bridge_msg_get_reply_content"),{isFBPostMention:o("MAWXMAUtils").isFBXMAPostMention(e.xmaMessageType),isFBStoryMention:o("MAWXMAUtils").isFBXMAStoryMention(e.xmaMessageType),isIGStoryMention:o("MAWXMAUtils").isIGXMAStoryMention(e.xmaMessageType),isIGXMAStoryShare:o("MAWXMAUtils").isIGXMAStoryShare(e.xmaMessageType),isMsgHighlightsTabFriendUpdatesReply:o("MAWXMAUtils").isXMAMsgHighlightsTabFriendUpdatesReply(e.xmaMessageType),isStoryHighlightShare:o("MAWXMAUtils").isXMAStoryHighlightShare(e.xmaMessageType),isStoryReaction:o("MAWXMAUtils").isXMAStoryReaction(e.xmaMessageType),isStoryReply:o("MAWXMAUtils").isXMAStoryReply(e.xmaMessageType),replyMediaExpirationTimestampMs:u==null?void 0:u.expirationTs,replyMediaId:m,replyPlaintextHash:(c=e.plaintextHash)!=null?c:void 0,replySenderIsMe:d===o("WAJids").AUTHOR_ME||_===n,replySourceId:p,replySourceTimestampMs:e.sortOrderMs,replyStatusType:m!=null?o("MAWMsgType").MSG_TYPE.IMAGE:void 0,replyToUserId:_}}if(!(u==null||(u==null?void 0:u.msgId)==null&&(u==null?void 0:u.sourceId)==null)){var h=u||{},y=h.author,C=h.mediaId,b=h.msgId,v=h.plaintextHash,S=h.sourceId,R=h.specialTextSize,L=h.ts,E=h.type,k=h.xmaMessageType,I=L!=null?L*1e3:void 0,T=u.type===o("MAWMsgType").MSG_TYPE.TEXT||o("MAWXMAUtils").isXMAExternalLinkShare(k)?(l=u.msgContent)==null?void 0:l.content:void 0,D=o("WAJids").authorToUserId(y,n),x=u.type===o("MAWMsgType").MSG_TYPE.TEXT?u.msgContent.mentionedJids:void 0,$=y===o("WAJids").AUTHOR_ME||D===n,P=t||{},N=P.replyMediaId,M=P.replyMediaPreviewHeight,w=P.replyMediaPreviewWidth,A=P.replyMediaUrlFallback,F=P.replyPlaintextHash,O=P.replyXMAId;if(o("MAWXMAUtils").isXMAStoryReply(k)){var B;return{isStoryProducerReply:o("MAWXMAUtils").isXMAStoryProducerReply(k),isStoryReaction:o("MAWXMAUtils").isXMAStoryReaction(k),isStoryReply:!0,replyMediaExpirationTimestampMs:u==null?void 0:u.expirationTs,replyMediaId:C,replyPlaintextHash:(B=F!=null?o("WAHashUtils").stringToPlaintextHash(F):v)!=null?B:void 0,replySenderIsMe:$,replySourceId:S,replySourceTimestampMs:I,replyStatusType:C!=null?o("MAWMsgType").MSG_TYPE.IMAGE:void 0,replyToUserId:D}}var W=o("MAWImageUtils").boundHeightWidth(M,w,96*.8),q=W.height,U=W.width;return{isIGXMAPostShare:o("MAWXMAUtils").isIGXMAPostShare(k),isIGXMAStoryShare:o("MAWXMAUtils").isIGXMAStoryShare(k),isStoryReply:!1,replyMediaId:N,replyMediaPreviewHeight:E===o("MAWMsgType").MSG_TYPE.STICKER?q:M,replyMediaPreviewWidth:E===o("MAWMsgType").MSG_TYPE.STICKER?U:w,replyMediaUrlFallback:A,replyMentionedJids:x,replyMessageText:T,replyPlaintextHash:F!=null?o("WAHashUtils").stringToPlaintextHash(F):void 0,replySenderIsMe:$,replySourceId:b,replySourceTimestampMs:I,replyStatusType:R===1||R===2||R===3?o("MAWMsgType").MSG_TYPE.STICKER:E,replyToUserId:D,replyXMAId:O}}}function d(e){var t=e.specialTextSize;switch(t){case 1:return(s||(s=o("LSIntEnum"))).ofNumber(r("LSHotEmojiSize").SMALL);case 2:return(s||(s=o("LSIntEnum"))).ofNumber(r("LSHotEmojiSize").MEDIUM);case 3:return(s||(s=o("LSIntEnum"))).ofNumber(r("LSHotEmojiSize").LARGE);default:return(s||(s=o("LSIntEnum"))).ofNumber(r("LSHotEmojiSize").NONE)}}function m(e){if(r("justknobx")._("3424")&&e==="media_restore")return"EncryptedBackupsMedia";switch(e){case"eb_restore":return"EncryptedBackups";case"media_restore":return"EncryptedBackupsMedia";case"whatsapp":return"WhatsApp";default:return}}function p(t,n,a){var i,l,s,d,p=o("WAJids").extractUserId(o("MAWUserJidWrapper").getMyUserJid()),_=((i=t.isForwarded)!=null?i:!1)&&t.type!==o("MAWMsgType").MSG_TYPE.STICKER,f=(l=t.forwardingScore)!=null?l:0,g=o("MAWDbMsg").getCanonicalTsFromMsg(t),h=c(t,n,p),y=u(t,p),C=o("MAWXMAUtils").isXMAStoryShare(t.xmaMessageType),b=o("MAWXMAUtils").isXMAStoryReaction(t.xmaMessageType),v=o("MAWXMAUtils").isXMAExternalLinkShare(t.xmaMessageType),S=o("MAWXMAUtils").isIGXMAStoryMention(t.xmaMessageType),R=o("MAWXMAUtils").isFBXMAStoryMention(t.xmaMessageType),L=o("MAWXMAUtils").isXMAStoryHighlightShare(t.xmaMessageType),E=o("MAWXMAUtils").isXMAPostPrivateReply(t.xmaMessageType),k=o("MAWXMAUtils").isXMAMsgHighlightsTabFriendUpdatesReply(t.xmaMessageType),I=t.messageExpirationTs!=null&&t.messageExpirationTs<=o("WATimeUtils").unixTime(),T=o("MAWDbMsg").getSortOrderWithFallback(t),D=t.externalId,x=m(t.source);(n==null?void 0:n.replyPlaintextHash)!==(h==null?void 0:h.replyPlaintextHash)&&r("FBLogger")("messenger_web").warn("replyPlaintextHash mismatch. From replyMeta is null: %s, from replyContent is null: %s. Message type: %s",(n==null?void 0:n.replyPlaintextHash)==null,(h==null?void 0:h.replyPlaintextHash)==null,t.type);var $=(n==null?void 0:n.replyPlaintextHash)!=null?o("WAHashUtils").stringToPlaintextHash(n==null?void 0:n.replyPlaintextHash):(s=h==null?void 0:h.replyPlaintextHash)!=null?s:void 0;switch(t.type){case o("MAWMsgType").MSG_TYPE.TEXT:{var P,N=o("MAWVault").isVaulted(t.msgContent.content)?t.msgContent.content:o("MAWVault").vault(t.msgContent.content);return babelHelpers.extends({},h,{_META_loaded_as_quoted_msg:a,ack:t.ack,applicationErrorCode:t.applicationErrorCode,chatJid:t.threadJid,commands:t.msgContent.commands,content:N,editCount:t.editCount,ephemeralDurationInSec:(P=t.ephemeralSetting)==null?void 0:P.ephemeralExpirationInSec,externalId:D,forwardingScore:f,isAdminMessage:!1,isAuthorMe:t.author===o("WAJids").AUTHOR_ME,isExpiredMsg:I,isForwarded:_,mentionedJids:t.msgContent.mentionedJids,msgId:t.msgId,replyContent:y,replyPlaintextHash:$,sender:o("WAJids").authorToUserId(t.author,p),sortOrderMs:T,specialTextSize:t.specialTextSize,transportKey:x,ts:g,type_:t.type})}case o("MAWMsgType").MSG_TYPE.IMAGE:case o("MAWMsgType").MSG_TYPE.VIDEO:case o("MAWMsgType").MSG_TYPE.PTT:case o("MAWMsgType").MSG_TYPE.GIF:case o("MAWMsgType").MSG_TYPE.STICKER:case o("MAWMsgType").MSG_TYPE.RECEIVER_FETCH:case o("MAWMsgType").MSG_TYPE.RAVEN:case o("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:case o("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE:return babelHelpers.extends({},h,{_META_loaded_as_quoted_msg:a,ack:t.ack,applicationErrorCode:t.applicationErrorCode,chatJid:t.threadJid,ephemeralDurationInSec:(d=t.ephemeralSetting)==null?void 0:d.ephemeralExpirationInSec,externalId:D,forwardingScore:f,groupId:t.groupId,groupIndex:t.groupIndex,groupSize:t.groupSize,isAdminMessage:!1,isAuthorMe:t.author===o("WAJids").AUTHOR_ME,isExpiredMsg:I,isForwarded:_,msgId:t.msgId,replyContent:y,replyPlaintextHash:$,sender:o("WAJids").authorToUserId(t.author,p),sortOrderMs:T,transportKey:x,ts:g,type_:t.type});case o("MAWMsgType").MSG_TYPE.FUTUREPROOF:return babelHelpers.extends({},h,{_META_loaded_as_quoted_msg:a,ack:t.ack,chatJid:t.threadJid,externalId:D,forwardingScore:f,isAdminMessage:!1,isAuthorMe:t.author===o("WAJids").AUTHOR_ME,isExpiredMsg:I,isForwarded:_,msgId:t.msgId,replyContent:y,replyPlaintextHash:$,sender:o("WAJids").authorToUserId(t.author,p),sortOrderMs:T,transportKey:x,ts:g,type_:t.type,unsupportedType:t.msgContent.subtype});case o("MAWMsgType").MSG_TYPE.CIPHERTEXT:return{_META_loaded_as_quoted_msg:a,ack:t.ack,chatJid:t.threadJid,externalId:D,forwardingScore:f,isAdminMessage:!1,isAuthorMe:t.author===o("WAJids").AUTHOR_ME,isExpiredMsg:I,isForwarded:_,msgId:t.msgId,sender:o("WAJids").authorToUserId(t.author,p),sortOrderMs:T,transportKey:x,ts:g,type_:t.type};case o("MAWMsgType").MSG_TYPE.UNAVAILABLE:case o("MAWMsgType").MSG_TYPE.EXPIRED_EPHEMERAL:return babelHelpers.extends({},h,{_META_loaded_as_quoted_msg:a,ack:t.ack,chatJid:t.threadJid,externalId:D,forwardingScore:f,isAdminMessage:!1,isAuthorMe:t.author===o("WAJids").AUTHOR_ME,isExpiredMsg:I,isForwarded:_,msgId:t.msgId,replyContent:y,replyPlaintextHash:$,sender:o("WAJids").authorToUserId(t.author,p),sortOrderMs:T,transportKey:x,ts:g,type_:t.type});case o("MAWMsgType").MSG_TYPE.ICDC_ALERT:return{_META_loaded_as_quoted_msg:a,ack:t.ack,adminContent:[t.msgContent.authorName],adminType:t.msgContent.adminType,chatJid:t.threadJid,externalId:D,forwardingScore:f,isAdminMessage:!0,isAuthorMe:t.author===o("WAJids").AUTHOR_ME,isExpiredMsg:I,isForwarded:_,msgId:t.msgId,sender:o("WAJids").authorToUserId(t.author,p),sortOrderMs:T,transportKey:x,ts:g,type_:t.type};case o("MAWMsgType").MSG_TYPE.ADMIN:case o("MAWMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:case o("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:case o("MAWMsgType").MSG_TYPE.GROUP_POLL_CREATE:case o("MAWMsgType").MSG_TYPE.GROUP_POLL_UPDATE:{var M,w,A;return{_META_loaded_as_quoted_msg:a,ack:t.ack,adminContent:(M=t.msgContent)==null||(M=M.adminMsgContent)==null?void 0:M.map(function(e){return e==="Facebook User"?"0":e}),adminType:(w=t.msgContent)==null?void 0:w.adminType,adminVersion:(A=t.msgContent)==null?void 0:A.version,chatJid:t.threadJid,externalId:D,forwardingScore:f,isAdminMessage:!0,isAuthorMe:t.author===o("WAJids").AUTHOR_ME,isExpiredMsg:I,isForwarded:_,msgId:t.msgId,sender:o("WAJids").authorToUserId(t.author,p),sortOrderMs:T,transportKey:x,ts:g,type_:t.type}}case o("MAWMsgType").MSG_TYPE.REVOKED:return{_META_loaded_as_quoted_msg:a,ack:t.ack,chatJid:t.threadJid,externalId:D,forwardingScore:f,isAdminMessage:!1,isAuthorMe:t.author===o("WAJids").AUTHOR_ME,isExpiredMsg:I,isForwarded:_,msgId:t.msgId,originalTs:t.originalTs,sender:o("WAJids").authorToUserId(t.author,p),sortOrderMs:T,transportKey:x,ts:g,type_:t.type};case o("MAWMsgType").MSG_TYPE.XMA:{var F,O,B,W,q,U=(F=t.msgContent)==null?void 0:F.content,V=U!=null?o("MAWVault").isVaulted(U)?(O=t.msgContent)==null?void 0:O.content:o("MAWVault").vault(U):void 0;v&&V==null&&o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[MAWBridgeMsg] Missing content for external link share XMA message"])));var H=V;return babelHelpers.extends({},h,{_META_loaded_as_quoted_msg:a,ack:t.ack,applicationErrorCode:t.applicationErrorCode,chatJid:t.threadJid,commands:(B=t.msgContent)==null?void 0:B.commands,content:H,ephemeralDurationInSec:(W=t.ephemeralSetting)==null?void 0:W.ephemeralExpirationInSec,externalId:D,forwardingScore:f,isAdminMessage:!1,isAuthorMe:t.author===o("WAJids").AUTHOR_ME,isCollapsed:t.isCollapsed,isExpiredMsg:I,isExpiredXmaMsg:t.isExpiredXmaMsg,isFBPostMention:o("MAWXMAUtils").isFBXMAPostMention(t.xmaMessageType),isFBStoryMention:R,isForwarded:_,isIGStoryMention:S,isMsgHighlightsTabFriendUpdatesReply:k,isPostPrivateReply:E,isStoryHighlightShare:L,isStoryReaction:b,isStoryShare:C,mentionedJids:(q=t.msgContent)==null?void 0:q.mentionedJids,msgId:t.msgId,replyContent:y,replyPlaintextHash:$,sender:o("WAJids").authorToUserId(t.author,p),sortOrderMs:T,transportKey:x,ts:g,type_:t.type,xmaMessageType:t.xmaMessageType})}default:return r("WAAssertUnreachable")(t.type)}}l.getSpecialTextSize=d,l.convertDbMsgSourceToLSTransportKey=m,l.createBridgeMsg=p}),98);
__d("MAWMessageRequestUtil",["I64","LSContactBitOffset","LSContactViewerRelationship","LSIntEnum","LSMessagingThreadTypeUtil","MWFBLogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t,n,a){if(t==="pending"||t==="other")return o("MWFBLogger").MWLogger().debug("isMessagerRequestV2 returns true: folderName is "+t+", contactViewerRelationship is "+(e||(e=o("I64"))).to_string(a.contactViewerRelationship)),!0;var i=o("LSContactBitOffset").hasWithDefault(64,a,!0);return t==="inbox"&&(e||(e=o("I64"))).equal(a.contactViewerRelationship,(s||(s=o("LSIntEnum"))).ofNumber(r("LSContactViewerRelationship").NOT_CONTACT))&&!i?(n&&o("MWFBLogger").MWLogger().debug("isMessagerRequestV2 returns true: folderName is inbox, contactViewerRelationship is "+(e||(e=o("I64"))).to_string(a.contactViewerRelationship)+", isViewerUnconnected is false, hasActivity is true"),n):!1}function c(e){return e==="pending"||e==="other"}function d(e){return o("LSMessagingThreadTypeUtil").isOneToOne(e.threadType)?c(e.folderName):!1}function m(t,n){return n!=null?u(t.folderName,(e||(e=o("I64"))).gt(t.lastActivityTimestampMs,e.zero),n[1]):!1}function p(e,t){return o("LSMessagingThreadTypeUtil").isOneToOne(e.threadType)?m(e,t):!1}function _(e){return o("LSMessagingThreadTypeUtil").isGroup(e.threadType)?c(e.folderName):!1}var f=[8,18,19,34,24,25,122],g=[21,48];l.isMessageRequestV2=u,l.isOneOnOneMessageRequest=d,l.isOneOnOneMessageRequestV2=p,l.isGroupMessageRequest=_,l.disabledThreadCapabilitiesForIncomingRequest=f,l.enabledThreadCapabilitiesForIncomingRequest=g}),98);
__d("clearedMAWMnRestrictCapabilities",[],(function(t,n,r,o,a,i){"use strict";var e=[0,31,35,55,56,58,24,25,35,19],l=e;i.default=l}),66);
__d("MAWUpdateLSThreadCapabilities",["fbt","I64","LSBitOffset","LSContactBitOffset","LSContactBlockedByViewerStatus","LSIntEnum","LSMessagingThreadTypeUtil","LSThreadBitOffset","MAWBlockUtils","MAWCurrentUser","MAWMessageRequestUtil","Promise","ReQL","asyncToGeneratorRuntime","clearedMAWMnRestrictCapabilities","emptyFunction"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d=o("MAWCurrentUser").getID(),m=(c||(c=o("I64"))).of_string(d);function p(t,a){return o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.threads).getKeyRange(a)).then(function(r){if(r==null)return(e||(e=n("Promise"))).resolve();var a=o("LSBitOffset").set((u||(u=o("LSIntEnum"))).ofNumber(27),r.capabilities),i=babelHelpers.extends({},r,{capabilities:a});return t.threads.put(i)}).then(r("emptyFunction"))}function _(t,a){return o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.threads).getKeyRange(a)).then(function(r){if(r==null)return(e||(e=n("Promise"))).resolve();var a=o("LSBitOffset").clear((u||(u=o("LSIntEnum"))).ofNumber(27),r.capabilities),i=babelHelpers.extends({},r,{capabilities:a});return t.threads.put(i)}).then(r("emptyFunction"))}function f(t,a){return o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.threads).getKeyRange(a)).then(function(r){if(r==null)return(e||(e=n("Promise"))).resolve([void 0,void 0]);var i=o("ReQL").firstAsync(o("LSMessagingThreadTypeUtil").isOneToOne(r.threadType)?o("ReQL").mergeJoin(o("ReQL").fromTableAscending(t.participants).getKeyRange(a),o("ReQL").fromTableAscending(t.contacts)).filter(function(e){var t=e[1];return!(c||(c=o("I64"))).equal(t.id,m)}).map(function(e){var t=e[1];return t}):o("ReQL").empty());return(e||(e=n("Promise"))).all([e.resolve(r),i])}).then(function(a){var i=a[0];if(i==null)return(e||(e=n("Promise"))).resolve();var l=a[1];if(l==null)return(e||(e=n("Promise"))).resolve();var s=(c||(c=o("I64"))).equal(l.blockedByViewerStatus,(u||(u=o("LSIntEnum"))).ofNumber(r("LSContactBlockedByViewerStatus").MESSAGE_BLOCKED)),d=c.equal(l.blockedByViewerStatus,u.ofNumber(r("LSContactBlockedByViewerStatus").FULLY_BLOCKED)),m=o("LSContactBitOffset").has(66,l),p=d?o("LSThreadBitOffset").clear(o("MAWBlockUtils").clearedFbBlockCapabilities,i.capabilities,i.capabilities2,i.capabilities3,i.capabilities4,i.capabilities5):s?o("LSThreadBitOffset").clear(o("MAWBlockUtils").clearedMnBlockCapabilities,i.capabilities,i.capabilities2,i.capabilities3,i.capabilities4,i.capabilities5):m?o("LSThreadBitOffset").clear(r("clearedMAWMnRestrictCapabilities"),i.capabilities,i.capabilities2,i.capabilities3,i.capabilities4,i.capabilities5):[i.capabilities,i.capabilities2,i.capabilities3,i.capabilities4,i.capabilities5],_=p[0],f=p[1],g=p[2],h=p[3],y=p[4];return t.threads.put(babelHelpers.extends({},i,{capabilities:_,capabilities2:f,capabilities3:g,capabilities4:h,capabilities5:y})).then(r("emptyFunction"))})}function g(e,t){return h.apply(this,arguments)}function h(){return h=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,r){var a=t.threads,i=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(a).getKeyRange(r));if(i==null)return(e||(e=n("Promise"))).resolve();var l=o("LSThreadBitOffset").set.apply(o("LSThreadBitOffset"),[o("MAWMessageRequestUtil").disabledThreadCapabilitiesForIncomingRequest].concat(o("LSThreadBitOffset").clear(o("MAWMessageRequestUtil").enabledThreadCapabilitiesForIncomingRequest,i.capabilities,i.capabilities2,i.capabilities3,i.capabilities4,i.capabilities5))),s=l[0],u=l[1],c=l[2],d=l[3],m=l[4];yield a.put(babelHelpers.extends({},i,{additionalThreadContext:void 0,capabilities:s,capabilities2:u,capabilities3:c,capabilities4:d,capabilities5:m}))}),h.apply(this,arguments)}function y(e,t,n){return C.apply(this,arguments)}function C(){return C=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var r=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.threads).getKeyRange(t));if(r!=null){var a=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.contacts,["name"]).getKeyRange(n));if(a!=null){var i=s._(/*BTDS*/"{Inviter Name} invited you to join",[s._param("Inviter Name",a.name)]).toString(),l=o("LSThreadBitOffset").set([105],r.capabilities,r.capabilities2,r.capabilities3,r.capabilities4,r.capabilities5),u=l[0],c=l[1],d=l[2],m=l[3],p=l[4];yield e.threads.put(babelHelpers.extends({},r,{capabilities:u,capabilities2:c,capabilities3:d,capabilities4:m,capabilities5:p,snippet:i}))}}}),C.apply(this,arguments)}function b(e,t){return v.apply(this,arguments)}function v(){return v=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var r=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.threads).getKeyRange(t));if(r!=null){var a=yield o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(e.group_invites).getKeyRange(t)),i=o("LSThreadBitOffset").clear([105],r.capabilities,r.capabilities2,r.capabilities3,r.capabilities4,r.capabilities5),l=i[0],s=i[1],u=i[2],c=i[3],d=i[4];yield e.threads.put(babelHelpers.extends({},r,{capabilities:l,capabilities2:s,capabilities3:u,capabilities4:c,capabilities5:d,snippet:void 0})),yield a.map((function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){yield e.group_invites.delete(t.threadKey,t.inviterId,t.inviteeId)});return function(e){return t.apply(this,arguments)}})())}}),v.apply(this,arguments)}l.enableAddMembersTxn=p,l.disableAddMembersTxn=_,l.disableBlockerCapabilitiesTxn=f,l.updateNonMessageRequestThreadTxn=g,l.setGroupInviteTxn=y,l.clearGroupInviteTxn=b}),226);
__d("uniqueArray",[],(function(t,n,r,o,a,i){"use strict";function e(e){return e}function l(t,n){var r=n!=null?n:e,o=[],a=new Set;return t.forEach(function(e){var t=r(e);a.has(t)||(a.add(t),o.push(e))}),o}i.default=l}),66);
__d("MAWBridgeParticipantsUpdatedHandler",["fbt","I64","LSAuthorityLevel","LSContactBlockedByViewerStatus","LSContactGender","LSContactIdType","LSContactType","LSContactViewerRelationship","LSContactWorkForeignEntityType","LSFactory","LSGroupParticipantJoinState","LSIntEnum","LSVerifyContactRowExistsStoredProcedure","MAWCurrentUser","MAWJids","MAWMiActMappingTableAPI","MAWUpdateLSThreadCapabilities","Promise","asyncToGeneratorRuntime","uniqueArray"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d=o("MAWCurrentUser").getID(),m=(c||(c=o("I64"))).of_string(d);function p(e,t){var n=t.map(function(e){var t=e.chatJid,n=e.type,r=e.userJid;return babelHelpers.extends({chatJid:t},E(n),{userJid:r})});return f(e,n)}function _(e,t){var n=t.participants.map(function(e){return{chatJid:e.threadJid,isAdmin:e.isAdmin,isInvited:e.isInvited,isSuperAdmin:e.isSuperAdmin,userJid:o("MAWJids").toUserJid(e.fbid)}});return f(e,n)}function f(e,t){return g.apply(this,arguments)}function g(){return g=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,r){var a=yield C(t,r);yield(e||(e=n("Promise"))).all(a.map(function(r){var a=r.mawParticipant,i=r.threadKey,l=o("MAWJids").convertChatJidToIntJid(a.userJid);return[t.participants.get(i,l).then(function(r){var o=R(r,a,i);return r!=null?t.participants.put(o):(e||(e=n("Promise"))).all([t.participants.add(o),h(t,l)])}),v(t,l,i,a.isAdmin)]}).flat(1/0))}),g.apply(this,arguments)}function h(e,t){return y.apply(this,arguments)}function y(){return y=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){yield r("LSVerifyContactRowExistsStoredProcedure")(r("LSFactory")(e),{authorityLevel:(u||(u=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").OPTIMISTIC),blockedByViewerStatus:u.ofNumber(r("LSContactBlockedByViewerStatus").UNBLOCKED),contactIdType:u.ofNumber(r("LSContactIdType").FBID),contactType:u.ofNumber(r("LSContactType").USER),contactViewerRelationship:u.ofNumber(r("LSContactViewerRelationship").UNKNOWN),gender:u.ofNumber(r("LSContactGender").UNKNOWN),id:t,isBlocked:!1,isMemorialized:!1,isSelf:d===(c||(c=o("I64"))).to_string(t),workForeignEntityType:u.ofNumber(r("LSContactWorkForeignEntityType").UNKNOWN)})}),y.apply(this,arguments)}function C(e,t){return b.apply(this,arguments)}function b(){return b=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,a){var i=r("uniqueArray")(a.map(function(e){return e.chatJid})),l=new Map;return yield(e||(e=n("Promise"))).all(i.map(function(e){return o("MAWMiActMappingTableAPI").getThreadKeyForChatJid(t,e).then(function(t){return t!=null&&l.set(e,t)})})),a.map(function(e){var t=l.get(e.chatJid);return t==null?null:{mawParticipant:e,threadKey:t}}).filter(Boolean)}),b.apply(this,arguments)}function v(e,t,n,r){return S.apply(this,arguments)}function S(){return S=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,r){yield o("MAWUpdateLSThreadCapabilities").disableBlockerCapabilitiesTxn(e,n),(c||(c=o("I64"))).equal(m,t)&&(r?yield o("MAWUpdateLSThreadCapabilities").enableAddMembersTxn(e,n):yield o("MAWUpdateLSThreadCapabilities").disableAddMembersTxn(e,n))}),S.apply(this,arguments)}function R(e,t,n){return e==null?babelHelpers.extends({},L(t),{authorityLevel:(c||(c=o("I64"))).zero,contactId:o("MAWJids").convertChatJidToIntJid(t.userJid),deliveredWatermarkTimestampMs:c.zero,isSuperAdmin:t.isSuperAdmin,nickname:void 0,normalizedSearchTerms:void 0,participantCapabilities:void 0,readActionTimestampMs:c.zero,readWatermarkTimestampMs:c.zero,threadKey:n,threadRoles:c.zero}):babelHelpers.extends({},e,L(t))}function L(e){return{groupParticipantJoinState:e.isInvited?(u||(u=o("LSIntEnum"))).ofNumber(r("LSGroupParticipantJoinState").INVITED):(u||(u=o("LSIntEnum"))).ofNumber(r("LSGroupParticipantJoinState").MEMBER),isAdmin:e.isAdmin,isModerator:!1,subscribeSource:e.isSuperAdmin?s._(/*BTDS*/"Group creator").toString():void 0}}function E(e){return{isAdmin:e==="superadmin"||e==="admin",isInvited:e==="invitedParticipant",isSuperAdmin:e==="superadmin"}}l.callFromMainThread=p,l.call=_,l.mawToLsParticipantTypeConversion=E}),226);
__d("MAWBridgeUIEventDataValidation",["FBLogger","I64","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){try{return(e||(e=o("I64"))).of_string(t)}catch(e){var n=r("getErrorSafe")(e);r("FBLogger")("messenger_web").catching(n).mustfix("Cannot convert string to i64: %s",t)}}l.stringToI64Opt=s}),98);
__d("MAWConvertExtendedContentTypeToLSXmaContentType",["LSXmaContentType","WAArmadilloXMA.pb"],(function(t,n,r,o,a,i,l){"use strict";function e(e){if(e==null)return null;switch(e){case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_SHARE:return r("LSXmaContentType").FB_FEED_SHARE;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_REPLY:return r("LSXmaContentType").FB_STORY_REPLY;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_SHARE:return r("LSXmaContentType").FB_STORY_SHARE;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_MENTION:return r("LSXmaContentType").FB_STORY_MENTION;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_VIDEO_SHARE:return r("LSXmaContentType").FB_FEED_VIDEO_SHARE;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_GAMING_CUSTOM_UPDATE:return r("LSXmaContentType").FB_GAMING_CUSTOM_UPDATE;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_PRODUCER_STORY_REPLY:return r("LSXmaContentType").FB_PRODUCER_STORY_REPLY;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_EVENT:return r("LSXmaContentType").FB_EVENT;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_POST_PRIVATE_REPLY:return r("LSXmaContentType").FB_FEED_POST_PRIVATE_REPLY;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_HIGHLIGHTS_TAB_FRIEND_UPDATES_REPLY:return r("LSXmaContentType").MSG_HIGHLIGHTS_TAB_FRIEND_UPDATES_REPLY;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_SHORT:return r("LSXmaContentType").FB_SHORT;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING:return r("LSXmaContentType").MSG_LOCATION_SHARING;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING_V2:return r("LSXmaContentType").MSG_LOCATION_SHARING_V2;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_POST_MENTION:return r("LSXmaContentType").FB_POST_MENTION;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_POST_REACTION_REPLY:return r("LSXmaContentType").FB_FEED_POST_REACTION_REPLY;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_CONTACT:return r("LSXmaContentType").MSG_CONTACT;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_AI_CONTACT:return r("LSXmaContentType").MSG_AI_CONTACT;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_MEMORIES_SHARE:return r("LSXmaContentType").MSG_MEMORIES_SHARE;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_EXTERNAL_LINK_SHARE:return r("LSXmaContentType").MSG_EXTERNAL_LINK_SHARE;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_AUDIO_CALL:return r("LSXmaContentType").RTC_AUDIO_CALL;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_VIDEO_CALL:return r("LSXmaContentType").RTC_VIDEO_CALL;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_AUDIO_CALL:return r("LSXmaContentType").RTC_MISSED_AUDIO_CALL;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_VIDEO_CALL:return r("LSXmaContentType").RTC_MISSED_VIDEO_CALL;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_PROFILE_DIRECTORY_ITEM:return r("LSXmaContentType").FB_PROFILE_DIRECTORY_ITEM;default:return null}}l.convertExtendedContentTypeToLSXmaContentType=e}),98);
__d("MAWBridgeXMAUtils",["I64","LSIntEnum","MAWBridgeUIEventDataValidation","MAWConvertExtendedContentTypeToLSXmaContentType","MAWMpsGating","MAWXMAUtils","MNLSXMALayoutType","MNXMAPreviewImageDecorationType","MWPBumpEntityKey","MessagingAttachmentType","Promise","Random","ReQL","WAArmadilloXMA.pb","WAJids","asyncToGeneratorRuntime","vulture"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(e,t,n,r,o,a){return d.apply(this,arguments)}function d(){return d=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,r,a,i,l,s){var c=r.ctas,d=r.defaultCTA,m=p(r.targetId,r.targetType),f=(u||(u=o("I64"))).of_int32(o("Random").uint32());if(d!=null){var C=g(d,f,i,a,l,m,r.targetType);yield y(t,C,f,s.defaultCta)}var b=o("MAWXMAUtils").isFBXMAPostMention(r.targetType)&&r.author===o("WAJids").AUTHOR_ME,v=[];return c!=null&&!b&&(v=yield(e||(e=n("Promise"))).all(c.map(function(e,n){var r=_(f,n),o=h(e,r,i,a,l,m),u=n===0?s.attachmentCta1:n===1?s.attachmentCta2:n===2?s.attachmentCta3:void 0;return y(t,o,r,u)}))),{attachmentCta1Id:v.length>0?v[0]:void 0,attachmentCta2Id:v.length>1?v[1]:void 0,attachmentCta3Id:v.length>2?v[2]:void 0,defaultCtaId:d==null?void 0:f}}),d.apply(this,arguments)}function m(e){var t="xma_web_url";switch(e){case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_AUDIO_CALL:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_AUDIO_CALL:t="xma_rtc_audio";break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_VIDEO_CALL:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_VIDEO_CALL:t="xma_rtc_video";break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_AUDIO_CALL:t="xma_rtc_missed_audio";break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_VIDEO_CALL:t="xma_rtc_missed_video";break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SINGLE_IMAGE_POST_SHARE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_MULTIPOST_SHARE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_CLIPS_SHARE:t="igd_web_post_share";break}return t}function p(e,t){if(!o("MAWXMAUtils").isFBXMAPostMention(t))return e!=null?o("MAWBridgeUIEventDataValidation").stringToI64Opt(e):void 0}function _(e,t){return(u||(u=o("I64"))).add(e,u.of_int32(t+1))}function f(e,t,n,r,a,i,l){var s;l===void 0&&(l="xma_web_url");var c=e.actionUrl,d=e.nativeUrl;return{actionContentBlob:void 0,actionUrl:c!=null?c:d,attachmentFbid:a,attachmentIndex:(u||(u=o("I64"))).zero,ctaId:t,enableExtensions:!1,extensionHeightType:void 0,messageId:n,nativeUrl:d!=null?d:c,platformToken:void 0,targetId:i!=null?i:void 0,threadKey:r,title:(s=e.title)!=null?s:"Tap to view status update",type_:l!=null?l:"xma_web_url",urlWebviewType:void 0}}function g(e,t,n,r,o,a,i){var l=m(i);return f(e,t,n,r,o,a,l)}function h(e,t,n,r,o,a){var i;switch(e.ctaType){case"contact_sharing_profile":i="contact_sharing_profile";break;case"contact_sharing_message":i="contact_sharing_message";break}return f(e,t,n,r,o,a,i)}function y(e,t,n,r){return C.apply(this,arguments)}function C(){return C=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,r){return r!=null?yield e.attachment_ctas.upsert([r.ctaId],t):yield e.attachment_ctas.add(t),n}),C.apply(this,arguments)}function b(e,t,n){return v.apply(this,arguments)}function v(){return v=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var r=null,a={attachmentCta1:void 0,attachmentCta2:void 0,attachmentCta3:void 0,defaultCta:void 0};return r=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.attachments).getKeyRange(t,n)),r!=null&&(a.defaultCta=yield S(e,r.defaultCtaId),a.attachmentCta1=yield S(e,r.attachmentCta1Id),a.attachmentCta2=yield S(e,r.attachmentCta2Id),a.attachmentCta3=yield S(e,r.attachmentCta3Id)),[r,a]}),v.apply(this,arguments)}function S(t,r){return r==null?(e||(e=n("Promise"))).resolve(void 0):o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.attachment_ctas).getKeyRange(r))}function R(e,t,n,a,i,l,c,d,m){var p,_,f,g,h,y,C,b,v=(u||(u=o("I64"))).zero,S=L(e),R=o("MAWConvertExtendedContentTypeToLSXmaContentType").convertExtendedContentTypeToLSXmaContentType(e.targetType),D=R!=null?(u||(u=o("I64"))).of_int32(R):void 0,x=(p=e==null||(_=e.defaultCTA)==null?void 0:_.actionUrl)!=null?p:e==null||(f=e.defaultCTA)==null?void 0:f.nativeUrl;e.defaultPreviewMediaId!=null&&o("MWPBumpEntityKey").bumpEntityKeyWithAppId("maw.new_xma_handler","xma_preview_media_has_plaintext_hash."+m+"."+e.targetType+"."+(e.defaultPreviewMediaPlaintextHash!=null?"true":"false"));var $=o("MAWMpsGating").isMpsMessageRendering();return{accessibilitySummaryText:void 0,actionUrl:x!=null?x:void 0,attachmentCta1Id:i,attachmentCta2Id:l,attachmentCta3Id:c,attachmentFbid:n,attachmentIndex:u.zero,attachmentLoggingType:void 0,attachmentType:(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").XMA),attributionAppIcon:void 0,attributionAppIconFallback:void 0,attributionAppIconUrlExpirationTimestampMs:void 0,attributionAppId:void 0,attributionAppName:void 0,authorityLevel:u.zero,avatarCount:void 0,avatarViewAccessibilityLabel:void 0,avatarViewSize:void 0,avatarViewTitleList:void 0,avatarViewUrlExpirationTimestampList:void 0,avatarViewUrlFallbackList:void 0,avatarViewUrlList:void 0,captionBodyText:void 0,cta1Title:k(e.ctas,1),cta1Type:E(e.ctas,1),cta2Title:k(e.ctas,2),cta2Type:E(e.ctas,2),cta3Title:k(e.ctas,3),cta3Type:E(e.ctas,3),dashManifest:void 0,decryptionKey:void 0,defaultCtaId:d,defaultCtaTitle:(g=e.defaultCTA)==null?void 0:g.title,defaultCtaType:S.xmaContentType,descriptionText:void 0,ephemeralMediaState:void 0,faviconUrl:void 0,faviconUrlExpirationTimestampMs:void 0,faviconUrlFallback:void 0,filename:void 0,filesize:e.filesize!=null?(u||(u=o("I64"))).of_int32(e.filesize):void 0,gatingTitle:e.overlayTitle,gatingType:e.overlayIconGlyph!=null?String(e.overlayIconGlyph):void 0,hasMedia:e.hasMedia!=null?e.hasMedia:!1,hasXma:!0,hasXmaFavicon:$?e.faviconPlaintextHash!=null:e.faviconMediaId!=null,hasXmaHeaderImage:$?e.headerMediaPlaintextHash!=null:e.headerMediaId!=null,hasXmaPreview:$?e.defaultPreviewMediaPlaintextHash!=null:e.defaultPreviewMediaId!=null,headerImageUrl:void 0,headerImageUrlExpirationTimestampMs:void 0,headerImageUrlFallback:void 0,headerImageUrlMimeType:void 0,headerTitle:e.headerTitle,imageUrl:void 0,imageUrlExpirationTimestampMs:void 0,imageUrlFallback:void 0,imageUrlMimeType:void 0,isBorderless:void 0,isPreviewImage:void 0,isSharable:!0,listItemAccessibilityText1:void 0,listItemAccessibilityText2:void 0,listItemAccessibilityText3:void 0,listItemContactUrlExpirationTimestampList1:void 0,listItemContactUrlExpirationTimestampList2:void 0,listItemContactUrlExpirationTimestampList3:void 0,listItemContactUrlFallbackList1:void 0,listItemContactUrlFallbackList2:void 0,listItemContactUrlFallbackList3:void 0,listItemContactUrlList1:void 0,listItemContactUrlList2:void 0,listItemContactUrlList3:void 0,listItemId1:void 0,listItemId2:void 0,listItemId3:void 0,listItemProfilePictureUrl1:void 0,listItemProfilePictureUrl2:void 0,listItemProfilePictureUrl3:void 0,listItemProfilePictureUrlExpirationTimestamp1:void 0,listItemProfilePictureUrlExpirationTimestamp2:void 0,listItemProfilePictureUrlExpirationTimestamp3:void 0,listItemProfilePictureUrlFallback1:void 0,listItemProfilePictureUrlFallback2:void 0,listItemProfilePictureUrlFallback3:void 0,listItemProgressBarFilledPercentage1:void 0,listItemProgressBarFilledPercentage2:void 0,listItemProgressBarFilledPercentage3:void 0,listItemsDescriptionSubtitleText:void 0,listItemsDescriptionText:void 0,listItemsId:void 0,listItemsSecondaryDescriptionText:void 0,listItemTitleText1:void 0,listItemTitleText2:void 0,listItemTitleText3:void 0,localPlayableUrl:void 0,maxSubtitleNumOfLines:e.maxSubtitleNumOfLines!=null?(u||(u=o("I64"))).of_int32(e.maxSubtitleNumOfLines):void 0,maxTitleNumOfLines:e.maxTitleNumOfLines!=null?(u||(u=o("I64"))).of_int32(e.maxTitleNumOfLines):void 0,messageId:a,miniPreview:void 0,offlineAttachmentId:(h=e.offlineAttachmentId)!=null?h:n,originalFileHash:void 0,originalPageSenderId:void 0,playableDurationMs:void 0,playableUrl:void 0,playableUrlExpirationTimestampMs:void 0,playableUrlFallback:void 0,playableUrlMimeType:void 0,preheaderText:void 0,previewHeight:S.height,previewHeightLarge:e.previewHeightLarge!=null?(u||(u=o("I64"))).of_int32(e.previewHeightLarge):void 0,previewImageDecorationType:T(e.targetType),previewUrl:void 0,previewUrlExpirationTimestampMs:void 0,previewUrlFallback:void 0,previewUrlLarge:void 0,previewUrlMimeType:void 0,previewWidth:S.width,previewWidthLarge:e.previewWidthLarge!=null?(u||(u=o("I64"))).of_int32(e.previewWidthLarge):void 0,samplingFrequencyHz:void 0,shouldAutoplayVideo:void 0,shouldHighlightHeaderTitleInTitle:void 0,shouldRespectServerPreviewSize:void 0,sourceText:void 0,subtitleIconUrl:void 0,subtitleText:e.subtitleText,targetId:void 0,threadKey:t,timestampMs:v,titleText:e.titleText,transportKey:"WhatsApp",viewerSeenTimestampMs:void 0,waveformData:void 0,xmaContentType:D,xmaDataclass:e.xmaDataclass,xmaFaviconFbid:$?e.faviconPlaintextHash:(y=e.faviconMediaId)==null?void 0:y.toString(),xmaHeaderImageFbid:$?e.headerMediaPlaintextHash:(C=e.headerMediaId)==null?void 0:C.toString(),xmaLayoutType:e.xmaLayoutType!=null?I(e.xmaLayoutType):void 0,xmaPreviewFbid:$?e.defaultPreviewMediaPlaintextHash:(b=e.defaultPreviewMediaId)==null?void 0:b.toString(),xmasTemplateType:e.xmaLayoutType!=null?I(e.xmaLayoutType):void 0}}function L(e){r("vulture")("OC3_M6GxjAfYHPTwFl7hqEFRl8Q=");var t;switch(e.targetType){case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_SHARE:t={height:(u||(u=o("I64"))).of_int32(108),width:(u||(u=o("I64"))).of_int32(72),xmaContentType:"xma_montage_share"};break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_AUDIO_CALL:t={xmaContentType:"xma_rtc_audio"};break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_VIDEO_CALL:t={xmaContentType:"xma_rtc_video"};break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_AUDIO_CALL:t={xmaContentType:"xma_rtc_missed_audio"};break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_VIDEO_CALL:t={xmaContentType:"xma_rtc_missed_video"};break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_AUDIO_CALL:t={xmaContentType:"xma_rtc_missed_group_audio"};break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_VIDEO_CALL:t={xmaContentType:"xma_rtc_missed_group_video"};break;default:t={height:e.previewHeight!=null?(u||(u=o("I64"))).of_int32(e.previewHeight):void 0,width:e.previewWidth!=null?(u||(u=o("I64"))).of_int32(e.previewWidth):void 0,xmaContentType:"xma_web_url"};break}return t}function E(e,t){if(e!=null){var n=e[t-1];if(n!=null){var r=n.buttonType,a=n.ctaType;switch(a){case"contact_sharing_profile":return"contact_sharing_profile";case"contact_sharing_message":return"contact_sharing_message";default:return r===o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SINGLE_VIDEO_POST_SHARE?"xma_open_native":void 0}}}}function k(e,t){if(e!=null){var n=e[t-1];if(n!=null)return n.title}}function I(e){return e===0||e!==3?(s||(s=o("LSIntEnum"))).ofNumber(r("MNLSXMALayoutType").SINGLE):(s||(s=o("LSIntEnum"))).ofNumber(r("MNLSXMALayoutType").PORTRAIT)}function T(e){switch(e){case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_MULTIPOST_SHARE:return(s||(s=o("LSIntEnum"))).ofNumber(r("MNXMAPreviewImageDecorationType").COLLAGE);case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_CLIPS_SHARE:return(s||(s=o("LSIntEnum"))).ofNumber(r("MNXMAPreviewImageDecorationType").REEL);case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_MENTION:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_SHARE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_SHARE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_HIGHLIGHT_SHARE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_HIGHLIGHT_SHARE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_REPLY:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_REACTION:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_MENTION:return(s||(s=o("LSIntEnum"))).ofNumber(r("MNXMAPreviewImageDecorationType").INSTAGRAM_ICON);default:return(s||(s=o("LSIntEnum"))).ofNumber(r("MNXMAPreviewImageDecorationType").DEFAULT)}}l.addAttachmentCtas=c,l.maybeBridgeToLSTargetId=p,l.getCtaIdFromDefaultCtaId=_,l.composeDefaultAttachmentCta=g,l.composeAttachmentCta=h,l.getExistingAttachmentAndAttachmentCtas=b,l.composeAttachmentXMA=R}),98);
__d("MAWBridgeXMA",["MAWBridgeXMAUtils","MAWDbMedia","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e){if(e!=null)switch(e){case"Image":case"Sticker":return"image/png";case"Gif":return"image/gif";case"Video":return"video/mp4";case"Ptt":return"audio/wav"}}function u(t,n,r){var a,i,l,u,c=n.author,d=n.contentRef,m=n.ctas,p=n.defaultCTA,_=n.defaultPreviewMediaId,f=n.defaultPreviewMediaPlaintextHash,g=n.faviconMediaId,h=n.faviconPlaintextHash,y=n.headerMediaId,C=n.headerMediaPlaintextHash,b=n.headerTitle,v=n.maxSubtitleNumOfLines,S=n.maxTitleNumOfLines,R=n.msgId,L=n.offlineAttachmentId,E=n.overlayIconGlyph,k=n.overlayTitle,I=n.subtitleText,T=n.targetId,D=n.targetType,x=n.targetUsername,$=n.threadJid,P=n.titleText,N=n.xmaDataclass,M=n.xmaId,w=n.xmaLayoutType;t!=null&&t.mediaType!==o("MAWDbMedia").MEDIA_TYPE.IMAGE&&o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["MAWBridge - createBridgeXMA received unexpected media type - ",""])),t.mediaType),T!=null&&o("MAWBridgeXMAUtils").maybeBridgeToLSTargetId(T,D);var A=r.hasMedia,F=r.hasXmaFaviconMedia,O=r.hasXmaHeaderMedia;return{author:c,contentRef:d,ctas:m==null?void 0:m.filter(function(e){return e.ctaType!=null}),defaultCTA:p,defaultPreviewMediaId:_,defaultPreviewMediaPlaintextHash:f,duration:null,faviconMediaId:g,faviconPlaintextHash:h,filesize:t==null?void 0:t.size,hasMedia:A,hasXmaFaviconMedia:F,hasXmaHeaderMedia:O,headerMediaId:y,headerMediaPlaintextHash:C,headerTitle:b,maxSubtitleNumOfLines:v,maxTitleNumOfLines:S,mediaType:t==null?void 0:t.mediaType,msgId:R,offlineAttachmentId:L,overlayIconGlyph:E,overlayTitle:k,playableUrlMimeType:s(t==null?void 0:t.mediaType),previewHeight:t==null||(a=t.validatedImageInfo)==null?void 0:a.jpegThumbnailHeight,previewHeightLarge:t==null||(i=t.validatedImageInfo)==null?void 0:i.height,previewUrlMimeType:s(t==null?void 0:t.mediaType),previewWidth:t==null||(l=t.validatedImageInfo)==null?void 0:l.jpegThumbnailWidth,previewWidthLarge:t==null||(u=t.validatedImageInfo)==null?void 0:u.width,subtitleText:I,targetId:T,targetType:D,targetUsername:x,threadJid:$,titleText:P,ts:t==null?void 0:t.ts,xmaDataclass:N,xmaId:M,xmaLayoutType:w}}function c(e,t){var n=e.msgId,r=e.threadJid;return{msgId:n,threadJid:r,xmaId:t}}function d(e,t){var n=e.msgId,r=e.threadJid;return{msgId:n,threadJid:r,xmaId:t}}l.mediaTypeToMimeType=s,l.createBridgeXMA=u,l.createBridgeXMAShareExpired=c,l.createBridgeXMAShareTombstoned=d}),98);
__d("MAWDbEditMsgHistory",["I64"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e){return e}function u(t){return(e||(e=o("I64"))).of_float(t)}function c(t){return(e||(e=o("I64"))).to_float(t)}l.unsafeCoerceToEditMsgHistoryId=s,l.convertToEditMsgHistoryId64=u,l.convertToEditMsgHistoryId=c}),98);
__d("MAWEBRestoreTrackingUtils",["LSIntEnum","LSMEBTaskCreationSource","MAWQplProxy","MWEBODSEntityName.enum","ODS","QPLUserFlow","WAHashStringToNumber","justknobx","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u={dyi:r("justknobx")._("467"),frontloaded:20,initial:20,paginated:r("justknobx")._("3177"),point:1,search:r("justknobx")._("2477")};function c(t,n,a,i){n!=null&&C({querySource:a,runningInWorker:i!=null?i:!1,taskSource:t,traceId:n,triggerType:"paginated"}),(e||(e=o("ODS"))).bumpEntityKey(7319,r("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.request.paginated")}function d(t){var n=t.querySource,a=t.runningInWorker,i=t.taskSource,l=t.traceId;l!=null&&C({querySource:n,runningInWorker:a!=null?a:!1,taskSource:i,traceId:l,triggerType:"initial"}),(e||(e=o("ODS"))).bumpEntityKey(7319,r("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.request.initial")}function m(t,n,a){n!=null&&C({querySource:"LS",runningInWorker:a!=null?a:!1,taskSource:t,traceId:n,triggerType:"dyi"}),(e||(e=o("ODS"))).bumpEntityKey(7319,r("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.request.dyi")}function p(t,n,a){n!=null&&C({querySource:"LS",runningInWorker:a!=null?a:!1,taskSource:t,traceId:n,triggerType:"frontloaded"}),(e||(e=o("ODS"))).bumpEntityKey(7319,r("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.request.frontloaded")}function _(t,n,a,i){n!=null&&C({querySource:a,runningInWorker:i!=null?i:!1,taskSource:t,traceId:n,triggerType:"point"}),(e||(e=o("ODS"))).bumpEntityKey(7319,r("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.request.point")}function f(t){var n=t.querySource,a=t.runningInWorker,i=t.traceId;i!=null&&C({querySource:n,runningInWorker:a!=null?a:!1,taskSource:r("LSMEBTaskCreationSource").FTS_INDEX_EB_MESSAGES_WEB,traceId:i,triggerType:"search"}),(e||(e=o("ODS"))).bumpEntityKey(7319,r("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.request.search")}function g(t,n){t!=null&&(n!=null&&n?o("MAWQplProxy").sendQPLSuccessThroughBridge(r("qpl")._(521476165,"2432"),void 0,o("WAHashStringToNumber").hashStringToNumber(t)):r("QPLUserFlow").endSuccess(r("qpl")._(521476165,"2432"),{instanceKey:o("WAHashStringToNumber").hashStringToNumber(t)})),(e||(e=o("ODS"))).bumpEntityKey(7319,r("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.decryption.success")}function h(t,n,a,i){a===void 0&&(a="restore_failure"),t!=null&&(n!=null&&n?o("MAWQplProxy").sendQPLFailThroughBridge(r("qpl")._(521476165,"2432"),a,i,o("WAHashStringToNumber").hashStringToNumber(t)):r("QPLUserFlow").endFailure(r("qpl")._(521476165,"2432"),a,{annotations:i,instanceKey:o("WAHashStringToNumber").hashStringToNumber(t)})),(e||(e=o("ODS"))).bumpEntityKey(7319,r("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.decryption.failure")}function y(e){L("protobuf",e)}function C(e){var t=e.querySource,n=e.runningInWorker,a=e.taskSource,i=e.traceId,l=e.triggerType;if(n!=null&&n){var s;o("MAWQplProxy").startQplUserFlow(r("qpl")._(521476165,"2432"),{bool:{runningInWorker:n===!0},int:{requestedMessagesCount:(s=u[l])!=null?s:10},string:{querySource:t,taskSource:E(a),traceId:i,triggerType:l}},{providedInstanceKey:o("WAHashStringToNumber").hashStringToNumber(i),providedTimeoutInMs:r("justknobx")._("2950")})}else{var c;r("QPLUserFlow").start(r("qpl")._(521476165,"2432"),{annotations:{bool:{runningInWorker:!1},int:{requestedMessagesCount:(c=u[l])!=null?c:10},string:{querySource:t,taskSource:E(a),traceId:i,triggerType:l}},instanceKey:o("WAHashStringToNumber").hashStringToNumber(i),timeoutInMs:r("justknobx")._("2950")})}}function b(e){var t=e.pointName,n=e.traceId;r("QPLUserFlow").addPoint(r("qpl")._(521476165,"2432"),t,{instanceKey:o("WAHashStringToNumber").hashStringToNumber(n)})}function v(e){var t=e.annotations,n=e.pointName,a=e.traceId;r("QPLUserFlow").addAnnotations(r("qpl")._(521476165,"2432"),t,{instanceKey:o("WAHashStringToNumber").hashStringToNumber(a)}),r("QPLUserFlow").addPoint(r("qpl")._(521476165,"2432"),n,{instanceKey:o("WAHashStringToNumber").hashStringToNumber(a)})}function S(e){var t=e.annotations,n=e.pointName,a=e.traceId;a!=null&&o("MAWQplProxy").sendQplPointThroughBridge(r("qpl")._(521476165,"2432"),n,{annotations:t,instanceKey:o("WAHashStringToNumber").hashStringToNumber(a)})}function R(e){var t=e.pointName,n=e.traceId;o("MAWQplProxy").sendQplPointThroughBridge(r("qpl")._(521476165,"2432"),t,{instanceKey:o("WAHashStringToNumber").hashStringToNumber(n)})}function L(t,n){var a=n?(s||(s=o("LSIntEnum"))).unwrapIntEnum(n):null;(e||(e=o("ODS"))).bumpEntityKey(7319,r("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore."+t+"."+E(a))}function E(e){var t;return(t=e==null?void 0:e.toString())!=null?t:"unknown"}l.markEBRestorePaginated=c,l.markEBRestoreInitial=d,l.markEBRestoreDYI=m,l.markEBRestoreFrontloaded=p,l.markEBRestorePoint=_,l.markEBRestoreSearch=f,l.markEBRestoreSuccess=g,l.markEBRestoreFail=h,l.markEBRestoreProtobuf=y,l.addQPLRestorePoint=b,l.addQPLRestorePointWithAnnotations=v,l.addQPLRestorePointWithAnnotationsWorker=S,l.addQPLRestorePointWorker=R}),98);
__d("WAMediaTransport.pb",["WACommon.pb","WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={NONE:0,LQ_4K:1,HQ_4K:2},u={NONE:0,GIPHY:1,TENOR:2},c={TALKING_A:0,IDLE_A:1,TALKING_B:2,IDLE_B:3,BACKGROUND:4},d={UNKNOWN:0,OPUS:1},m={},p={},_={},f={},g={},h={},y={},C={},b={},v={},S={},R={},L={},E={},k={},I={},T={},D={},x={},$={},P={},N={},M={},w={},A={};m.name="WAMediaTransport",m.internalSpec={integral:[1,(e=o("WAProtoConst")).TYPES.MESSAGE,g],ancillary:[2,e.TYPES.MESSAGE,p]},p.name="WAMediaTransport$Ancillary",p.internalSpec={fileLength:[1,e.TYPES.UINT64],mimetype:[2,e.TYPES.STRING],thumbnail:[3,e.TYPES.MESSAGE,_],objectId:[4,e.TYPES.STRING]},_.name="WAMediaTransport$Ancillary$Thumbnail",_.internalSpec={jpegThumbnail:[1,e.TYPES.BYTES],downloadableThumbnail:[2,e.TYPES.MESSAGE,f],thumbnailWidth:[3,e.TYPES.UINT32],thumbnailHeight:[4,e.TYPES.UINT32]},f.name="WAMediaTransport$Ancillary$Thumbnail$DownloadableThumbnail",f.internalSpec={fileSha256:[1,e.TYPES.BYTES],fileEncSha256:[2,e.TYPES.BYTES],directPath:[3,e.TYPES.STRING],mediaKey:[4,e.TYPES.BYTES],mediaKeyTimestamp:[5,e.TYPES.INT64],objectId:[6,e.TYPES.STRING],thumbnailScansSidecar:[7,e.TYPES.BYTES],thumbnailScanLengths:[8,e.FLAGS.REPEATED|e.TYPES.UINT32]},g.name="WAMediaTransport$Integral",g.internalSpec={fileSha256:[1,e.TYPES.BYTES],mediaKey:[2,e.TYPES.BYTES],fileEncSha256:[3,e.TYPES.BYTES],directPath:[4,e.TYPES.STRING],mediaKeyTimestamp:[5,e.TYPES.INT64]},h.name="ImageTransport",h.internalSpec={integral:[1,e.TYPES.MESSAGE,C],ancillary:[2,e.TYPES.MESSAGE,y]},y.name="ImageTransport$Ancillary",y.internalSpec={height:[1,e.TYPES.UINT32],width:[2,e.TYPES.UINT32],scansSidecar:[3,e.TYPES.BYTES],scanLengths:[4,e.FLAGS.REPEATED|e.TYPES.UINT32],midQualityFileSha256:[5,e.TYPES.BYTES],hdType:[6,e.TYPES.ENUM,s],memoriesConceptScores:[7,e.FLAGS.REPEATED|e.FLAGS.PACKED|e.TYPES.FLOAT],memoriesConceptIds:[8,e.FLAGS.REPEATED|e.FLAGS.PACKED|e.TYPES.UINT32]},C.name="ImageTransport$Integral",C.internalSpec={transport:[1,e.TYPES.MESSAGE,m]},b.name="VideoTransport",b.internalSpec={integral:[1,e.TYPES.MESSAGE,S],ancillary:[2,e.TYPES.MESSAGE,v]},v.name="VideoTransport$Ancillary",v.internalSpec={seconds:[1,e.TYPES.UINT32],caption:[2,e.TYPES.MESSAGE,o("WACommon.pb").MessageTextSpec],gifPlayback:[3,e.TYPES.BOOL],height:[4,e.TYPES.UINT32],width:[5,e.TYPES.UINT32],sidecar:[6,e.TYPES.BYTES],gifAttribution:[7,e.TYPES.ENUM,u],accessibilityLabel:[8,e.TYPES.STRING],isHd:[9,e.TYPES.BOOL]},S.name="VideoTransport$Integral",S.internalSpec={transport:[1,e.TYPES.MESSAGE,m]},R.name="AudioTransport",R.internalSpec={integral:[1,e.TYPES.MESSAGE,I],ancillary:[2,e.TYPES.MESSAGE,L]},L.name="AudioTransport$Ancillary",L.internalSpec={seconds:[1,e.TYPES.UINT32],avatarAudio:[2,e.TYPES.MESSAGE,E],waveformData:[3,e.TYPES.STRING],waveform:[4,e.TYPES.BYTES]},E.name="AudioTransport$Ancillary$AvatarAudio",E.internalSpec={poseId:[1,e.TYPES.UINT32],avatarAnimations:[2,e.FLAGS.REPEATED|e.TYPES.MESSAGE,k]},k.name="AudioTransport$Ancillary$AvatarAudio$DownloadableAvatarAnimations",k.internalSpec={fileSha256:[1,e.TYPES.BYTES],fileEncSha256:[2,e.TYPES.BYTES],directPath:[3,e.TYPES.STRING],mediaKey:[4,e.TYPES.BYTES],mediaKeyTimestamp:[5,e.TYPES.INT64],objectId:[6,e.TYPES.STRING],animationsType:[7,e.TYPES.ENUM,c]},I.name="AudioTransport$Integral",I.internalSpec={transport:[1,e.TYPES.MESSAGE,m],audioFormat:[2,e.TYPES.ENUM,d]},T.name="DocumentTransport",T.internalSpec={integral:[1,e.TYPES.MESSAGE,x],ancillary:[2,e.TYPES.MESSAGE,D]},D.name="DocumentTransport$Ancillary",D.internalSpec={pageCount:[1,e.TYPES.UINT32]},x.name="DocumentTransport$Integral",x.internalSpec={transport:[1,e.TYPES.MESSAGE,m]},$.name="StickerTransport",$.internalSpec={integral:[1,e.TYPES.MESSAGE,N],ancillary:[2,e.TYPES.MESSAGE,P]},P.name="StickerTransport$Ancillary",P.internalSpec={pageCount:[1,e.TYPES.UINT32],height:[2,e.TYPES.UINT32],width:[3,e.TYPES.UINT32],firstFrameLength:[4,e.TYPES.UINT32],firstFrameSidecar:[5,e.TYPES.BYTES],mustacheText:[6,e.TYPES.STRING],isThirdParty:[7,e.TYPES.BOOL],receiverFetchId:[8,e.TYPES.STRING],accessibilityLabel:[9,e.TYPES.STRING]},N.name="StickerTransport$Integral",N.internalSpec={transport:[1,e.TYPES.MESSAGE,m],isAnimated:[2,e.TYPES.BOOL],receiverFetchId:[3,e.TYPES.STRING]},M.name="ContactTransport",M.internalSpec={integral:[1,e.TYPES.MESSAGE,A],ancillary:[2,e.TYPES.MESSAGE,w]},w.name="ContactTransport$Ancillary",w.internalSpec={displayName:[1,e.TYPES.STRING]},A.name="ContactTransport$Integral",A.internalSpec={vcard:[1,e.TYPES.STRING],downloadableVcard:[2,e.TYPES.MESSAGE,m],__oneofs__:{contact:["vcard","downloadableVcard"]}},l.IMAGE_TRANSPORT_ANCILLARY_HD_TYPE=s,l.VIDEO_TRANSPORT_ANCILLARY_ATTRIBUTION=u,l.AUDIO_TRANSPORT_ANCILLARY_AVATAR_AUDIO_ANIMATIONS_TYPE=c,l.AUDIO_TRANSPORT_INTEGRAL_AUDIO_FORMAT=d,l.WAMediaTransportSpec=m,l.WAMediaTransport$AncillarySpec=p,l.WAMediaTransport$Ancillary$ThumbnailSpec=_,l.WAMediaTransport$Ancillary$Thumbnail$DownloadableThumbnailSpec=f,l.WAMediaTransport$IntegralSpec=g,l.ImageTransportSpec=h,l.ImageTransport$AncillarySpec=y,l.ImageTransport$IntegralSpec=C,l.VideoTransportSpec=b,l.VideoTransport$AncillarySpec=v,l.VideoTransport$IntegralSpec=S,l.AudioTransportSpec=R,l.AudioTransport$AncillarySpec=L,l.AudioTransport$Ancillary$AvatarAudioSpec=E,l.AudioTransport$Ancillary$AvatarAudio$DownloadableAvatarAnimationsSpec=k,l.AudioTransport$IntegralSpec=I,l.DocumentTransportSpec=T,l.DocumentTransport$AncillarySpec=D,l.DocumentTransport$IntegralSpec=x,l.StickerTransportSpec=$,l.StickerTransport$AncillarySpec=P,l.StickerTransport$IntegralSpec=N,l.ContactTransportSpec=M,l.ContactTransport$AncillarySpec=w,l.ContactTransport$IntegralSpec=A}),98);
__d("WAMediaHdType",[],(function(t,n,r,o,a,i,l){"use strict";var e=0,s=1,u=2,c={HD_TYPE_NONE:e,HD_TYPE_LQ_4K:s,HD_TYPE_HQ_4K:u};l.HD_TYPE_NONE=e,l.HD_TYPE_LQ_4K=s,l.HD_TYPE_HQ_4K=u,l.HD_TYPE=c}),98);
__d("MAWEncodeMediaTransportProtocol",["MAWDbMedia","WAMediaHdType","WAMediaTransport.pb","encodeProtobuf","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e="image/jpeg",s="image/webp",u="video/mp4",c="audio/wav",d="audio/ogg",m="image/gif",p="application/octet-stream";function _(e){switch(e){case o("WAMediaHdType").HD_TYPE_NONE:return o("WAMediaTransport.pb").IMAGE_TRANSPORT_ANCILLARY_HD_TYPE.NONE;case o("WAMediaHdType").HD_TYPE_LQ_4K:return o("WAMediaTransport.pb").IMAGE_TRANSPORT_ANCILLARY_HD_TYPE.LQ_4K;case o("WAMediaHdType").HD_TYPE_HQ_4K:return o("WAMediaTransport.pb").IMAGE_TRANSPORT_ANCILLARY_HD_TYPE.HQ_4K;default:return}}function f(t,n,r){var a,i,l,s,u,c,d,m,p={ancillary:{hdType:_((a=r==null?void 0:r.hdType)!=null?a:(i=t.validatedImageInfo)==null?void 0:i.hdType),height:(l=t.validatedImageInfo)==null?void 0:l.height,scanLengths:((s=n.progressiveJpegDetails)==null?void 0:s.scanLengths)||[],scansSidecar:(u=n.progressiveJpegDetails)==null?void 0:u.sidecar,width:(c=t.validatedImageInfo)==null?void 0:c.width},integral:{transport:{ancillary:{fileLength:t.size,mimetype:e,objectId:n.objectId,thumbnail:{downloadableThumbnail:n.downloadableThumbnail,jpegThumbnail:void 0,thumbnailHeight:(d=t.validatedImageInfo)==null?void 0:d.jpegThumbnailHeight,thumbnailWidth:(m=t.validatedImageInfo)==null?void 0:m.jpegThumbnailWidth}},integral:{directPath:n.directPath,fileEncSha256:n.fileEncSha256,fileSha256:n.fileSha256,mediaKey:n.mediaKey,mediaKeyTimestamp:n.mediaKeyTimestamp}}}};return o("encodeProtobuf").encodeProtobuf(o("WAMediaTransport.pb").ImageTransportSpec,p).readBuffer()}function g(e,t,n){var r=f(e,t,n);return{payload:{content:{imageMessage:{caption:{mentionedJid:[]},image:{payload:r,version:1}}}}}}function h(e,t){var n,r,a,i,l={ancillary:{accessibilityLabel:e.accessibilitySummaryText,height:(n=e.validatedImageInfo)==null?void 0:n.height,width:(r=e.validatedImageInfo)==null?void 0:r.width},integral:{transport:{ancillary:{fileLength:e.size,mimetype:s,objectId:t.objectId,thumbnail:{thumbnailHeight:(a=e.validatedImageInfo)==null?void 0:a.jpegThumbnailHeight,thumbnailWidth:(i=e.validatedImageInfo)==null?void 0:i.jpegThumbnailWidth}},integral:{directPath:t.directPath,fileEncSha256:t.fileEncSha256,fileSha256:t.fileSha256,mediaKey:t.mediaKey,mediaKeyTimestamp:t.mediaKeyTimestamp}}}};return o("encodeProtobuf").encodeProtobuf(o("WAMediaTransport.pb").StickerTransportSpec,l).readBuffer()}function y(e,t){var n=h(e,t);return{payload:{content:{stickerMessage:{sticker:{payload:n,version:1}}}}}}function C(e,t){var n,r=e.mediaType===o("MAWDbMedia").MEDIA_TYPE.GIF,a=e.isVideoGif===!0,i=r?e.validatedImageInfo:e.validatedVideoInfo,l={ancillary:{accessibilityLabel:e.accessibilitySummaryText,gifPlayback:r||a,height:i==null?void 0:i.height,seconds:r||(n=e.validatedVideoInfo)==null?void 0:n.duration,sidecar:t.sidecar,width:i==null?void 0:i.width},integral:{transport:{ancillary:{fileLength:e.size,mimetype:r?m:u,objectId:t.objectId,thumbnail:r?{thumbnailHeight:i==null?void 0:i.jpegThumbnailHeight,thumbnailWidth:i==null?void 0:i.jpegThumbnailWidth}:{downloadableThumbnail:t.downloadableThumbnail,jpegThumbnail:void 0,thumbnailHeight:i==null?void 0:i.jpegThumbnailHeight,thumbnailWidth:i==null?void 0:i.jpegThumbnailWidth}},integral:{directPath:t.directPath,fileEncSha256:t.fileEncSha256,fileSha256:t.fileSha256,mediaKey:t.mediaKey,mediaKeyTimestamp:t.mediaKeyTimestamp}}}};return o("encodeProtobuf").encodeProtobuf(o("WAMediaTransport.pb").VideoTransportSpec,l).readBuffer()}function b(e,t){var n=C(e,t);return{payload:{content:{videoMessage:{caption:{mentionedJid:[]},video:{payload:n,version:1}}}}}}var v=new ArrayBuffer(0);function S(e,t){var n,a,i={ancillary:{seconds:(n=e.validatedAudioInfo)==null?void 0:n.duration,waveform:(a=e.validatedAudioInfo)==null?void 0:a.waveform},integral:{audioFormat:r("gkx")("3053")?o("WAMediaTransport.pb").AUDIO_TRANSPORT_INTEGRAL_AUDIO_FORMAT.OPUS:void 0,transport:{ancillary:{fileLength:e.size,mimetype:r("gkx")("3053")?d:c,objectId:t.objectId,thumbnail:{jpegThumbnail:v}},integral:{directPath:t.directPath,fileEncSha256:t.fileEncSha256,fileSha256:t.fileSha256,mediaKey:t.mediaKey,mediaKeyTimestamp:t.mediaKeyTimestamp}}}};return o("encodeProtobuf").encodeProtobuf(o("WAMediaTransport.pb").AudioTransportSpec,i).readBuffer()}function R(e,t){var n=S(e,t);return{payload:{content:{audioMessage:{audio:{payload:n,version:1},ptt:!0}}}}}function L(e,t){var n={ancillary:{},integral:{transport:{ancillary:{fileLength:e.size,mimetype:p,objectId:t.objectId,thumbnail:{jpegThumbnail:new ArrayBuffer(1),thumbnailHeight:1,thumbnailWidth:1}},integral:{directPath:t.directPath,fileEncSha256:t.fileEncSha256,fileSha256:t.fileSha256,mediaKey:t.mediaKey,mediaKeyTimestamp:t.mediaKeyTimestamp}}}};return o("encodeProtobuf").encodeProtobuf(o("WAMediaTransport.pb").DocumentTransportSpec,n).readBuffer()}function E(e,t){var n,r=L(e,t);return{payload:{content:{documentMessage:{document:{payload:r,version:1},fileName:(n=e.validatedDocumentFileInfo)==null?void 0:n.filename}}}}}l.IMAGE_MIME_TYPE=e,l.STICKER_MIME_TYPE=s,l.VIDEO_MIME_TYPE=u,l.AUDIO_WAV_MIME_TYPE=c,l.AUDIO_OGG_MIME_TYPE=d,l.GIF_MIME_TYPE=m,l.FILE_MIME_TYPE=p,l.encodeMediaHdType=_,l.encodeValidatedMediaToImageTransport=f,l.encodeValidatedImageMessage=g,l.encodeValidatedMediaToStickerTransport=h,l.encodeValidatedStickerMessage=y,l.encodeValidatedMediaToVideoTransport=C,l.encodeValidatedVideoMessage=b,l.emptyAudioFileArrayBuffer=v,l.encodeValidatedMediaToAudioTransport=S,l.encodeValidatedAudioMessage=R,l.encodeValidatedMediaToDocumentTransport=L,l.encodeValidatedFileMessage=E}),98);
__d("MAWEphemeralConsts",["WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";var e,s=300,u=600,c=900,d=1800,m=Math.imul((e=o("WATimeUtils")).HOUR_SECONDS,6),p=Math.imul(e.HOUR_SECONDS,12),_=Math.imul(e.DAY_SECONDS,14),f=1e3,g=5,h=10,y=30,C=60,b=m;l.fiveMinutesInSeconds=s,l.tenMinutesInSeconds=u,l.fifteenMinutesInSeconds=c,l.thirtyMinutesInSeconds=d,l.oneHourInSeconds=e.HOUR_SECONDS,l.sixHoursInSeconds=m,l.twelveHoursInSeconds=p,l.oneDayInSeconds=e.DAY_SECONDS,l.ephemeralMaxDelectionWindowForUnseenMessage=_,l.msPerSec=f,l.fiveSeconds=g,l.tenSeconds=h,l.thirtySeconds=y,l.oneMinuteInSeconds=C,l.ephemeralReportingWindowInSeconds=b}),98);
__d("MAWFolderTypes",[],(function(t,n,r,o,a,i){"use strict";var e=0,l=1,s=2,u=3,c=10,d=15,m={ARCHIVED:c,INBOX:e,OTHER:s,PENDING:l,RESTRICTED:d,SPAM:u};i.INBOX=e,i.PENDING=l,i.OTHER=s,i.SPAM=u,i.ARCHIVED=c,i.RESTRICTED=d,i.FOLDER_ID=m}),66);
__d("MAWGetUserDeviceChangeAdminType",["MAWLocalizationType"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){switch(e){case"add":return t?o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_DEVICE:o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_DEVICE;case"remove":return t?o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_DEVICE:o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_DEVICE;case"update":return t?o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_UPDATED_DEVICE:o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UPDATED_DEVICE}}l.getUserDeviceAdminType=e}),98);
__d("MAWIsFbProfileDirectoryItemXmaEnabled",["gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("gkx")("15740")}l.isFbProfileDirectoryItemXmaEnabled=e}),98);
__d("MAWJidUtils",["FBLogger","I64","LSIntEnum","MAWDbMsg","MAWJids","WAGlobals","WAJids"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e,t,n){if(o("WAJids").isAuthorSystem(e)||t==null||n==null){r("FBLogger")("messenger_web").warn("Failed to create protocolMsgId with externalId %s for a msg to edit",n);return}return{author:e,chat:t,externalId:n}}function c(e){var t;return u(e.author,e.threadJid,(t=e.externalId)!=null?t:e.editExternalId)}function d(e){return o("WAJids").isAuthorMe(e)?o("WAGlobals").getMyUserJid():e}function m(t,n){var r=(e||(e=o("I64"))).to_string(t),a=(s||(s=o("LSIntEnum"))).unwrapIntEnum(n);switch(a){case 15:return o("MAWJids").jidUtils.toUserJid(r);case 16:return o("WAJids").toGroupJid(r);default:return null}}function p(e){return g(e.threadJid,e.externalId)}function _(e){return f(e.threadJid,e.externalId)}function f(e,t){var n=o("MAWDbMsg").toMsgId(g(e,t));if(n==null)throw r("FBLogger")("messenger_e2ee_web").mustfixThrow("formatProtocolMsgIdFromExternalId: Failed to create protocolMsgId with externalId %s for a msg",t);return n}function g(e,t){return e+"."+t}l.maybeToProtocolMsgId=u,l.toProtocolMsgId=c,l.getAuthorJid=d,l.LSJidtoChatJid=m,l.toProtocolMsgIdStringForMAWStorage=p,l.formatProtocolMsgIdFromMsg=_,l.formatProtocolMsgIdFromExternalId=f}),98);
__d("MAWJobDefinitions",["MAWExternalId"],(function(t,n,r,o,a,i,l){"use strict";var e=["s2sInstanceKey","s2sUserFlowQPLEvent"],s=["scheduleConfig"];function u(e){return e}function c(e){return e}var d={acceptGroupInvite:function(t,n,r,o,a,i){var e=_(i);return{args:{chatJid:t,inviteCode:o,invitedParticipantUserId:r,inviteExpirationTs:a,inviterUserId:n},scheduleConfig:e!=null?e:void 0,type:"acceptGroupInvite"}},addGroupParticipants:function(t,n,r,o){var e=_(o);return{args:{group:t,s2sInstanceKey:r,users:n},scheduleConfig:e!=null?e:void 0,type:"addGroupParticipants"}},deleteMsgsForMe:function(t,n){var e=_(n);return{args:{msgIds:t},scheduleConfig:e!=null?e:void 0,type:"deleteMsgsForMe"}},demoteGroupParticipants:function(t,n,r){var e=_(r);return{args:{group:t,users:n},scheduleConfig:e!=null?e:void 0,type:"demoteGroupParticipants"}},downloadAndHandleMedia:function(t,n,r,o,a,i,l){var e=_(l);return{args:{downloadType:a,hash:n,msgType:o,protocolMsgId:t,qplEntryPoint:r},scheduleConfig:e!=null?e:void 0,type:"downloadAndHandleMedia"}},forwardMsg:function(n,r,a,i,l,s,u){var t=_(u),c=a!=null?a:{},d=c.s2sInstanceKey,m=c.s2sUserFlowQPLEvent,p=babelHelpers.objectWithoutPropertiesLoose(c,e);return{args:{args:p,chatJid:n,ephemeralSetting:i,externalId:l!=null?l:o("MAWExternalId").generateExternalId(),isFirstMsg:s,protocolMsgId:r,s2sInstanceKey:d},scheduleConfig:t!=null?t:void 0,type:"forwardMsg"}},getSpams:function(t){var e=_(t);return{args:void 0,scheduleConfig:e!=null?e:void 0,type:"getSpams"}},handleFutureproofMsg:function(t){var e=_(t);return{args:{},scheduleConfig:e!=null?e:void 0,type:"handleFutureproofMsg"}},handleSpamMsg:function(t){var e=_(t);return{args:void 0,scheduleConfig:e!=null?e:void 0,type:"handleSpamMsg"}},igdReportUserSpam:function(t,n){var e=t.chatJid,r=t.context,o=t.frxParams,a=t.frxTags,i=t.msgs,l=t.reportedMessageId,s=t.spamFlow,u=t.userJid,c=_(n);return{args:{chatJid:e,context:r,frxParams:o,frxTags:a,msgs:i,reportedMessageId:l,spamFlow:s,userJid:u},scheduleConfig:c!=null?c:void 0,type:"igdReportUserSpam"}},igdSendMsg:function(t,n){var e=t.actorID,r=t.taskID,o=_(n);return{args:{actorID:e,taskID:r},scheduleConfig:o!=null?o:void 0,type:"igdSendMsg"}},leaveGroups:function(t,n){var e=_(n);return{args:{groups:t},scheduleConfig:e!=null?e:void 0,type:"leaveGroups"}},markThreadAsRead:function(t,n,r,o,a,i){var e=_(i);return{args:{chatJid:t,isBlocked:r,isReadReceiptsDisabled:a,isRestricted:o,relationship:n},scheduleConfig:e!=null?e:void 0,type:"markThreadAsRead"}},promoteGroupParticipants:function(t,n,r){var e=_(r);return{args:{group:t,users:n},scheduleConfig:e!=null?e:void 0,type:"promoteGroupParticipants"}},removeGroupParticipants:function(t,n,r){var e=_(r);return{args:{group:t,users:n},scheduleConfig:e!=null?e:void 0,type:"removeGroupParticipants"}},reportUserSpam:function(t,n,r,o,a,i,l,s,u,c){var e=_(u);return{args:{chatJid:r,context:i,frxParams:l,frxTags:a,isIgd:o,openMsgs:c,reportedMessageId:s,spamFlow:n,userJid:t},scheduleConfig:e!=null?e:void 0,type:"reportUserSpam"}},resendWrittenAppData:function(t,n){var e=_(n);return{args:{appDataExternalId:t},scheduleConfig:e!=null?e:void 0,type:"resendWrittenAppData"}},restoreMessagesFromEncryptedBackups:function(t,n,r,o,a,i,l,s,u,c,d,m,p,f,g){var e=_(p);return{args:{deanonApiPayload:f,hasMoreAfter:a,hasMoreBefore:o,instanceKey:c,isMediaGalleryRestore:g,isPointQuery:i,messages:r,minMsgId:l,optimisticMsgs:d,startSortKey:u,taskSource:m,threadId:n,traceId:s,transportKey:t},scheduleConfig:e!=null?e:void 0,type:"restoreMessagesFromEncryptedBackups"}},restoreProtobufsFromEncryptedBackups:function(t,n,r,o,a,i,l,s,u,c,d,m,p,f,g,h){var e=_(m);return{args:{chatJid:h,deanonApiPayload:f,echoMessages:t,hasMoreAfter:i,hasMoreBefore:a,instanceKey:d,isMediaGalleryRestore:g,isPointQuery:l,messages:o,minMsgId:s,referenceTimestamp:c,requestId:u,taskSource:p,threadId:r,transportKey:n},scheduleConfig:e!=null?e:void 0,type:"restoreProtobufsFromEncryptedBackups"}},revokeMsgs:function(t,n){var e=_(n);return{args:t,scheduleConfig:e!=null?e:void 0,type:"revokeMsgs"}},sendAppData:function(t,n,r){var e=_(r);return{args:{args:t,externalId:n!=null?n:o("MAWExternalId").generateExternalId()},scheduleConfig:e!=null?e:void 0,type:"sendAppData"}},sendBumpMsg:function(t,n,r,a){var e=_(a);return{args:{args:n,chatJid:t,externalId:r!=null?r:o("MAWExternalId").generateExternalId()},scheduleConfig:e!=null?e:void 0,type:"sendBumpMsg"}},sendGroupInviteMsg:function(t,n,r){var e=_(r);return{args:{args:t,externalId:n!=null?n:o("MAWExternalId").generateExternalId()},scheduleConfig:e!=null?e:void 0,type:"sendGroupInviteMsg"}},sendMediaMsg:function(t,n,r,a,i,l,s,u,c,d,m,p,f,g,h,y,C,b,v,S,R,L){var e=_(C);return{args:{args:{duration:c,ephemeralSetting:m,filename:v,height:l,isFirstMsg:h,isForwarded:g,isPtt:d,jpegThumbnail:a,jpegThumbnailHeight:u,jpegThumbnailWidth:s,mediaGroupMetadata:L,offlineAttachmentId:S,openMessageOtid:f,quote:p,s2sInstanceKey:r,source:b,width:i},attachmentType:R,chatJid:t,externalId:y!=null?y:o("MAWExternalId").generateExternalId(),file:n},scheduleConfig:e!=null?e:void 0,type:"sendMediaMsg"}},sendMediaMsgV2:function(t,n,r,a,i,l,s,u,c,d,m,p,f,g,h,y,C,b,v,S,R,L,E){var e=_(C);return{args:{args:{duration:c,ephemeralSetting:m,filename:v,height:l,isFirstMsg:h,isForwarded:g,isPtt:d,jpegThumbnail:a,jpegThumbnailHeight:u,jpegThumbnailWidth:s,mediaGroupMetadata:E,offlineAttachmentId:S,openMessageOtid:f,quote:p,s2sInstanceKey:R,source:b,width:i},attachmentType:L,chatJid:t,externalId:y!=null?y:o("MAWExternalId").generateExternalId(),mimeType:n,plaintext:r},scheduleConfig:e!=null?e:void 0,type:"sendMediaMsgV2"}},sendWrittenAppData:function(t,n){var e=_(n);return{args:{appDataExternalId:t},scheduleConfig:e!=null?e:void 0,type:"sendWrittenAppData"}},setGroupMemberAddMode:function(t,n,r){var e=_(r);return{args:{groupJid:t,memberAddMode:n},scheduleConfig:e!=null?e:void 0,type:"setGroupMemberAddMode"}},setGroupSubject:function(t,n,r){var e=_(r);return{args:{group:t,subject:n},scheduleConfig:e!=null?e:void 0,type:"setGroupSubject"}},startInstamadilloDYI:function(t,n){var e=_(n);return{args:{qplInstanceKey:t},scheduleConfig:e!=null?e:void 0,type:"startInstamadilloDYI"}},updateBackupEntFbidForMedia:function(t,n,r,o){var e=_(o);return{args:{backupEntFbid:n,deliveryObjectId:t,traceId:r},scheduleConfig:e!=null?e:void 0,type:"updateBackupEntFbidForMedia"}}};function m(e,t){return p(e,t)}function p(e,t){var n=t.scheduleConfig,r=babelHelpers.objectWithoutPropertiesLoose(t,s),a={args:{},scheduleConfig:n,type:e};return t.externalIdJob&&(a.args.externalId=o("MAWExternalId").generateExternalId()),a.args=babelHelpers.extends({},a.args,r),t.uniqueJob&&(a.uniqKey=e),a}function _(e){if(e!=null)return{jobId:e.jobId,maxTimeoutMs:e.maxTimeoutMs,priority:e.priority}}function f(e){return{otid:e.toplevelProtobuf.messageId,supplementalProtobufs:new Map(e.supplementalProtobufs.entries().map(function(e){var t=e[0],n=e[1];return[t,{decryptedProtobuf:n.payload,protobufTimestampMS:n.timestampMs}]})),tags:e.tags,toplevelProtobuf:{decryptedProtobuf:e.toplevelProtobuf.payload,protobufTimestampMS:e.toplevelProtobuf.timestampMs}}}l.toThreadJidPrimaryId=u,l.toEncodedEchoMessage=c,l.jobSerializers=d,l.createStartJobInfo=m,l.createStartJobInfoGeneric=p,l.serializeJobScheduledConfig=_,l.mpsMessageToEncryptedBackupsMessage=f}),98);
__d("MAWMediaDownloadStatus",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["DOWNLOADING","SUCCESS","NOT_MANUAL_RETRYABLE_FAILURE","MANUAL_RETRYABLE_FAILURE","MISSING_FILE","RETRYING","AUTOMATICALLY_RETRYABLE_TIMEOUT_FAILURE"]),l=e;i.default=l}),66);
__d("MAWMsg",["$InternalEnum","I64","LSBitFlag","LSIntEnum","LSMessagingThreadTypeUtil","LSReplyMessageAttachmentType","MAWMsgType","MsgrWebGating","WAArmadilloXMA.pb"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c;function d(e,t,n,r,a,i,l){return e===o("MAWMsgType").MSG_TYPE.TEXT?t?(u||(u=o("LSIntEnum"))).ofNumber(8192):(u||(u=o("LSIntEnum"))).ofNumber(1):e===o("MAWMsgType").MSG_TYPE.VIDEO&&l===!0?(u||(u=o("LSIntEnum"))).ofNumber(16384):e===o("MAWMsgType").MSG_TYPE.IMAGE||e===o("MAWMsgType").MSG_TYPE.VIDEO||e===o("MAWMsgType").MSG_TYPE.RAVEN?(u||(u=o("LSIntEnum"))).ofNumber(2):e===o("MAWMsgType").MSG_TYPE.PTT?(u||(u=o("LSIntEnum"))).ofNumber(4):e===o("MAWMsgType").MSG_TYPE.FUTUREPROOF?m(a):e===o("MAWMsgType").MSG_TYPE.CIPHERTEXT?(u||(u=o("LSIntEnum"))).ofNumber(65536):e===o("MAWMsgType").MSG_TYPE.UNAVAILABLE?(u||(u=o("LSIntEnum"))).ofNumber(262144):e===o("MAWMsgType").MSG_TYPE.GIF?(u||(u=o("LSIntEnum"))).ofNumber(16384):e===o("MAWMsgType").MSG_TYPE.STICKER?(u||(u=o("LSIntEnum"))).ofNumber(4096):e===o("MAWMsgType").MSG_TYPE.DOCUMENT_FILE?(u||(u=o("LSIntEnum"))).ofNumber(64):e===o("MAWMsgType").MSG_TYPE.XMA?n!=null&&n?(u||(u=o("LSIntEnum"))).ofNumber(256):i===o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_RECEIVER_FETCH?(u||(u=o("LSIntEnum"))).ofNumber(536870912):(u||(u=o("LSIntEnum"))).ofNumber(1024):e===o("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE?r?(u||(u=o("LSIntEnum"))).ofNumber(1):(u||(u=o("LSIntEnum"))).ofNumber(33554432):e===o("MAWMsgType").MSG_TYPE.RECEIVER_FETCH?(u||(u=o("LSIntEnum"))).ofNumber(134217728):(u||(u=o("LSIntEnum"))).ofNumber(1)}function m(e){switch(e){case"liveLocationMessage":return(u||(u=o("LSIntEnum"))).ofNumber(4294967296);case"locationMessage":return(u||(u=o("LSIntEnum"))).ofNumber(524288);case"pollCreationMessage":return(u||(u=o("LSIntEnum"))).ofNumber(1048576);case"contactShareMessage":return(u||(u=o("LSIntEnum"))).ofNumber(2097152);case"storyMentionMessage":return(u||(u=o("LSIntEnum"))).ofNumber(4194304);case"postMentionMessage":return(u||(u=o("LSIntEnum"))).ofNumber(2147483648);case"metaAiMessage":return(u||(u=o("LSIntEnum"))).ofNumber(8388608);case"bumpMessage":return(u||(u=o("LSIntEnum"))).ofNumber(16777216);case"stickerReceiverFetchMessage":return(u||(u=o("LSIntEnum"))).ofNumber(67108864);case"noteMention":return(u||(u=o("LSIntEnum"))).ofNumber(1073741824);case"messengerMemory":return(u||(u=o("LSIntEnum"))).ofNumber(8589934592);case"rtcMessage":return(u||(u=o("LSIntEnum"))).ofNumber(17179869184);default:return(u||(u=o("LSIntEnum"))).ofNumber(131072)}}function p(e){var t=e.displayedContentTypes;return(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(2))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(4))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(16384))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(16))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(64))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(4096))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(134217728))}function _(e,t){var n=e.replyAttachmentType;if(n==null)return!1;var a=o("LSMessagingThreadTypeUtil").isArmadilloSecure(t);return a&&e.replyAttachmentId==null&&(!o("MsgrWebGating").isQuotedMessagesInLsEnabled()||e.replyAttachmentPlaintextHash==null)?!1:(c||(c=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").PHOTO))||(c||(c=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").GIF))||(c||(c=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").AUDIO))||(c||(c=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").STICKER))||(c||(c=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").VIDEO))}function f(e){return(c||(c=o("I64"))).equal(e.displayedContentTypes,(u||(u=o("LSIntEnum"))).ofNumber(134217728))}function g(e){return o("LSBitFlag").has((u||(u=o("LSIntEnum"))).ofNumber(536870912),e.displayedContentTypes)}function h(e){var t=e.displayedContentTypes;return!!(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(32))}function y(e){return(c||(c=o("I64"))).lt(e.sendStatusV2,(u||(u=o("LSIntEnum"))).ofNumber(2))}function C(e){var t=e.displayedContentTypes;return o("LSBitFlag").has((u||(u=o("LSIntEnum"))).ofNumber(1024),t)||o("LSBitFlag").has((u||(u=o("LSIntEnum"))).ofNumber(536870912),t)}function b(e){var t=e.displayedContentTypes;return(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(65536))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(131072))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(524288))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(4294967296))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(1048576))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(2097152))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(4194304))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(2147483648))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(8388608))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(16777216))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(1073741824))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(8589934592))?!0:(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(262144))}var v=(s=n("$InternalEnum"))({PLAYED:0,SCREENSHOTTED:1,FORCE_DISABLED:2}),S=s({PERMANENT:0,UNSEEN:1,SEEN:2,REPLAYED:3,EXPIRED:4}),R=s({VIEW_ONCE:0,ALLOW_REPLAY:1,KEEP_IN_CHAT:2}),L=s({IMAGE:0,VIDEO:1});l.text=(e=o("MAWMsgType")).MSG_TYPE.TEXT,l.image=e.MSG_TYPE.IMAGE,l.video=e.MSG_TYPE.VIDEO,l.ptt=e.MSG_TYPE.PTT,l.unsent=e.MSG_TYPE.REVOKED,l.gif=e.MSG_TYPE.GIF,l.bumpExistingMessage=e.MSG_TYPE.BUMP_EXISTING_MESSAGE,l.getDisplayedContentTypes=d,l.isMediaMsg=p,l.isMediaReplyAttachmentType=_,l.isReceiverFetchMsg=f,l.isReceiverFetchXMAMsg=g,l.isAdminMsg=h,l.isOptimistic=y,l.isXMAMsg=C,l.isPlaceholder=b,l.MAWRavenActionNotifType=v,l.MAWRavenMsgEphemeralMediaState=S,l.MAWRavenMsgEphemeralType=R,l.MAWRavenMsgMediaType=L}),98);
__d("MWXMAV2IsDataclassLiveLocationXMA",["MSGDataclassTypes.flow","justknobx"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return s(e)!=null}function s(e){if(e!=null){var t=e.content;if(!(t==null||(t==null?void 0:t.__typename)!=="XMSGXmaSingleContent")){var n=t.custom_template_data;if(!(n==null||(n==null?void 0:n.__typename)!=="XMSGXmaLocationTemplateData")){var r=n.location_metadata;if(!(r==null||(r==null?void 0:r.__typename)!=="XMSGXmaLiveLocationMetadata"))return r}}}}var u=1e3;function c(e,t){var n,a=r("justknobx")._("4207"),i=Math.floor(Date.now()/u)-a;return t!=null&&t<i&&((n=s(e))==null?void 0:n.session_state)===o("MSGDataclassTypes.flow").XmsgXmaLiveLocationSessionState.Started}l.isDataclassLiveLocationXMA=e,l.getLiveLocationMetadata=s,l.isExpiredLiveLocationStarted=c}),98);
__d("MAWParseCollapsibleIdFromXMADataClass",["FBLogger","MWXMAV2IsDataclassLiveLocationXMA"],(function(t,n,r,o,a,i,l){"use strict";function e(e){if(e==null)throw r("FBLogger")("messenger_web").mustfixThrow("xmaDataclass is missing or invalid");var t=o("MWXMAV2IsDataclassLiveLocationXMA").getLiveLocationMetadata(e);if(t!=null)return parseInt(t.session_id,10);if((e==null?void 0:e.layout_config)==null||typeof(e==null?void 0:e.layout_config.collapsible_id)!="number")throw r("FBLogger")("messenger_web").mustfixThrow("Layout config or collapsible_id is missing or invalid");return e.layout_config.collapsible_id}l.parseCollapsibleIdFromXMADataClass=e}),98);
__d("MAWParseXMAFBConfig",["FBLogger","MAWIsFbProfileDirectoryItemXmaEnabled","WAArmadilloXMA.pb","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e,s=new Set([(e=o("WAArmadilloXMA.pb")).EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_SHARE,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_SHORT,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_SHARE,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_REPLY,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_GAMING_CUSTOM_UPDATE,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_EXTERNAL_LINK_SHARE,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_AUDIO_CALL,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_VIDEO_CALL,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_AUDIO_CALL,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_VIDEO_CALL,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_AUDIO_CALL,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_VIDEO_CALL,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_POST_PRIVATE_REPLY,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_POST_REACTION_REPLY,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_HIGHLIGHTS_TAB_FRIEND_UPDATES_REPLY,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_HIGHLIGHTS_TAB_LOCAL_EVENT_REPLY,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_EVENT,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_PRODUCER_STORY_REPLY,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_MENTION,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_PRODUCER_STORY_REPLY,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_RECEIVER_FETCH]);r("gkx")("12661")&&s.add(o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.GEN_AI_RICH_RESPONSE);function u(e){var t=e.fbTargetType,n=e.silentExposure;if(t!=null&&s.has(t))return!0;var a=n!=null?n:!1;switch(t){case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_CONTACT:return!0;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_AI_CONTACT:return a?r("gkx")("9338"):r("gkx")("9339");case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING_V2:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING:return!0;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_POST_MENTION:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_MEMORIES_SHARE:return!0;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_PROFILE_DIRECTORY_ITEM:return o("MAWIsFbProfileDirectoryItemXmaEnabled").isFbProfileDirectoryItemXmaEnabled();default:return r("FBLogger")("maw_db").mustfix("MAWParseXMAFBConfig encountered an unknown unsupported XMA type: %s",String(t)),!1}}l.FB_FULLY_SUPPORTED_TARGET_TYPES=s,l.isFBSupportedTargetType=u}),98);
__d("MWXMAV2XmaDataClass",["FBLogger"],(function(t,n,r,o,a,i,l){"use strict";function e(e){if(e!=null)try{return JSON.parse(e)}catch(e){r("FBLogger")("messenger_web_sharing").mustfix("Error parsing xma dataclass")}}l.parseXmaDataClass=e}),98);
__d("MAWParseXMAUnsupportedMessageType",["MWXMAV2IsDataclassLiveLocationXMA","MWXMAV2XmaDataClass","WAArmadilloXMA.pb"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){if(n===void 0&&(n=!1),e==null)return null;if(n)return"paymentsTransactionMessage";switch(e){case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING_V2:return o("MWXMAV2IsDataclassLiveLocationXMA").isDataclassLiveLocationXMA(o("MWXMAV2XmaDataClass").parseXmaDataClass(t))?"liveLocationMessage":"locationMessage";case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_CONTACT:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_AI_CONTACT:return"contactShareMessage";case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_MENTION:return"storyMentionMessage";case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_POST_MENTION:return"postMentionMessage";case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_MEMORIES_SHARE:return"messengerMemory";case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_AUDIO_CALL:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_VIDEO_CALL:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_AUDIO_CALL:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_VIDEO_CALL:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_GROUP_AUDIO_CALL:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_GROUP_VIDEO_CALL:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_AUDIO_CALL:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_VIDEO_CALL:return"rtcMessage";default:return null}}l.getXMAUnsupportedMessageType=e}),98);
__d("WAArmadilloApplication.pb",["WAArmadilloXMA.pb","WACommon.pb","WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s,u={ES_OPEN:1,ES_CLOSE:2},c={UNKNOWN:0,NUDE:1,NOT_NUDE:2},d={TAKEDOWN:0,RESTORE:1},m={PAYMENT_UNKNOWN:-1,REQUEST_INITED:4,REQUEST_DECLINED:5,REQUEST_TRANSFER_INITED:6,REQUEST_TRANSFER_COMPLETED:7,REQUEST_TRANSFER_FAILED:8,REQUEST_CANCELED:9,REQUEST_EXPIRED:10,TRANSFER_INITED:11,TRANSFER_PENDING:12,TRANSFER_PENDING_RECIPIENT_VERIFICATION:13,TRANSFER_CANCELED:14,TRANSFER_COMPLETED:15,TRANSFER_NO_RECEIVER_CREDENTIAL_NO_RTS_PENDING_CANCELED:16,TRANSFER_NO_RECEIVER_CREDENTIAL_NO_RTS_PENDING_OTHER:17,TRANSFER_REFUNDED:18,TRANSFER_PARTIAL_REFUND:19,TRANSFER_CHARGED_BACK:20,TRANSFER_EXPIRED:21,TRANSFER_DECLINED:22,TRANSFER_UNAVAILABLE:23},p={SCREENSHOT_IMAGE:1,SCREEN_RECORDING:2},_={PLAYED:0,SCREENSHOT:1,FORCE_DISABLE:2},f={VIEW_ONCE:0,ALLOW_REPLAY:1,KEEP_IN_CHAT:2},g={SMALL_LIKE:1,MEDIUM_LIKE:2,LARGE_LIKE:3},h={},y={},C={},b={},v={},S={},R={},L={},E={},k={},I={},T={},D={},x={},$={},P={},N={},M={},w={},A={},F={},O={},B={},W={},q={},U={},V={},H={},G={},z={},j={},K={},Q={};h.name="Armadillo",h.internalSpec={payload:[1,(e=o("WAProtoConst")).TYPES.MESSAGE,C],metadata:[2,e.TYPES.MESSAGE,y]},y.name="Armadillo$Metadata",y.internalSpec={},C.name="Armadillo$Payload",C.internalSpec={content:[1,e.TYPES.MESSAGE,B],applicationData:[2,e.TYPES.MESSAGE,L],signal:[3,e.TYPES.MESSAGE,v],subProtocol:[4,e.TYPES.MESSAGE,b],__oneofs__:{payload:["content","applicationData","signal","subProtocol"]}},b.name="Armadillo$SubProtocolPayload",b.internalSpec={futureProof:[1,e.TYPES.ENUM,(s=o("WACommon.pb")).FUTURE_PROOF_BEHAVIOR]},v.name="Armadillo$Signal",v.internalSpec={encryptedBackupsSecrets:[1,e.TYPES.MESSAGE,S],__oneofs__:{signal:["encryptedBackupsSecrets"]}},S.name="Armadillo$Signal$EncryptedBackupsSecrets",S.internalSpec={backupId:[1,e.TYPES.UINT64],serverDataId:[2,e.TYPES.UINT64],epoch:[3,e.FLAGS.REPEATED|e.TYPES.MESSAGE,R],tempOcmfClientState:[4,e.TYPES.BYTES],mailboxRootKey:[5,e.TYPES.BYTES],obliviousValidationToken:[6,e.TYPES.BYTES]},R.name="Armadillo$Signal$EncryptedBackupsSecrets$Epoch",R.internalSpec={id:[1,e.TYPES.UINT64],anonId:[2,e.TYPES.BYTES],rootKey:[3,e.TYPES.BYTES],status:[4,e.TYPES.ENUM,u]},L.name="Armadillo$ApplicationData",L.internalSpec={metadataSync:[1,e.TYPES.MESSAGE,O],aiBotResponse:[2,e.TYPES.MESSAGE,k],messageHistoryDocumentMessage:[3,e.TYPES.MESSAGE,E],__oneofs__:{applicationData:["metadataSync","aiBotResponse","messageHistoryDocumentMessage"]}},E.name="Armadillo$ApplicationData$MessageHistoryDocumentMessage",E.internalSpec={document:[1,e.TYPES.MESSAGE,s.SubProtocolSpec]},k.name="Armadillo$ApplicationData$AIBotResponseMessage",k.internalSpec={summonToken:[1,e.TYPES.STRING],messageText:[2,e.TYPES.STRING],serializedExtras:[3,e.TYPES.STRING]},I.name="Armadillo$ApplicationData$MetadataSyncAction",I.internalSpec={actionTimestamp:[1,e.TYPES.INT64],chatAction:[101,e.TYPES.MESSAGE,P],messageAction:[102,e.TYPES.MESSAGE,x],spectraAction:[103,e.TYPES.MESSAGE,D],attachmentInterventionAction:[104,e.TYPES.MESSAGE,T],__oneofs__:{actionType:["chatAction","messageAction","spectraAction","attachmentInterventionAction"]}},T.name="Armadillo$ApplicationData$MetadataSyncAction$SyncAttachmentInterventionAction",T.internalSpec={messageKey:[1,e.TYPES.MESSAGE,s.MessageKeySpec],interventionType:[2,e.TYPES.ENUM,c]},D.name="Armadillo$ApplicationData$MetadataSyncAction$SyncSpectraAction",D.internalSpec={key:[1,e.TYPES.MESSAGE,s.MessageKeySpec],actionType:[2,e.TYPES.ENUM,d],takedownActionId:[3,e.TYPES.INT64],config:[4,e.TYPES.STRING]},x.name="Armadillo$ApplicationData$MetadataSyncAction$SyncMessageAction",x.internalSpec={key:[1,e.TYPES.MESSAGE,s.MessageKeySpec],messageDelete:[101,e.TYPES.MESSAGE,$],__oneofs__:{action:["messageDelete"]}},$.name="Armadillo$ApplicationData$MetadataSyncAction$SyncMessageAction$ActionMessageDelete",$.internalSpec={},P.name="Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction",P.internalSpec={chatId:[1,e.TYPES.STRING],chatArchive:[101,e.TYPES.MESSAGE,w],chatDelete:[102,e.TYPES.MESSAGE,M],chatRead:[103,e.TYPES.MESSAGE,N],__oneofs__:{action:["chatArchive","chatDelete","chatRead"]}},N.name="Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction$ActionChatRead",N.internalSpec={messageRange:[1,e.TYPES.MESSAGE,F],read:[2,e.TYPES.BOOL]},M.name="Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction$ActionChatDelete",M.internalSpec={messageRange:[1,e.TYPES.MESSAGE,F]},w.name="Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction$ActionChatArchive",w.internalSpec={messageRange:[1,e.TYPES.MESSAGE,F],archived:[2,e.TYPES.BOOL]},A.name="Armadillo$ApplicationData$MetadataSyncAction$SyncActionMessage",A.internalSpec={key:[1,e.TYPES.MESSAGE,s.MessageKeySpec],timestamp:[2,e.TYPES.INT64]},F.name="Armadillo$ApplicationData$MetadataSyncAction$SyncActionMessageRange",F.internalSpec={lastMessageTimestamp:[1,e.TYPES.INT64],lastSystemMessageTimestamp:[2,e.TYPES.INT64],messages:[3,e.FLAGS.REPEATED|e.TYPES.MESSAGE,A]},O.name="Armadillo$ApplicationData$MetadataSyncNotification",O.internalSpec={actions:[2,e.FLAGS.REPEATED|e.TYPES.MESSAGE,I]},B.name="Armadillo$Content",B.internalSpec={commonSticker:[1,e.TYPES.MESSAGE,Q],screenshotAction:[3,e.TYPES.MESSAGE,G],extendedContentMessage:[4,e.TYPES.MESSAGE,o("WAArmadilloXMA.pb").ExtendedContentMessageSpec],ravenMessage:[5,e.TYPES.MESSAGE,K],ravenActionNotifMessage:[6,e.TYPES.MESSAGE,j],extendedMessageContentWithSear:[7,e.TYPES.MESSAGE,z],imageGalleryMessage:[8,e.TYPES.MESSAGE,H],paymentsTransactionMessage:[10,e.TYPES.MESSAGE,W],bumpExistingMessage:[11,e.TYPES.MESSAGE,V],noteReplyMessage:[13,e.TYPES.MESSAGE,U],ravenMessageMsgr:[14,e.TYPES.MESSAGE,K],networkVerificationMessage:[15,e.TYPES.MESSAGE,q],__oneofs__:{content:["commonSticker","screenshotAction","extendedContentMessage","ravenMessage","ravenActionNotifMessage","extendedMessageContentWithSear","imageGalleryMessage","paymentsTransactionMessage","bumpExistingMessage","noteReplyMessage","ravenMessageMsgr","networkVerificationMessage"]}},W.name="Armadillo$Content$PaymentsTransactionMessage",W.internalSpec={transactionId:[1,e.TYPES.UINT64],amount:[2,e.TYPES.STRING],currency:[3,e.TYPES.STRING],paymentStatus:[4,e.TYPES.ENUM,m],extendedContentMessage:[5,e.TYPES.MESSAGE,o("WAArmadilloXMA.pb").ExtendedContentMessageSpec]},q.name="Armadillo$Content$NetworkVerificationMessage",q.internalSpec={codeText:[1,e.TYPES.STRING]},U.name="Armadillo$Content$NoteReplyMessage",U.internalSpec={noteId:[1,e.TYPES.STRING],noteText:[2,e.TYPES.MESSAGE,s.MessageTextSpec],noteTimestampMs:[3,e.TYPES.INT64],textContent:[4,e.TYPES.MESSAGE,s.MessageTextSpec],stickerContent:[5,e.TYPES.MESSAGE,s.SubProtocolSpec],videoContent:[6,e.TYPES.MESSAGE,s.SubProtocolSpec],__oneofs__:{noteReplyContent:["textContent","stickerContent","videoContent"]}},V.name="Armadillo$Content$BumpExistingMessage",V.internalSpec={key:[1,e.TYPES.MESSAGE,s.MessageKeySpec]},H.name="Armadillo$Content$ImageGalleryMessage",H.internalSpec={images:[1,e.FLAGS.REPEATED|e.TYPES.MESSAGE,s.SubProtocolSpec]},G.name="Armadillo$Content$ScreenshotAction",G.internalSpec={screenshotType:[1,e.TYPES.ENUM,p]},z.name="Armadillo$Content$ExtendedContentMessageWithSear",z.internalSpec={searId:[1,e.TYPES.STRING],payload:[2,e.TYPES.BYTES],nativeUrl:[3,e.TYPES.STRING],searAssociatedMessage:[4,e.TYPES.MESSAGE,s.SubProtocolSpec],searSentWithMessageId:[5,e.TYPES.STRING]},j.name="Armadillo$Content$RavenActionNotifMessage",j.internalSpec={key:[1,e.TYPES.MESSAGE,s.MessageKeySpec],actionTimestamp:[2,e.TYPES.INT64],actionType:[3,e.TYPES.ENUM,_]},K.name="Armadillo$Content$RavenMessage",K.internalSpec={ephemeralType:[1,e.TYPES.ENUM,f],imageMessage:[2,e.TYPES.MESSAGE,s.SubProtocolSpec],videoMessage:[3,e.TYPES.MESSAGE,s.SubProtocolSpec],__oneofs__:{mediaContent:["imageMessage","videoMessage"]}},Q.name="Armadillo$Content$CommonSticker",Q.internalSpec={stickerType:[1,e.TYPES.ENUM,g]},l.ARMADILLO_SIGNAL_ENCRYPTED_BACKUPS_SECRETS_EPOCH_EPOCH_STATUS=u,l.ARMADILLO_APPLICATION_DATA_METADATA_SYNC_ACTION_SYNC_ATTACHMENT_INTERVENTION_ACTION_INTERVENTION_TYPE=c,l.ARMADILLO_APPLICATION_DATA_METADATA_SYNC_ACTION_SYNC_SPECTRA_ACTION_SPECTRA_ACTION_TYPE=d,l.ARMADILLO_CONTENT_PAYMENTS_TRANSACTION_MESSAGE_PAYMENT_STATUS=m,l.ARMADILLO_CONTENT_SCREENSHOT_ACTION_SCREENSHOT_TYPE=p,l.ARMADILLO_CONTENT_RAVEN_ACTION_NOTIF_MESSAGE_ACTION_TYPE=_,l.ARMADILLO_CONTENT_RAVEN_MESSAGE_EPHEMERAL_TYPE=f,l.ARMADILLO_CONTENT_COMMON_STICKER_STICKER_TYPE=g,l.ArmadilloSpec=h,l.Armadillo$MetadataSpec=y,l.Armadillo$PayloadSpec=C,l.Armadillo$SubProtocolPayloadSpec=b,l.Armadillo$SignalSpec=v,l.Armadillo$Signal$EncryptedBackupsSecretsSpec=S,l.Armadillo$Signal$EncryptedBackupsSecrets$EpochSpec=R,l.Armadillo$ApplicationDataSpec=L,l.Armadillo$ApplicationData$MessageHistoryDocumentMessageSpec=E,l.Armadillo$ApplicationData$AIBotResponseMessageSpec=k,l.Armadillo$ApplicationData$MetadataSyncActionSpec=I,l.Armadillo$ApplicationData$MetadataSyncAction$SyncAttachmentInterventionActionSpec=T,l.Armadillo$ApplicationData$MetadataSyncAction$SyncSpectraActionSpec=D,l.Armadillo$ApplicationData$MetadataSyncAction$SyncMessageActionSpec=x,l.Armadillo$ApplicationData$MetadataSyncAction$SyncMessageAction$ActionMessageDeleteSpec=$,l.Armadillo$ApplicationData$MetadataSyncAction$SyncChatActionSpec=P,l.Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction$ActionChatReadSpec=N,l.Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction$ActionChatDeleteSpec=M,l.Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction$ActionChatArchiveSpec=w,l.Armadillo$ApplicationData$MetadataSyncAction$SyncActionMessageSpec=A,l.Armadillo$ApplicationData$MetadataSyncAction$SyncActionMessageRangeSpec=F,l.Armadillo$ApplicationData$MetadataSyncNotificationSpec=O,l.Armadillo$ContentSpec=B,l.Armadillo$Content$PaymentsTransactionMessageSpec=W,l.Armadillo$Content$NetworkVerificationMessageSpec=q,l.Armadillo$Content$NoteReplyMessageSpec=U,l.Armadillo$Content$BumpExistingMessageSpec=V,l.Armadillo$Content$ImageGalleryMessageSpec=H,l.Armadillo$Content$ScreenshotActionSpec=G,l.Armadillo$Content$ExtendedContentMessageWithSearSpec=z,l.Armadillo$Content$RavenActionNotifMessageSpec=j,l.Armadillo$Content$RavenMessageSpec=K,l.Armadillo$Content$CommonStickerSpec=Q}),98);
__d("WAArmadilloBackupCommon.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e={};e.name="Subprotocol",e.internalSpec={payload:[1,o("WAProtoConst").TYPES.BYTES],version:[2,o("WAProtoConst").TYPES.INT32]},l.SubprotocolSpec=e}),98);
__d("WAArmadilloBackupMessage.pb",["WAArmadilloBackupCommon.pb","WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={},u={},c={};s.name="BackupMessage",s.internalSpec={metadata:[1,(e=o("WAProtoConst")).TYPES.MESSAGE,u],encryptedTransportMessage:[2,e.TYPES.BYTES],encryptedTransportEvent:[5,e.TYPES.MESSAGE,o("WAArmadilloBackupCommon.pb").SubprotocolSpec],encryptedTransportLocallyTransformedMessage:[6,e.TYPES.MESSAGE,o("WAArmadilloBackupCommon.pb").SubprotocolSpec],miTransportAdminMessage:[7,e.TYPES.MESSAGE,o("WAArmadilloBackupCommon.pb").SubprotocolSpec],__oneofs__:{payload:["encryptedTransportMessage","encryptedTransportEvent","encryptedTransportLocallyTransformedMessage","miTransportAdminMessage"]}},u.name="BackupMessage$Metadata",u.internalSpec={senderId:[1,e.TYPES.STRING],messageId:[2,e.TYPES.STRING],timestampMs:[3,e.TYPES.INT64],frankingMetadata:[4,e.TYPES.MESSAGE,c],payloadVersion:[5,e.TYPES.INT32],futureProofBehavior:[6,e.TYPES.INT32],threadTypeTag:[7,e.TYPES.INT32],clientTimestampMs:[8,e.TYPES.INT64]},c.name="BackupMessage$Metadata$FrankingMetadata",c.internalSpec={frankingTag:[3,e.TYPES.BYTES],reportingTag:[4,e.TYPES.BYTES]},l.BackupMessageSpec=s,l.BackupMessage$MetadataSpec=u,l.BackupMessage$Metadata$FrankingMetadataSpec=c}),98);
__d("WAArmadilloLocallyTransformedMessage.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e={},s={};e.name="LocallyTransformedMessage",e.internalSpec={pollUpdateMessage:[1,o("WAProtoConst").TYPES.MESSAGE,s],__oneofs__:{content:["pollUpdateMessage"]}},s.name="LocallyTransformedMessage$PollUpdateAdminMessage",s.internalSpec={pollCreationMessageId:[1,o("WAProtoConst").TYPES.STRING],pollUpdateMessageId:[2,o("WAProtoConst").TYPES.STRING]},l.LocallyTransformedMessageSpec=e,l.LocallyTransformedMessage$PollUpdateAdminMessageSpec=s}),98);
__d("WAArmadilloMiTransportAdminMessage.pb",["$InternalEnum","WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s,u=(s=n("$InternalEnum"))({UNSET:0,DISABLED:1,ENABLED:2}),c=s({UNSET:0,CHANGED:1,REMOVED:2}),d=s({UNSET:0,PINNED:1,UNPINNED:2}),m=s({UNSET:0,ALL_MEMBERS:1,ADMINS_ONLY:2}),p=s({UNSET:0,ADDED:1,REMOVED:2}),_=s({UNSET:0,ADDED:1,REMOVED:2}),f={},g={},h={},y={},C={},b={},v={},S={},R={},L={},E={},k={},I={},T={},D={},x={},$={},P={},N={},M={},w={},A={},F={},O={},B={},W={},q={},U={},V={},H={},G={},z={},j={},K={},Q={},X={};f.name="MiTransportAdminMessage",f.internalSpec={skipBumpThread:[34,(e=o("WAProtoConst")).TYPES.BOOL],skipSnippetUpdate:[35,e.TYPES.BOOL],chatThemeChanged:[1,e.TYPES.MESSAGE,X],nicknameChanged:[2,e.TYPES.MESSAGE,Q],groupParticipantChanged:[3,e.TYPES.MESSAGE,K],groupAdminChanged:[4,e.TYPES.MESSAGE,j],groupNameChanged:[5,e.TYPES.MESSAGE,z],groupMembershipAddModeChanged:[6,e.TYPES.MESSAGE,G],messagePinned:[7,e.TYPES.MESSAGE,H],groupImageChanged:[8,e.TYPES.MESSAGE,V],quickReactionChanged:[9,e.TYPES.MESSAGE,U],linkCta:[10,e.TYPES.MESSAGE,W],iconChanged:[11,e.TYPES.MESSAGE,B],disappearingSettingChanged:[12,e.TYPES.MESSAGE,O],limitSharingChanged:[13,e.TYPES.MESSAGE,F],xmatDisappearingSetting:[14,e.TYPES.MESSAGE,A],xmatFriendRequestConfirmedEncrypted:[15,e.TYPES.MESSAGE,w],xmatInstantGameEncryptedDynamicCustomUpdate:[16,e.TYPES.MESSAGE,M],xmatLinkCta:[17,e.TYPES.MESSAGE,N],xmatMagicWords:[18,e.TYPES.MESSAGE,P],xmatMessagingLimitSharing:[19,e.TYPES.MESSAGE,$],xmatMessengerQrCodeScanned:[20,e.TYPES.MESSAGE,x],xmatMessengerSharedAlbumAddition:[21,e.TYPES.MESSAGE,D],xmatMessengerSharedAlbumContentRemoval:[22,e.TYPES.MESSAGE,I],xmatMessengerSharedAlbumDeletion:[23,e.TYPES.MESSAGE,k],xmatMessengerSharedAlbumRename:[24,e.TYPES.MESSAGE,E],xmatMessengerSharedAlbum:[25,e.TYPES.MESSAGE,L],xmatThemeColor:[26,e.TYPES.MESSAGE,R],xmatThreadIcon:[27,e.TYPES.MESSAGE,S],xmatThreadNickname:[28,e.TYPES.MESSAGE,v],xmatThreadQuickReaction:[29,e.TYPES.MESSAGE,b],xmatUpdatePayments:[30,e.TYPES.MESSAGE,C],xmatPinMessageV2:[31,e.TYPES.MESSAGE,y],xmatUnpinMessageV2:[32,e.TYPES.MESSAGE,h],xmatGenaiTaskAdd:[33,e.TYPES.MESSAGE,g],__oneofs__:{content:["chatThemeChanged","nicknameChanged","groupParticipantChanged","groupAdminChanged","groupNameChanged","groupMembershipAddModeChanged","messagePinned","groupImageChanged","quickReactionChanged","linkCta","iconChanged","disappearingSettingChanged","limitSharingChanged","xmatDisappearingSetting","xmatFriendRequestConfirmedEncrypted","xmatInstantGameEncryptedDynamicCustomUpdate","xmatLinkCta","xmatMagicWords","xmatMessagingLimitSharing","xmatMessengerQrCodeScanned","xmatMessengerSharedAlbumAddition","xmatMessengerSharedAlbumContentRemoval","xmatMessengerSharedAlbumDeletion","xmatMessengerSharedAlbumRename","xmatMessengerSharedAlbum","xmatThemeColor","xmatThreadIcon","xmatThreadNickname","xmatThreadQuickReaction","xmatUpdatePayments","xmatPinMessageV2","xmatUnpinMessageV2","xmatGenaiTaskAdd"]}},g.name="MiTransportAdminMessage$XmatGenAITaskAdd",g.internalSpec={taskId:[1,e.TYPES.INT64]},h.name="MiTransportAdminMessage$XmatUnpinMessageV2",h.internalSpec={pinnedMessageId:[1,e.TYPES.STRING]},y.name="MiTransportAdminMessage$XmatPinMessageV2",y.internalSpec={pinnedMessageId:[1,e.TYPES.STRING]},C.name="MiTransportAdminMessage$XmatUpdatePayments",C.internalSpec={receiverName:[1,e.TYPES.STRING],senderName:[2,e.TYPES.STRING],amount:[3,e.TYPES.FLOAT],transactionId:[4,e.TYPES.INT64],transactionStatus:[5,e.TYPES.INT32]},b.name="MiTransportAdminMessage$XmatThreadQuickReaction",b.internalSpec={threadQuickReactionEmoji:[1,e.TYPES.STRING],threadQuickReactionInstructionKeyId:[2,e.TYPES.STRING]},v.name="MiTransportAdminMessage$XmatThreadNickname",v.internalSpec={participantId:[1,e.TYPES.INT64],nickname:[2,e.TYPES.STRING]},S.name="MiTransportAdminMessage$XmatThreadIcon",S.internalSpec={threadIcon:[1,e.TYPES.STRING]},R.name="MiTransportAdminMessage$XmatThemeColor",R.internalSpec={themeId:[1,e.TYPES.STRING],themeColor:[2,e.TYPES.STRING],gradient:[3,e.FLAGS.REPEATED|e.TYPES.STRING],shouldShowIcon:[4,e.TYPES.BOOL],themeType:[5,e.TYPES.INT32],accessibilityLabel:[6,e.TYPES.STRING],themeNameWithSubtitle:[7,e.TYPES.STRING],themeEmoji:[8,e.TYPES.STRING]},L.name="MiTransportAdminMessage$XmatMessengerSharedAlbum",L.internalSpec={xmaDataclass:[1,e.TYPES.STRING]},E.name="MiTransportAdminMessage$XmatMessengerSharedAlbumRename",E.internalSpec={sharedAlbumId:[1,e.TYPES.INT64],oldAlbumTitle:[2,e.TYPES.STRING],newAlbumTitle:[3,e.TYPES.STRING]},k.name="MiTransportAdminMessage$XmatMessengerSharedAlbumDeletion",k.internalSpec={sharedAlbumId:[1,e.TYPES.INT64],albumTitle:[2,e.TYPES.STRING]},I.name="MiTransportAdminMessage$XmatMessengerSharedAlbumContentRemoval",I.internalSpec={sharedAlbumId:[1,e.TYPES.INT64],removedContentMap:[2,e.FLAGS.REPEATED|e.TYPES.MESSAGE,T],removedContentCount:[3,e.TYPES.INT64],albumTitle:[4,e.TYPES.STRING]},T.name="MiTransportAdminMessage$XmatMessengerSharedAlbumContentRemoval$RemovedContentTuple",T.internalSpec={key:[1,e.TYPES.INT64],value:[2,e.TYPES.STRING]},D.name="MiTransportAdminMessage$XmatMessengerSharedAlbumAddition",D.internalSpec={sharedAlbumId:[1,e.TYPES.INT64],albumTitle:[2,e.TYPES.STRING],numOfAttachments:[3,e.TYPES.INT64],isAlbumCreation:[4,e.TYPES.BOOL]},x.name="MiTransportAdminMessage$XmatMessengerQRCodeScanned",x.internalSpec={receiverName:[1,e.TYPES.STRING],senderName:[2,e.TYPES.STRING]},$.name="MiTransportAdminMessage$XmatMessagingLimitSharing",$.internalSpec={senderName:[1,e.TYPES.STRING],senderId:[2,e.TYPES.STRING],limitSharingType:[3,e.TYPES.STRING]},P.name="MiTransportAdminMessage$XmatMagicWords",P.internalSpec={newMagicWordCount:[1,e.TYPES.INT64],removedMagicWordCount:[2,e.TYPES.INT64],magicWord:[3,e.TYPES.STRING],emojiEffect:[4,e.TYPES.STRING],isAllEdited:[5,e.TYPES.BOOL],themeName:[6,e.TYPES.STRING]},N.name="MiTransportAdminMessage$XmatLinkCTA",N.internalSpec={linkCtaXmatPrimaryText:[1,e.TYPES.STRING],linkCtaXmatCtaText:[2,e.TYPES.STRING],linkCtaXmatCtaUrl:[3,e.TYPES.STRING],linkCtaXmatCtaIosUrl:[4,e.TYPES.STRING],androidUri:[5,e.TYPES.STRING],asyncUrl:[6,e.TYPES.STRING],wwwIsAsyncUrl:[7,e.TYPES.BOOL],msiteEnabled:[8,e.TYPES.BOOL],hideUriInFallback:[9,e.TYPES.BOOL],showConfirmationDialog:[10,e.TYPES.BOOL],graphPayload:[11,e.TYPES.STRING],identifierName:[12,e.TYPES.STRING],threadId:[13,e.TYPES.STRING],hideCtaInFallback:[14,e.TYPES.BOOL],ctxAdConversationStarterInfo:[15,e.TYPES.STRING],fbmUri:[16,e.TYPES.STRING],initiatorUserId:[17,e.TYPES.STRING]},M.name="MiTransportAdminMessage$XmatInstantGameEncryptedDynamicCustomUpdate",M.internalSpec={senderName:[1,e.TYPES.STRING],muteManagementAdminTextType:[2,e.TYPES.STRING],gameName:[3,e.TYPES.STRING]},w.name="MiTransportAdminMessage$XmatFriendRequestConfirmedEncrypted",w.internalSpec={otherUserName:[1,e.TYPES.STRING],isTurnOnCohort:[2,e.TYPES.STRING],userWhoAcceptedFriendRequest:[3,e.TYPES.STRING]},A.name="MiTransportAdminMessage$XmatDisappearingSetting",A.internalSpec={disappearingSettingTime:[1,e.TYPES.INT64],oldDisappearingSettingTime:[2,e.TYPES.INT64],disappearingSettingActorFbid:[3,e.TYPES.INT64],newEphemeralityType:[4,e.TYPES.INT64],oldEphemeralityType:[5,e.TYPES.INT64]},F.name="MiTransportAdminMessage$LimitSharingChanged",F.internalSpec={sharingType:[1,e.TYPES.ENUM,u]},O.name="MiTransportAdminMessage$DisappearingSettingChanged",O.internalSpec={disappearingSettingDurationSeconds:[1,e.TYPES.INT32],oldDisappearingSettingDurationSeconds:[2,e.TYPES.INT32]},B.name="MiTransportAdminMessage$IconChanged",B.internalSpec={threadIcon:[1,e.TYPES.STRING]},W.name="MiTransportAdminMessage$LinkCta",W.internalSpec={ukOsaAdminText:[1,e.TYPES.MESSAGE,q],__oneofs__:{content:["ukOsaAdminText"]}},q.name="MiTransportAdminMessage$LinkCta$UkOsaAdminText",q.internalSpec={initiatorUserId:[2,e.TYPES.STRING]},U.name="MiTransportAdminMessage$QuickReactionChanged",U.internalSpec={emojiName:[1,e.TYPES.STRING]},V.name="MiTransportAdminMessage$GroupImageChanged",V.internalSpec={action:[1,e.TYPES.ENUM,c]},H.name="MiTransportAdminMessage$MessagePinned",H.internalSpec={action:[1,e.TYPES.ENUM,d]},G.name="MiTransportAdminMessage$GroupMembershipAddModeChanged",G.internalSpec={mode:[1,e.TYPES.ENUM,m]},z.name="MiTransportAdminMessage$GroupNameChanged",z.internalSpec={groupName:[1,e.TYPES.STRING]},j.name="MiTransportAdminMessage$GroupAdminChanged",j.internalSpec={targetUserId:[1,e.FLAGS.REPEATED|e.TYPES.STRING],action:[2,e.TYPES.ENUM,p]},K.name="MiTransportAdminMessage$GroupParticipantChanged",K.internalSpec={targetUserId:[1,e.FLAGS.REPEATED|e.TYPES.STRING],action:[2,e.TYPES.ENUM,_]},Q.name="MiTransportAdminMessage$NicknameChanged",Q.internalSpec={targetUserId:[1,e.TYPES.STRING],nickname:[2,e.TYPES.STRING]},X.name="MiTransportAdminMessage$ChatThemeChanged",X.internalSpec={themeName:[1,e.TYPES.STRING],themeEmoji:[2,e.TYPES.STRING],themeType:[3,e.TYPES.INT32]},l.MiTransportAdminMessage$LimitSharingChanged$SharingType=u,l.MiTransportAdminMessage$GroupImageChanged$Action=c,l.MiTransportAdminMessage$MessagePinned$Action=d,l.MiTransportAdminMessage$GroupMembershipAddModeChanged$Mode=m,l.MiTransportAdminMessage$GroupAdminChanged$Action=p,l.MiTransportAdminMessage$GroupParticipantChanged$Action=_,l.MiTransportAdminMessageSpec=f,l.MiTransportAdminMessage$XmatGenAITaskAddSpec=g,l.MiTransportAdminMessage$XmatUnpinMessageV2Spec=h,l.MiTransportAdminMessage$XmatPinMessageV2Spec=y,l.MiTransportAdminMessage$XmatUpdatePaymentsSpec=C,l.MiTransportAdminMessage$XmatThreadQuickReactionSpec=b,l.MiTransportAdminMessage$XmatThreadNicknameSpec=v,l.MiTransportAdminMessage$XmatThreadIconSpec=S,l.MiTransportAdminMessage$XmatThemeColorSpec=R,l.MiTransportAdminMessage$XmatMessengerSharedAlbumSpec=L,l.MiTransportAdminMessage$XmatMessengerSharedAlbumRenameSpec=E,l.MiTransportAdminMessage$XmatMessengerSharedAlbumDeletionSpec=k,l.MiTransportAdminMessage$XmatMessengerSharedAlbumContentRemovalSpec=I,l.MiTransportAdminMessage$XmatMessengerSharedAlbumContentRemoval$RemovedContentTupleSpec=T,l.MiTransportAdminMessage$XmatMessengerSharedAlbumAdditionSpec=D,l.MiTransportAdminMessage$XmatMessengerQRCodeScannedSpec=x,l.MiTransportAdminMessage$XmatMessagingLimitSharingSpec=$,l.MiTransportAdminMessage$XmatMagicWordsSpec=P,l.MiTransportAdminMessage$XmatLinkCTASpec=N,l.MiTransportAdminMessage$XmatInstantGameEncryptedDynamicCustomUpdateSpec=M,l.MiTransportAdminMessage$XmatFriendRequestConfirmedEncryptedSpec=w,l.MiTransportAdminMessage$XmatDisappearingSettingSpec=A,l.MiTransportAdminMessage$LimitSharingChangedSpec=F,l.MiTransportAdminMessage$DisappearingSettingChangedSpec=O,l.MiTransportAdminMessage$IconChangedSpec=B,l.MiTransportAdminMessage$LinkCtaSpec=W,l.MiTransportAdminMessage$LinkCta$UkOsaAdminTextSpec=q,l.MiTransportAdminMessage$QuickReactionChangedSpec=U,l.MiTransportAdminMessage$GroupImageChangedSpec=V,l.MiTransportAdminMessage$MessagePinnedSpec=H,l.MiTransportAdminMessage$GroupMembershipAddModeChangedSpec=G,l.MiTransportAdminMessage$GroupNameChangedSpec=z,l.MiTransportAdminMessage$GroupAdminChangedSpec=j,l.MiTransportAdminMessage$GroupParticipantChangedSpec=K,l.MiTransportAdminMessage$NicknameChangedSpec=Q,l.MiTransportAdminMessage$ChatThemeChangedSpec=X}),98);
__d("WAArmadilloTransportEvent.pb",["$InternalEnum","WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s=n("$InternalEnum")({NONE:0,DETECTED:1,CLEARED:2}),u=n("$InternalEnum")({NONE:0,ADDED:1,REMOVED:2,REPLACED:3}),c=n("$InternalEnum")({DECRYPTION_FAILURE:1,UNAVAILABLE_MESSAGE:2}),d={},m={},p={},_={},f={};d.name="TransportEvent",d.internalSpec={placeholder:[1,(e=o("WAProtoConst")).TYPES.MESSAGE,f],event:[2,e.TYPES.MESSAGE,m],__oneofs__:{content:["placeholder","event"]}},m.name="TransportEvent$Event",m.internalSpec={deviceChange:[1,e.TYPES.MESSAGE,_],icdcAlert:[2,e.TYPES.MESSAGE,p],__oneofs__:{event:["deviceChange","icdcAlert"]}},p.name="TransportEvent$Event$IcdcAlert",p.internalSpec={type:[1,e.TYPES.ENUM,s]},_.name="TransportEvent$Event$DeviceChange",_.internalSpec={type:[1,e.TYPES.ENUM,u],deviceName:[2,e.TYPES.STRING],devicePlatform:[3,e.TYPES.STRING],deviceModel:[4,e.TYPES.STRING]},f.name="TransportEvent$Placeholder",f.internalSpec={type:[1,e.TYPES.ENUM,c]},l.TransportEvent$Event$IcdcAlert$Type=s,l.TransportEvent$Event$DeviceChange$Type=u,l.TransportEvent$Placeholder$Type=c,l.TransportEventSpec=d,l.TransportEvent$EventSpec=m,l.TransportEvent$Event$IcdcAlertSpec=p,l.TransportEvent$Event$DeviceChangeSpec=_,l.TransportEvent$PlaceholderSpec=f}),98);
__d("WAConsumerApplication.pb",["WACommon.pb","WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s,u={SMALL:1,MEDIUM:2,LARGE:3},c={SANS_SERIF:0,SERIF:1,NORICAN_REGULAR:2,BRYNDAN_WRITE:3,BEBASNEUE_REGULAR:4,OSWALD_HEAVY:5},d={NONE:0,VIDEO:1},m={},p={},_={},f={},g={},h={},y={},C={},b={},v={},S={},R={},L={},E={},k={},I={},T={},D={},x={},$={},P={},N={},M={},w={},A={},F={},O={},B={},W={},q={},U={},V={},H={};m.name="ConsumerApplication",m.internalSpec={payload:[1,(e=o("WAProtoConst")).TYPES.MESSAGE,p],metadata:[2,e.TYPES.MESSAGE,f]},p.name="ConsumerApplication$Payload",p.internalSpec={content:[1,e.TYPES.MESSAGE,y],applicationData:[2,e.TYPES.MESSAGE,h],signal:[3,e.TYPES.MESSAGE,g],subProtocol:[4,e.TYPES.MESSAGE,_],__oneofs__:{payload:["content","applicationData","signal","subProtocol"]}},_.name="ConsumerApplication$SubProtocolPayload",_.internalSpec={futureProof:[1,e.TYPES.ENUM,(s=o("WACommon.pb")).FUTURE_PROOF_BEHAVIOR]},f.name="ConsumerApplication$Metadata",f.internalSpec={specialTextSize:[1,e.TYPES.ENUM,u]},g.name="ConsumerApplication$Signal",g.internalSpec={},h.name="ConsumerApplication$ApplicationData",h.internalSpec={revoke:[1,e.TYPES.MESSAGE,I],__oneofs__:{applicationContent:["revoke"]}},y.name="ConsumerApplication$Content",y.internalSpec={messageText:[1,e.TYPES.MESSAGE,s.MessageTextSpec],imageMessage:[2,e.TYPES.MESSAGE,W],contactMessage:[3,e.TYPES.MESSAGE,P],locationMessage:[4,e.TYPES.MESSAGE,w],extendedTextMessage:[5,e.TYPES.MESSAGE,M],statusTextMessage:[6,e.TYPES.MESSAGE,N],documentMessage:[7,e.TYPES.MESSAGE,F],audioMessage:[8,e.TYPES.MESSAGE,B],videoMessage:[9,e.TYPES.MESSAGE,O],contactsArrayMessage:[10,e.TYPES.MESSAGE,$],liveLocationMessage:[11,e.TYPES.MESSAGE,x],stickerMessage:[12,e.TYPES.MESSAGE,A],groupInviteMessage:[13,e.TYPES.MESSAGE,D],viewOnceMessage:[14,e.TYPES.MESSAGE,T],reactionMessage:[16,e.TYPES.MESSAGE,k],pollCreationMessage:[17,e.TYPES.MESSAGE,L],pollUpdateMessage:[18,e.TYPES.MESSAGE,R],editMessage:[19,e.TYPES.MESSAGE,C],__oneofs__:{content:["messageText","imageMessage","contactMessage","locationMessage","extendedTextMessage","statusTextMessage","documentMessage","audioMessage","videoMessage","contactsArrayMessage","liveLocationMessage","stickerMessage","groupInviteMessage","viewOnceMessage","reactionMessage","pollCreationMessage","pollUpdateMessage","editMessage"]}},C.name="ConsumerApplication$EditMessage",C.internalSpec={key:[1,e.TYPES.MESSAGE,s.MessageKeySpec],message:[2,e.TYPES.MESSAGE,s.MessageTextSpec],timestampMs:[3,e.TYPES.INT64]},b.name="ConsumerApplication$PollAddOptionMessage",b.internalSpec={pollOption:[1,e.FLAGS.REPEATED|e.TYPES.MESSAGE,E]},v.name="ConsumerApplication$PollVoteMessage",v.internalSpec={selectedOptions:[1,e.FLAGS.REPEATED|e.TYPES.BYTES],senderTimestampMs:[2,e.TYPES.INT64]},S.name="ConsumerApplication$PollEncValue",S.internalSpec={encPayload:[1,e.TYPES.BYTES],encIv:[2,e.TYPES.BYTES]},R.name="ConsumerApplication$PollUpdateMessage",R.internalSpec={pollCreationMessageKey:[1,e.TYPES.MESSAGE,s.MessageKeySpec],vote:[2,e.TYPES.MESSAGE,S],addOption:[3,e.TYPES.MESSAGE,S]},L.name="ConsumerApplication$PollCreationMessage",L.internalSpec={encKey:[1,e.TYPES.BYTES],name:[2,e.TYPES.STRING],options:[3,e.FLAGS.REPEATED|e.TYPES.MESSAGE,E],selectableOptionsCount:[4,e.TYPES.UINT32]},E.name="ConsumerApplication$Option",E.internalSpec={optionName:[1,e.TYPES.STRING]},k.name="ConsumerApplication$ReactionMessage",k.internalSpec={key:[1,e.TYPES.MESSAGE,s.MessageKeySpec],text:[2,e.TYPES.STRING],groupingKey:[3,e.TYPES.STRING],senderTimestampMs:[4,e.TYPES.INT64],reactionMetadataDataclassData:[5,e.TYPES.STRING],style:[6,e.TYPES.INT32]},I.name="ConsumerApplication$RevokeMessage",I.internalSpec={key:[1,e.TYPES.MESSAGE,s.MessageKeySpec]},T.name="ConsumerApplication$ViewOnceMessage",T.internalSpec={imageMessage:[1,e.TYPES.MESSAGE,W],videoMessage:[2,e.TYPES.MESSAGE,O],__oneofs__:{viewOnceContent:["imageMessage","videoMessage"]}},D.name="ConsumerApplication$GroupInviteMessage",D.internalSpec={groupJid:[1,e.TYPES.STRING],inviteCode:[2,e.TYPES.STRING],inviteExpiration:[3,e.TYPES.INT64],groupName:[4,e.TYPES.STRING],jpegThumbnail:[5,e.TYPES.BYTES],caption:[6,e.TYPES.MESSAGE,s.MessageTextSpec]},x.name="ConsumerApplication$LiveLocationMessage",x.internalSpec={location:[1,e.TYPES.MESSAGE,V],accuracyInMeters:[2,e.TYPES.UINT32],speedInMps:[3,e.TYPES.FLOAT],degreesClockwiseFromMagneticNorth:[4,e.TYPES.UINT32],caption:[5,e.TYPES.MESSAGE,s.MessageTextSpec],sequenceNumber:[6,e.TYPES.INT64],timeOffset:[7,e.TYPES.UINT32]},$.name="ConsumerApplication$ContactsArrayMessage",$.internalSpec={displayName:[1,e.TYPES.STRING],contacts:[2,e.FLAGS.REPEATED|e.TYPES.MESSAGE,P]},P.name="ConsumerApplication$ContactMessage",P.internalSpec={contact:[1,e.TYPES.MESSAGE,s.SubProtocolSpec]},N.name="ConsumerApplication$StatusTextMesage",N.internalSpec={text:[1,e.TYPES.MESSAGE,M],textArgb:[6,e.TYPES.FIXED32],backgroundArgb:[7,e.TYPES.FIXED32],font:[8,e.TYPES.ENUM,c]},M.name="ConsumerApplication$ExtendedTextMessage",M.internalSpec={text:[1,e.TYPES.MESSAGE,s.MessageTextSpec],matchedText:[2,e.TYPES.STRING],canonicalUrl:[3,e.TYPES.STRING],description:[4,e.TYPES.STRING],title:[5,e.TYPES.STRING],thumbnail:[6,e.TYPES.MESSAGE,s.SubProtocolSpec],previewType:[7,e.TYPES.ENUM,d]},w.name="ConsumerApplication$LocationMessage",w.internalSpec={location:[1,e.TYPES.MESSAGE,V],address:[2,e.TYPES.STRING]},A.name="ConsumerApplication$StickerMessage",A.internalSpec={sticker:[1,e.TYPES.MESSAGE,s.SubProtocolSpec]},F.name="ConsumerApplication$DocumentMessage",F.internalSpec={document:[1,e.TYPES.MESSAGE,s.SubProtocolSpec],fileName:[2,e.TYPES.STRING]},O.name="ConsumerApplication$VideoMessage",O.internalSpec={video:[1,e.TYPES.MESSAGE,s.SubProtocolSpec],caption:[2,e.TYPES.MESSAGE,s.MessageTextSpec]},B.name="ConsumerApplication$AudioMessage",B.internalSpec={audio:[1,e.TYPES.MESSAGE,s.SubProtocolSpec],ptt:[2,e.TYPES.BOOL]},W.name="ConsumerApplication$ImageMessage",W.internalSpec={image:[1,e.TYPES.MESSAGE,s.SubProtocolSpec],caption:[2,e.TYPES.MESSAGE,s.MessageTextSpec]},q.name="ConsumerApplication$InteractiveAnnotation",q.internalSpec={polygonVertices:[1,e.FLAGS.REPEATED|e.TYPES.MESSAGE,U],location:[2,e.TYPES.MESSAGE,V],__oneofs__:{action:["location"]}},U.name="ConsumerApplication$Point",U.internalSpec={x:[1,e.TYPES.DOUBLE],y:[2,e.TYPES.DOUBLE]},V.name="ConsumerApplication$Location",V.internalSpec={degreesLatitude:[1,e.TYPES.DOUBLE],degreesLongitude:[2,e.TYPES.DOUBLE],name:[3,e.TYPES.STRING]},H.name="ConsumerApplication$MediaPayload",H.internalSpec={protocol:[1,e.TYPES.MESSAGE,s.SubProtocolSpec]},l.CONSUMER_APPLICATION_METADATA_SPECIAL_TEXT_SIZE=u,l.CONSUMER_APPLICATION_STATUS_TEXT_MESAGE_FONT_TYPE=c,l.CONSUMER_APPLICATION_EXTENDED_TEXT_MESSAGE_PREVIEW_TYPE=d,l.ConsumerApplicationSpec=m,l.ConsumerApplication$PayloadSpec=p,l.ConsumerApplication$SubProtocolPayloadSpec=_,l.ConsumerApplication$MetadataSpec=f,l.ConsumerApplication$SignalSpec=g,l.ConsumerApplication$ApplicationDataSpec=h,l.ConsumerApplication$ContentSpec=y,l.ConsumerApplication$EditMessageSpec=C,l.ConsumerApplication$PollAddOptionMessageSpec=b,l.ConsumerApplication$PollVoteMessageSpec=v,l.ConsumerApplication$PollEncValueSpec=S,l.ConsumerApplication$PollUpdateMessageSpec=R,l.ConsumerApplication$PollCreationMessageSpec=L,l.ConsumerApplication$OptionSpec=E,l.ConsumerApplication$ReactionMessageSpec=k,l.ConsumerApplication$RevokeMessageSpec=I,l.ConsumerApplication$ViewOnceMessageSpec=T,l.ConsumerApplication$GroupInviteMessageSpec=D,l.ConsumerApplication$LiveLocationMessageSpec=x,l.ConsumerApplication$ContactsArrayMessageSpec=$,l.ConsumerApplication$ContactMessageSpec=P,l.ConsumerApplication$StatusTextMesageSpec=N,l.ConsumerApplication$ExtendedTextMessageSpec=M,l.ConsumerApplication$LocationMessageSpec=w,l.ConsumerApplication$StickerMessageSpec=A,l.ConsumerApplication$DocumentMessageSpec=F,l.ConsumerApplication$VideoMessageSpec=O,l.ConsumerApplication$AudioMessageSpec=B,l.ConsumerApplication$ImageMessageSpec=W,l.ConsumerApplication$InteractiveAnnotationSpec=q,l.ConsumerApplication$PointSpec=U,l.ConsumerApplication$LocationSpec=V,l.ConsumerApplication$MediaPayloadSpec=H}),98);
__d("WAMsgApplication.pb",["WACommon.pb","WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s,u={DEFAULT:0,VANISH_MODE:1,DISAPPEARING_MESSAGES:2},c={UNKNOWN:0,SEEN_ONCE:1,SEEN_BASED_WITH_TIMER:2,SEND_BASED_WITH_TIMER:3},d={},m={},p={},_={},f={},g={},h={},y={},C={},b={};d.name="MessageApplication",d.internalSpec={payload:[1,(e=o("WAProtoConst")).TYPES.MESSAGE,f],metadata:[2,e.TYPES.MESSAGE,m]},m.name="MessageApplication$Metadata",m.internalSpec={forwardingScore:[5,e.TYPES.UINT32],isForwarded:[6,e.TYPES.BOOL],businessMetadata:[7,e.TYPES.MESSAGE,(s=o("WACommon.pb")).SubProtocolSpec],frankingKey:[8,e.TYPES.BYTES],frankingVersion:[9,e.TYPES.INT32],quotedMessage:[10,e.TYPES.MESSAGE,p],threadType:[11,e.TYPES.ENUM,u],readonlyMetadataDataclass:[12,e.TYPES.STRING],groupId:[13,e.TYPES.STRING],groupSize:[14,e.TYPES.UINT32],groupIndex:[15,e.TYPES.UINT32],botResponseId:[16,e.TYPES.STRING],collapsibleId:[17,e.TYPES.STRING],secondaryOtid:[18,e.TYPES.STRING],chatEphemeralSetting:[1,e.TYPES.MESSAGE,b],ephemeralSettingList:[2,e.TYPES.MESSAGE,_],ephemeralSharedSecret:[3,e.TYPES.BYTES],__oneofs__:{ephemeral:["chatEphemeralSetting","ephemeralSettingList","ephemeralSharedSecret"]}},p.name="MessageApplication$Metadata$QuotedMessage",p.internalSpec={stanzaId:[1,e.TYPES.STRING],remoteJid:[2,e.TYPES.STRING],participant:[3,e.TYPES.STRING],payload:[4,e.TYPES.MESSAGE,f]},_.name="MessageApplication$Metadata$EphemeralSettingMap",_.internalSpec={chatJid:[1,e.TYPES.STRING],ephemeralSetting:[2,e.TYPES.MESSAGE,b]},f.name="MessageApplication$Payload",f.internalSpec={coreContent:[1,e.TYPES.MESSAGE,C],signal:[2,e.TYPES.MESSAGE,y],applicationData:[3,e.TYPES.MESSAGE,h],subProtocol:[4,e.TYPES.MESSAGE,g],__oneofs__:{content:["coreContent","signal","applicationData","subProtocol"]}},g.name="MessageApplication$SubProtocolPayload",g.internalSpec={futureProof:[1,e.TYPES.ENUM,s.FUTURE_PROOF_BEHAVIOR],consumerMessage:[2,e.TYPES.MESSAGE,s.SubProtocolSpec],businessMessage:[3,e.TYPES.MESSAGE,s.SubProtocolSpec],paymentMessage:[4,e.TYPES.MESSAGE,s.SubProtocolSpec],multiDevice:[5,e.TYPES.MESSAGE,s.SubProtocolSpec],voip:[6,e.TYPES.MESSAGE,s.SubProtocolSpec],armadillo:[7,e.TYPES.MESSAGE,s.SubProtocolSpec],__oneofs__:{subProtocol:["consumerMessage","businessMessage","paymentMessage","multiDevice","voip","armadillo"]}},h.name="MessageApplication$ApplicationData",h.internalSpec={},y.name="MessageApplication$Signal",y.internalSpec={},C.name="MessageApplication$Content",C.internalSpec={},b.name="MessageApplication$EphemeralSetting",b.internalSpec={ephemeralExpiration:[2,e.TYPES.UINT32],ephemeralSettingTimestamp:[3,e.TYPES.INT64],ephemeralityType:[5,e.TYPES.ENUM,c],isEphemeralSettingReset:[4,e.TYPES.BOOL]},l.MESSAGE_APPLICATION_METADATA_THREAD_TYPE=u,l.MESSAGE_APPLICATION_EPHEMERAL_SETTING_EPHEMERALITY_TYPE=c,l.MessageApplicationSpec=d,l.MessageApplication$MetadataSpec=m,l.MessageApplication$Metadata$QuotedMessageSpec=p,l.MessageApplication$Metadata$EphemeralSettingMapSpec=_,l.MessageApplication$PayloadSpec=f,l.MessageApplication$SubProtocolPayloadSpec=g,l.MessageApplication$ApplicationDataSpec=h,l.MessageApplication$SignalSpec=y,l.MessageApplication$ContentSpec=C,l.MessageApplication$EphemeralSettingSpec=b}),98);
__d("WAParseMessageApplication",["decodeProtobuf"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n,r,a=e.payload;if(a==null)return{version:"v3",type:"error",error:"The messageApplication has no payload"};if(o("decodeProtobuf").getUnknownFields(e.payload)!=null)return{version:"v3",type:"error",error:"There are unknown fields in the message application payload"};var i=a.subProtocol;if(i==null)return{version:"v3",type:"error",error:"The messageApplication payload has no subProtocol"};if(o("decodeProtobuf").getUnknownFields(i)!=null)return{version:"v3",type:"error",error:"messageApplication subProtocol has unknown fields",futureProof:i.futureProof};var l=[],s=(t=e.payload)==null||(t=t.subProtocol)==null?void 0:t.consumerMessage,u=(n=e.payload)==null||(n=n.subProtocol)==null?void 0:n.armadillo,c=(r=e.payload)==null||(r=r.subProtocol)==null?void 0:r.multiDevice;if(s!=null){if(s.payload==null)return{version:"v3",type:"error",error:"subprotocol of type consumerMessage has no payload"};l.push({payload:new Uint8Array(s.payload),type:"success",subprotocolType:"consumerMessage"})}if(u!=null){if(u.payload==null)return{version:"v3",type:"error",error:"subprotocol of type armadillo has no payload"};l.push({payload:new Uint8Array(u.payload),type:"success",subprotocolType:"armadillo"})}if(c!=null){if(c.payload==null)return{version:"v3",type:"error",error:"subprotocol of type multiDevice has no payload"};l.push({payload:new Uint8Array(c.payload),type:"success",subprotocolType:"multiDevice"})}return l.length!==1?{version:"v3",type:"error",error:"Wrong number of subprotocols: "+l.length}:l[0]}l.parseMessageApplication=e}),98);
__d("lastx",["invariant"],(function(t,n,r,o,a,i,l,s){"use strict";function e(e){var t=null;if(Array.isArray(e))e.length&&(t={value:e[e.length-1]});else for(var n of e)t=t||{},t.value=n;if(t)return t.value;s(0,1145)}l.default=e}),98);
__d("MultiKeyMap",["invariant","lastx"],(function(t,n,r,o,a,i,l,s){"use strict";var e=typeof WeakMap=="function",u=(function(){function t(){this.$1=this.$2(),this.$3=null}var n=t.prototype;return n.set=function(t,n){this.$4(t);for(var e=this.$1,r=0;r<t.length-1;r++){var o=t[r],a=this.$5(e,o).get(o);a==null&&(a=this.$2(),this.$5(e,o).set(o,a)),a.type==="map"||s(0,1732),e=a}var i=t[t.length-1];this.$5(e,i).set(i,{type:"value",value:n})},n.get=function(t){this.$4(t);var e=this.$6(t),n=e&&e.get(r("lastx")(t));return n==null||n.type!=="value"?void 0:n.value},n.delete=function(t){this.$4(t);var e=this.$6(t);return e?e.delete(r("lastx")(t)):!1},n.$5=function(t,n){return c(n)?t.cache:t.weakCache},n.$6=function(t){for(var e=this.$1,n=0;n<t.length-1;n++){var o,a=t[n];if(((o=e)==null?void 0:o.type)==="map")e=this.$5(e,a).get(a);else return}var i=r("lastx")(t),l=e&&this.$5(e,i);return l},n.$2=function(){return{type:"map",cache:new Map,weakCache:e?new WeakMap:new Map}},n.$4=function(t){if(this.$3==null&&(this.$3=t.length),this.$3!==t.length)throw new Error("MultiKeyMap called with different number of keys");if(t.length<1)throw new Error("MultiKeyMap called with empty array of keys")},t})();function c(e){var t=typeof e;return t==="bigint"||t==="boolean"||t==="number"||t==="string"||e==null}l.default=u}),98);
__d("memoizeWithArgsWeak",["MultiKeyMap"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){t===void 0&&(t="");var n=new(r("MultiKeyMap"));return function(){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];var a=n.get(r);if(a!==void 0)return a;var i=e.apply(void 0,r);return n.set(r,i),i}}l.default=e}),98);
__d("MAWProtobufDeserializers",["FBLogger","WAArmadilloApplication.pb","WAArmadilloBackupMessage.pb","WAArmadilloLocallyTransformedMessage.pb","WAArmadilloMiTransportAdminMessage.pb","WAArmadilloTransportEvent.pb","WAByteArray","WAConsumerApplication.pb","WAMediaTransport.pb","WAMsgApplication.pb","WAParseMessageApplication","decodeProtobuf","memoize","memoizeWithArgsWeak","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";function e(e){throw new TypeError('"'+e+'" is read-only')}function s(e){return e instanceof ArrayBuffer?e:o("WAByteArray").uint8ArrayToBuffer(e)}var u=function(t){var e;this.kind="imageTransport",this.payload=o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").ImageTransportSpec,(e=t.image)==null?void 0:e.payload)},c=function(t){var e;this.kind="audioTransport",this.payload=o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").AudioTransportSpec,(e=t.audio)==null?void 0:e.payload),this.ptt=t.ptt},d=function(t){var e,n,r;this.kind="videoTransport",this.payload=o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").VideoTransportSpec,(e=t.video)==null?void 0:e.payload),this.caption=t.caption,this.gifPlayback=(n=(r=this.payload)==null||(r=r.ancillary)==null?void 0:r.gifPlayback)!=null?n:!1},m=function(t){var e;this.kind="documentTransport",this.payload=o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").DocumentTransportSpec,(e=t.document)==null?void 0:e.payload),this.fileName=t.fileName},p=function(t){var e;this.kind="stickerTransport",this.payload=o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").StickerTransportSpec,(e=t.sticker)==null?void 0:e.payload)},_=function(t){var e=this,n;this.kind="extendedContentMessage",this.favicon=(n=r("memoize"))(function(){var t,n;return((t=e.payload)==null||(t=t.favicon)==null?void 0:t.payload)==null?null:o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").ImageTransportSpec,(n=e.payload)==null||(n=n.favicon)==null?void 0:n.payload)}),this.headerImage=n(function(){var t,n;return((t=e.payload)==null||(t=t.headerImage)==null?void 0:t.payload)==null?null:o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").ImageTransportSpec,(n=e.payload)==null||(n=n.headerImage)==null?void 0:n.payload)}),this.previews=n(function(){var t,n;return(t=(n=e.payload)==null||(n=n.previews)==null?void 0:n.map(function(e){return o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").ImageTransportSpec,e.payload)}))!=null?t:[]}),this.associatedMessage=n(function(){var t=e.payload.associatedMessage;return(t==null?void 0:t.payload)==null?null:new y(t.payload)}),this.payload=t},f=function(t){var e=this;this.stickerContent=r("memoize")(function(){var t,n=(t=e.payload)==null?void 0:t.stickerContent;return n==null?null:o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").StickerTransportSpec,n.payload)}),this.videoContent=r("memoize")(function(){var t,n=(t=e.payload)==null?void 0:t.videoContent;return n==null?null:o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").VideoTransportSpec,n.payload)}),this.payload=t},g=(function(){function e(e){this.kind="armadillo",this.bytes=s(e),this.proto=o("decodeProtobuf").decodeProtobuf(o("WAArmadilloApplication.pb").ArmadilloSpec,e),this.payload=this.proto.payload,this.metadata=this.proto.metadata}var t=e.prototype;return t.extendedContentMessage=function(){var e,t=(e=this.payload)==null||(e=e.content)==null?void 0:e.extendedContentMessage;return t==null?null:new _(t)},t.noteReply=function(){var e,t=(e=this.payload)==null||(e=e.content)==null?void 0:e.noteReplyMessage;return t==null?null:new f(t)},t.paymentsTransactionMessage=function(){var e,t=(e=this.payload)==null||(e=e.content)==null||(e=e.paymentsTransactionMessage)==null?void 0:e.extendedContentMessage;return t==null?null:new _(t)},e})(),h=(function(){function e(e){var t=this,n;this.kind="consumerApplication",this.imageMessage=(n=r("memoize"))(function(){var e,n=(e=t.payload)==null||(e=e.content)==null?void 0:e.imageMessage;if(n!=null)return new u(n)}),this.audioMessage=n(function(){var e,n=(e=t.payload)==null||(e=e.content)==null?void 0:e.audioMessage;if(n!=null)return new c(n)}),this.videoMessage=n(function(){var e,n=(e=t.payload)==null||(e=e.content)==null?void 0:e.videoMessage;if(n!=null)return new d(n)}),this.documentMessage=n(function(){var e,n=(e=t.payload)==null||(e=e.content)==null?void 0:e.documentMessage;if(n!=null)return new m(n)}),this.stickerMessage=n(function(){var e,n=(e=t.payload)==null||(e=e.content)==null?void 0:e.stickerMessage;if(n!=null)return new p(n)}),this.bytes=s(e),this.proto=o("decodeProtobuf").decodeProtobuf(o("WAConsumerApplication.pb").ConsumerApplicationSpec,e),this.payload=this.proto.payload,this.metadata=this.proto.metadata}var t=e.prototype;return t.attachmentMessage=function(){var e,t,n,r;return(e=(t=(n=(r=this.imageMessage())!=null?r:this.audioMessage())!=null?n:this.videoMessage())!=null?t:this.documentMessage())!=null?e:this.stickerMessage()},e})(),y=(function(){function e(e){var t=this;this.kind="messageApplication",this.subProtocol=r("memoize")(function(){var e=o("WAParseMessageApplication").parseMessageApplication(t.proto);if(e.payload!=null){var n=e.payload;switch(e.subprotocolType){case"consumerMessage":return new h(n);case"armadillo":return new g(n);case"businessMessage":case"paymentMessage":case"multiDevice":case"voip":break;default:e.subprotocolType}}}),this.bytes=s(e),this.proto=o("decodeProtobuf").decodeProtobuf(o("WAMsgApplication.pb").MessageApplicationSpec,e)}var t=e.prototype;return t.consumerMessage=function(){var e=this.subProtocol();return(e==null?void 0:e.kind)!=="consumerApplication"?null:e},t.armadillo=function(){var e=this.subProtocol();return(e==null?void 0:e.kind)!=="armadillo"?null:e},e})(),C=function(t){this.kind="transportEvent",this.proto=o("decodeProtobuf").decodeProtobuf(o("WAArmadilloTransportEvent.pb").TransportEventSpec,t)},b=function(t){this.kind="locallyTransformedMessage",this.proto=o("decodeProtobuf").decodeProtobuf(o("WAArmadilloLocallyTransformedMessage.pb").LocallyTransformedMessageSpec,t)},v=function(t){this.kind="adminMessage",this.proto=o("decodeProtobuf").decodeProtobuf(o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessageSpec,t)},S="SKIP_CACHE",R=(function(){function e(e,t){var n=this;this.payload=r("memoize")(function(){if(n.proto.encryptedTransportEvent!=null)return new C(r("nullthrows")(n.proto.encryptedTransportEvent.payload));if(n.proto.encryptedTransportLocallyTransformedMessage!=null)return new b(r("nullthrows")(n.proto.encryptedTransportLocallyTransformedMessage.payload));if(n.proto.encryptedTransportMessage!=null)return new y(r("nullthrows")(n.proto.encryptedTransportMessage));if(n.proto.miTransportAdminMessage!=null)return new v(r("nullthrows")(n.proto.miTransportAdminMessage.payload));throw r("FBLogger")("messenger_web").mustfixThrow("BackupMessage proto has no payload")}),this.proto=o("decodeProtobuf").decodeProtobuf(o("WAArmadilloBackupMessage.pb").BackupMessageSpec,e)}var t=e.prototype;return t.encryptedTransportMessage=function(){var e=this.payload();if(e.kind==="messageApplication")return e},t.encryptedTransportEvent=function(){var e=this.payload();if(e.kind==="transportEvent")return e},t.locallyTransformedMessage=function(){var e=this.payload();if(e.kind==="locallyTransformedMessage")return e},t.adminMessage=function(){var e=this.payload();if(e.kind==="adminMessage")return e},e})();R.create=r("memoizeWithArgsWeak")(function(e){return new R(e,S)}),l.DeserializedImageMessage=u,l.DeserializedAudioMessage=c,l.DeserializedVideoMessage=d,l.DeserializedDocumentMessage=m,l.DeserializedStickerMessage=p,l.DeserializedExtendedContentMessage=_,l.DeserializedNoteReply=f,l.DeserializedArmadilloApplication=g,l.DeserializedConsumerApplication=h,l.DeserializedMessageApplication=y,l.DeserializedTransportEvent=C,l.DeserializedLocallyTransformedMessage=b,l.DeserializedAdminMessage=v,l.DeserializedBackupMessage=R}),98);
__d("MAWProtobufValidator",["FBLogger","MAWProtobufDeserializers","decodeProtobuf","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){try{var n=o("MAWProtobufDeserializers").DeserializedBackupMessage.create(t),a=n.encryptedTransportMessage();return a!=null?u(a):!0}catch(t){var i=r("getErrorSafe")(t);return r("FBLogger")("messenger_web").MUSTFIX(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Unknown error when trying to validate Protobuf: ",""])),i.message),!1}}function u(e){var t=e.consumerMessage();if(t!=null)return c(t);var n=e.armadillo();return n!=null?d(n):!0}function c(e){var t=e.imageMessage();if(t!=null)return m(t.payload);var n=e.videoMessage();if(n!=null)return m(n.payload);var r=e.audioMessage();if(r!=null)return m(r.payload);var o=e.stickerMessage();if(o!=null)return m(o.payload);var a=e.documentMessage();return a!=null?m(a.payload):!0}function d(e){var t=e.extendedContentMessage();if(t!=null){var n=t.previews();for(var r of n)if(!m(r))return!1;return!0}return!0}function m(e){var t,n,r,a,i,l,s,u;if(!(e!=null&&(t=e.integral)!=null&&t.transport))return!1;var c=(n=e.integral)==null?void 0:n.transport;return!(o("decodeProtobuf").getUnknownFields(c.integral)!=null||((r=c.integral)==null?void 0:r.fileSha256)==null||((a=c.integral)==null?void 0:a.fileEncSha256)==null||((i=c.integral)==null?void 0:i.mediaKey)==null||((l=c.integral)==null?void 0:l.directPath)==null||((s=c.integral)==null?void 0:s.mediaKeyTimestamp)==null||((u=c.ancillary)==null?void 0:u.objectId)==null)}l.isProtobufValid=s,l.isAttachmentValid=m}),98);
__d("RavenMessagingState",[],(function(t,n,r,o,a,i){var e=Object.freeze({PERMANENT:0,UNSEEN:1,SEEN:2,REPLAYED:3,EXPIRED:4});i.default=e}),66);
__d("MAWRavenUtils",["EphemeralMediaViewMode","MAWMsg","RavenMessagingState"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t){switch(t){case o("MAWMsg").MAWRavenMsgEphemeralMediaState.PERMANENT:return r("RavenMessagingState").PERMANENT;case o("MAWMsg").MAWRavenMsgEphemeralMediaState.UNSEEN:return r("RavenMessagingState").UNSEEN;case o("MAWMsg").MAWRavenMsgEphemeralMediaState.SEEN:return r("RavenMessagingState").SEEN;case o("MAWMsg").MAWRavenMsgEphemeralMediaState.REPLAYED:return r("RavenMessagingState").REPLAYED;case o("MAWMsg").MAWRavenMsgEphemeralMediaState.EXPIRED:return r("RavenMessagingState").EXPIRED}},s=function(t){switch(t){case o("MAWMsg").MAWRavenMsgEphemeralType.KEEP_IN_CHAT:return r("EphemeralMediaViewMode").PERMANENT;case o("MAWMsg").MAWRavenMsgEphemeralType.ALLOW_REPLAY:return r("EphemeralMediaViewMode").REPLAYABLE;case o("MAWMsg").MAWRavenMsgEphemeralType.VIEW_ONCE:return r("EphemeralMediaViewMode").READ_ONCE}},u=function(t,n){return{ephemeralMediaState:n,ephemeralMediaViewMode:s(t)}};function c(t,n){switch(n){case o("MAWMsg").MAWRavenMsgEphemeralType.VIEW_ONCE:return t===o("MAWMsg").MAWRavenMsgEphemeralMediaState.UNSEEN?r("RavenMessagingState").SEEN:e(t);case o("MAWMsg").MAWRavenMsgEphemeralType.ALLOW_REPLAY:return t===o("MAWMsg").MAWRavenMsgEphemeralMediaState.UNSEEN?r("RavenMessagingState").SEEN:t===o("MAWMsg").MAWRavenMsgEphemeralMediaState.SEEN?r("RavenMessagingState").REPLAYED:e(t);case o("MAWMsg").MAWRavenMsgEphemeralType.KEEP_IN_CHAT:return e(t)}}l.getEphemeralMediaState=e,l.getEphemeralMediaViewMode=s,l.deriveRavenSettings=u,l.getNextRavenMessageEphemeralState=c}),98);
__d("MAWTimeUtils",["FBLogger","I64","WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){return(e||(e=o("I64"))).of_float(t*1e3)}function u(e){var t=Number(e);return t<=o("WATimeUtils").MAX_INT&&t!==-1e3&&t!==0}function c(t){return u(t)?(Number(t)!==-1&&r("FBLogger")("messenger_web").mustfix("Invalid timestamp supplied to millisTimeToTimestamp: %s",Number(t)),s(t)):(e||(e=o("I64"))).of_float(t)}function d(e,t){var n=Date.now(),r=n-t*24*60*60*1e3,a=o("WATimeUtils").castMilliSecondsToUnixTime(r);return e>=a}function m(e){if(e!=null)return u(e)?(Number(e)!==-1&&r("FBLogger")("messenger_web").mustfix("Invalid timestamp supplied to ensureValidMillisTime: %s",Number(e)),o("WATimeUtils").castToMillisTime(e*1e3)):e}var p=(e||(e=o("I64"))).of_string("9999999999999"),_=Number.MAX_VALUE;l.toTimestamp=s,l.millisTimeToTimestamp=c,l.isTimestampNewerThanXDays=d,l.ensureValidMillisTime=m,l.MAX_TIMESTAMP_MS=p,l.MAX_TIMESTAMP=_,l.MIN_TIMESTAMP_MS=e.zero}),98);
__d("MAWVaultMaterialsStorage",["MAWVaultMaterials","MWFBLogger","Promise","WebAsyncStorage"],(function(t,n,r,o,a,i,l){"use strict";var e,s="mw_exchange_vm";function u(){var t=o("MAWVaultMaterials").generateNewVaultMaterials(),a="newly-generated";return new(e||(e=n("Promise")))(function(e){r("WebAsyncStorage").getOrSetItem(s,t,function(n,r){if(n!=null){var i=o("MWFBLogger").MWLogger();if(n instanceof Error)throw i.catching(n).mustfixThrow("Failed to store Vaulting Materials. %s",n.toString());i.mustfix("Failed to store Vaulting Materials.")}r!==null&&(t=r,a="storage"),e(o("MAWVaultMaterials").initializeVaultMaterials(t,a))})})}function c(){return o("MAWVaultMaterials").hasVaultBeenSetup()?(e||(e=n("Promise"))).resolve(o("MAWVaultMaterials").getVaultMaterials()):u()}l.setupVaultMaterials=c}),98);
__d("WormMemoryIndex",["BinarySearch"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){this.$1=new Map,this.$2=e}var t=e.prototype;return t.initialize=function(t){var e=this.$2.indexes;if(e!=null){for(var n of Object.keys(e))this.$1.set(n,[]);for(var r of t){var o=r[0],a=r[1];this.add(o,a)}}},t.buildKey=function(t,n){var e,r=(e=this.$2.indexes)==null?void 0:e[n];return r==null?[]:r.fields.map(function(e){return t[e]})},t.compareKeys=function(t,n){for(var e=Math.min(t.length,n.length),r=0;r<e;r++){var o=t[r],a=n[r];if(o!==a){if(typeof o=="number"&&typeof a=="number")return o-a;if(typeof o=="bigint"&&typeof a=="bigint"){if(o<a)return-1;if(o>a)return 1;continue}var i=String(o),l=String(a);if(i<l)return-1;if(i>l)return 1}}return 0},t.add=function(t,n){var e=this,r=this.$2.indexes;if(r!=null)for(var a of Object.keys(r)){var i=this.$1.get(a);if(i!=null){var l=this.buildKey(n,a),s=o("BinarySearch").findBoundInArray(i,l,function(t,n){return e.compareKeys(t.key,n)},o("BinarySearch").LEAST_STRICT_UPPER_BOUND);i.splice(s,0,{key:l,pk:t})}}},t.remove=function(t,n){var e=this,r=this.$2.indexes;if(r!=null)for(var a of Object.keys(r)){var i=this.$1.get(a);if(i!=null){for(var l=this.buildKey(n,a),s=o("BinarySearch").findBoundInArray(i,l,function(t,n){return e.compareKeys(t.key,n)},o("BinarySearch").LEAST_UPPER_BOUND),u=s;u<i.length&&this.compareKeys(i[u].key,l)===0;u++)if(i[u].pk===t){i.splice(u,1);break}}}},t.getSortedArray=function(t){return this.$1.get(t)},t.clear=function(){for(var e of this.$1.keys())this.$1.set(e,[])},t.findRange=function(t,n){var e,r,a,i,l=this,s=this.$1.get(t);if(s==null)return[0,0];var u=(e=(r=n==null?void 0:n.greaterThan)!=null?r:n==null?void 0:n.greaterThanOrEqual)!=null?e:n==null?void 0:n.only,c=(a=(i=n==null?void 0:n.lessThan)!=null?i:n==null?void 0:n.lessThanOrEqual)!=null?a:n==null?void 0:n.only,d=u==null?0:o("BinarySearch").findBoundInArray(s,u,function(e,t){return l.compareKeys(e.key,t)},(n==null?void 0:n.greaterThan)!=null?o("BinarySearch").LEAST_STRICT_UPPER_BOUND:o("BinarySearch").LEAST_UPPER_BOUND),m=c==null?s.length:(n==null?void 0:n.lessThan)!=null?o("BinarySearch").findBoundInArray(s,c,function(e,t){return l.compareKeys(e.key,t)},o("BinarySearch").LEAST_UPPER_BOUND):o("BinarySearch").findBoundInArray(s,c,function(e,t){return l.compareKeys(e.key,t)},o("BinarySearch").GREATEST_LOWER_BOUND)+1;return[d,m]},t.findExact=function(t,n){var e=this,r=this.$1.get(t);if(r==null)return-1;var a=o("BinarySearch").findBoundInArray(r,n,function(t,n){return e.compareKeys(t.key,n)},o("BinarySearch").LEAST_UPPER_BOUND);return a<r.length&&this.compareKeys(r[a].key,n)===0?a:-1},e})();l.WormMemoryIndex=e}),98);
__d("WormMemoryDriver",["BinarySearch","FBLogger","Promise","WAResolvable","WormMemoryIndex","WormStoreFunctions","asyncToGeneratorRuntime","err","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s=0;function u(){return s+=1,s}function c(){s=0}var d=(function(){function t(t,r,o,a){var i,l;this.$3={},this.$4=(e||(e=n("Promise"))).resolve(),this.$5=[],this.$2=t,this.$1=r,this.$9=o,this.$6=a==null?void 0:a.blockingErrorThreshold,this.$7=(i=a==null?void 0:a.onBlockingError)!=null?i:function(){},this.$8=(l=a==null?void 0:a.onTransactionError)!=null?l:function(){};for(var s of Object.keys(r))this.$3[s]=new Map}var a=t.prototype;return a.getSchema=function(){return this.$1},a.getDbAlias=function(){return this.$2},a.$10=function(t){var e,n,o;if(this.$6!=null){var a=this.$6,i=(e=(n=(o=t==null?void 0:t.name)!=null?o:t==null?void 0:t.message)!=null?n:t==null?void 0:t.toString())!=null?e:"unknown";if(this.$5.push(i),!(this.$5.length<Math.max(a,1))){var l=this.$5[this.$5.length-1],s=this.$5.every(function(e){return e===l})?l:"mixed";r("FBLogger")("worm").mustfix("Unrecoverable error (%s): %s",this.$2,s),this.$9.log(this.$2+".error.unrecoverable."+s),this.$7(s),this.$5=[]}}},a.runInTransaction=function(t,a,i,l){var e,s=this,u=new(o("WAResolvable")).Resolvable;return(e=l.eventFlow)==null||e.addPoint("memory_txn_start"),this.$4=this.$4.then(n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e,n;(e=l.eventFlow)==null||e.addPoint("memory_txn_execute");var r={};for(var o of t)r[o]=new Map(s.$3[o]);var c=t.reduce(function(e,t){var n;return babelHelpers.extends({},e,(n={},n[t]=new m(r[t],s.$1[t]),n))},{}),d={abort:function(){},commit:function(){return u.promise.then(function(){})},stores:c},p=yield i(d);if(a==="readwrite")for(var _ of t)s.$3[_]=r[_];(n=l.eventFlow)==null||n.addPoint("memory_txn_commit"),u.resolve(p)})).catch(function(e){var t,n=r("getErrorSafe")(e);(t=l.eventFlow)==null||t.addPoint("memory_txn_error",{string:{error_message:n.message,error_name:n.name}}),s.$9.log(s.$2+".error.txn_error"),s.$8(n),s.$10(n),u.reject(n)}),u.promise},a.close=function(){},a.init=function(r){var t,o;return r==null||(t=r.eventFlow)==null||t.addPoint("memory_init_start"),this.$9.log(this.$2+".init"),r==null||(o=r.eventFlow)==null||o.addPoint("memory_init_end"),(e||(e=n("Promise"))).resolve({isNewDb:!0,isUpgraded:!1})},t})(),m=(function(){function t(t,a){var i=this;this.readIndexRange=function(t,o,a){var l=i.$2.indexes;if(l==null)throw r("err")("No indexes found");var s=l[t];if(s==null)throw r("err")("Index not found");var u=i.$3.getSortedArray(t);if(u!=null&&u.length>0&&(a==null?void 0:a.order)!=null)return(e||(e=n("Promise"))).resolve(i.$6(u,o,a));var c=Array.from(i.$1.values());if(o!=null){var d,m,p,f;c=_(c,(d=(m=o.lessThan)!=null?m:o.lessThanOrEqual)!=null?d:o.only,o.lessThanOrEqual!=null||o.only!=null,(p=(f=o.greaterThan)!=null?f:o.greaterThanOrEqual)!=null?p:o.only,o.greaterThanOrEqual!=null||o.only!=null,s)}return(e||(e=n("Promise"))).resolve(i.$5(c,a,t))},this.$1=t,this.$2=a,this.$3=new(o("WormMemoryIndex")).WormMemoryIndex(a),this.$3.initialize(this.$1.entries())}var a=t.prototype;return a.bulkAdd=function(o){var t=this;for(var a of o){if(this.$2.autoIncrement===!0&&a[this.$2.primaryKey]===void 0&&(a[this.$2.primaryKey]=u()),this.$1.has(a[this.$2.primaryKey]))throw r("err")("Item with key already exists");this.$4(a);var i=a[this.$2.primaryKey];this.$1.set(i,a),this.$3.add(i,a)}return(e||(e=n("Promise"))).resolve(o.map(function(e){return e[t.$2.primaryKey]}))},a.bulkPut=function(r){var t=this;for(var o of r){this.$4(o),this.$2.autoIncrement===!0&&o[this.$2.primaryKey]===void 0&&(o[this.$2.primaryKey]=u());var a=o[this.$2.primaryKey],i=this.$1.get(a);i!=null&&this.$3.remove(a,i),this.$1.set(a,o),this.$3.add(a,o)}return(e||(e=n("Promise"))).resolve(r.map(function(e){return e[t.$2.primaryKey]}))},a.$4=function(t){var e=this,n=this.$2.indexes;if(n!=null)for(var a of Object.entries(n)){var i=a[0],l=a[1];if(!(typeof l!="object"||l==null)){var s=l.unique;if(s!==!1){var u=this.$3.getSortedArray(i);if(u!=null){var c=this.$3.buildKey(t,i),d=o("BinarySearch").findBoundInArray(u,c,function(t,n){return e.$3.compareKeys(t.key,n)},o("BinarySearch").LEAST_UPPER_BOUND);if(d<u.length&&this.$3.compareKeys(u[d].key,c)===0){var m=t[this.$2.primaryKey];if(u[d].pk!==m)throw r("err")("ConstraintError")}}}}}},a.bulkGet=function(r){var t=this;return(e||(e=n("Promise"))).resolve(r.map(function(e){return t.$1.get(e)}))},a.get=function(r){return(e||(e=n("Promise"))).resolve(this.$1.get(r))},a.getByIndex=function(t,n,r){return o("WormStoreFunctions").getByIndex(this,t,n,r)},a.readByKeyRange=function(r,o){var t,a,i=p(Array.from(this.$1.values()),(t=r.lessThan)!=null?t:r.lessThanOrEqual,r.lessThanOrEqual!=null,(a=r.greaterThan)!=null?a:r.greaterThanOrEqual,r.greaterThanOrEqual!=null,this.$2.primaryKey);return(e||(e=n("Promise"))).resolve(this.$5(i,o))},a.bulkDelete=function(r){for(var t of r){var o=this.$1.get(t);o!=null&&(this.$3.remove(t,o),this.$1.delete(t))}return(e||(e=n("Promise"))).resolve()},a.delete=function(r){var t=this.$1.get(r);return t!=null&&(this.$3.remove(r,t),this.$1.delete(r)),(e||(e=n("Promise"))).resolve()},a.bulkUpsert=function(t,n){return o("WormStoreFunctions").bulkUpsert(this,this.$2,t,n)},a.$6=function(t,n,r){for(var e,o=this.$7(t,n),a=o[0],i=o[1],l=[],s=a;s<i;s++){var u=this.$1.get(t[s].pk);u!=null&&l.push(u)}return this.$8(l,r,(e=r.order)!=null?e:"asc")},a.$7=function(t,n){var e,r,a,i,l=this,s=(e=(r=n==null?void 0:n.greaterThan)!=null?r:n==null?void 0:n.greaterThanOrEqual)!=null?e:n==null?void 0:n.only,u=(a=(i=n==null?void 0:n.lessThan)!=null?i:n==null?void 0:n.lessThanOrEqual)!=null?a:n==null?void 0:n.only,c=s==null?0:o("BinarySearch").findBoundInArray(t,s,function(e,t){return l.$3.compareKeys(e.key,t)},(n==null?void 0:n.greaterThan)!=null?o("BinarySearch").LEAST_STRICT_UPPER_BOUND:o("BinarySearch").LEAST_UPPER_BOUND),d=u==null?t.length:(n==null?void 0:n.lessThan)!=null?o("BinarySearch").findBoundInArray(t,u,function(e,t){return l.$3.compareKeys(e.key,t)},o("BinarySearch").LEAST_UPPER_BOUND):o("BinarySearch").findBoundInArray(t,u,function(e,t){return l.$3.compareKeys(e.key,t)},o("BinarySearch").GREATEST_LOWER_BOUND)+1;return[c,d]},a.$8=function(t,n,r){var e=t;return n.filter!=null&&(e=e.filter(n.filter)),r==="desc"&&(e=e.reverse()),n.limit!=null&&(e=e.slice(0,n.limit)),e},a.readKeysByIndexRange=function(t,n,r){var e=this;return this.readIndexRange(t,n,r).then(function(t){return t.map(function(t){return t[e.$2.primaryKey]})})},a.getIndexRangeIterator=function(t,n,r,a){return o("WormStoreFunctions").getIndexRangeIterator(this.readIndexRange,this.$2,t,n,r,a)},a.$5=function(t,n,r){var e=t;if((n==null?void 0:n.filter)!=null&&(e=e.filter(n.filter)),(n==null?void 0:n.order)!=null&&r!=null){var o,a,i=(o=(a=this.$2.indexes)==null||(a=a[r])==null?void 0:a.fields)!=null?o:[];e=e.sort(function(e,t){for(var r of i)if(e[r]!==t[r])return n.order==="desc"?t[r]>e[r]?1:-1:e[r]>t[r]?1:-1;return 0})}return(n==null?void 0:n.limit)!=null&&(e=e.slice(0,n.limit)),e},a.readIndex=function(a,i,l){var t=this,s=this.$2.indexes;if(s==null)throw r("err")("No indexes found");var u=s[a];if(u==null)throw r("err")("Index not found");if(i==null)return(e||(e=n("Promise"))).resolve(this.$5(Array.from(this.$1.values()),l,a));var c=this.$3.getSortedArray(a);if(c==null)return(e||(e=n("Promise"))).resolve([]);for(var d=[].concat(i),m=o("BinarySearch").findBoundInArray(c,d,function(e,n){return t.$3.compareKeys(e.key,n)},o("BinarySearch").LEAST_UPPER_BOUND),p=[],_=m;_<c.length&&this.$3.compareKeys(c[_].key,d)===0;_++){var f=this.$1.get(c[_].pk);f!=null&&p.push(f)}return(e||(e=n("Promise"))).resolve(this.$5(p,l,a))},a.readIndexAnyOf=function(o,a,i){var t=this.$2.indexes;if(t==null)throw r("err")("No indexes found");var l=t[o];if(l==null)throw r("err")("Index not found");if(a.length===0)return(e||(e=n("Promise"))).resolve([]);var s=Array.from(this.$1.values());return s=s.filter(function(e){return a.some(function(t){for(var n=0;n<l.fields.length;n++)if(t[n]!==void 0&&e[l.fields[n]]!==t[n])return!1;return!0})}),(e||(e=n("Promise"))).resolve(this.$5(s,i,o))},a.readIndexKeys=function(t,n,r){var e=this;return this.readIndex(t,n,r).then(function(t){return t.map(function(t){return t[e.$2.primaryKey]})})},a.readAll=function(r){var t=this,o=Array.from(this.$1.values());return(r==null?void 0:r.filter)!=null&&(o=o.filter(r.filter)),(r==null?void 0:r.order)!=null&&(o=o.sort(function(e,n){var o=e[t.$2.primaryKey],a=n[t.$2.primaryKey];return o===a?0:r.order==="desc"?a>o?1:-1:o>a?1:-1})),(r==null?void 0:r.limit)!=null&&(o=o.slice(0,r.limit)),(e||(e=n("Promise"))).resolve(o)},a.readKeys=function(t){var e=this;return this.readAll(t).then(function(t){return t.map(function(t){return t[e.$2.primaryKey]})})},a.clear=function(){return this.$1.clear(),this.$3.clear(),(e||(e=n("Promise"))).resolve()},a.count=function(){return(e||(e=n("Promise"))).resolve(this.$1.size)},t})();function p(e,t,n,r,o,a){return e.filter(function(e){return!(r!=null&&r>e[a]||t!=null&&t<e[a]||t!=null&&n===!1&&e[a]===t||r!=null&&o===!1&&e[a]===r)})}function _(e,t,n,r,o,a){return e.filter(function(e){for(var i=0;i<a.fields.length;i++)if(r!=null&&r[i]>e[a.fields[i]]||t!=null&&t[i]<e[a.fields[i]]||i===a.fields.length-1&&(t!=null&&n===!1&&e[a.fields[i]]===t[i]||r!=null&&o===!1&&e[a.fields[i]]===r[i]))return!1;return!0})}l.TEST_ONLY_resetPK=c,l.WormMemoryDriver=d,l.WormMemoryStore=m}),98);
__d("WormMaintenanceSchema",["MAWWormOdsLogger","WAHex","Worm","WormEAR","WormIDbDriver","WormMemoryDriver"],(function(t,n,r,o,a,i,l){"use strict";var e={autoIncrement:!0,indexes:{name:{fields:["name"],unique:!0}},nonEncryptedFields:["name","startedAtMs","finishedAtMs"],primaryKey:"pk",secure:!0},s={migrations:e};function u(e,t,n,r,a,i){var l=o("WAHex").parseHex(t),u="worm_maintenance",c=new(o("WormEAR")).WormEAR(s,u,l);return new(o("Worm")).WormDatabase(new(o("WormIDbDriver")).WormIDbDriver(e,u,s,c,o("MAWWormOdsLogger").wormOdsWorkerLogger,{blockingErrorThreshold:n,onBlockingError:r,onTransactionError:a}),i)}function c(e){return new(o("Worm")).WormDatabase(new(o("WormMemoryDriver")).WormMemoryDriver("worm_maintenance_test",s,o("MAWWormOdsLogger").wormOdsWorkerLogger),e)}l.makeWormMaintenanceSchema=u,l.makeWormMaintenanceSchema_TEST_ONLY=c}),98);
__d("WormMaintenanceDb",["FBLogger","Promise","WAResolvable","WormEAR","WormMaintenanceSchema","asyncToGeneratorRuntime","err","getErrorSafe","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=new(o("WAResolvable")).Resolvable;function c(e){return d.apply(this,arguments)}function d(){return d=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var a=t.blockingErrorThreshold,i=t.dbName,l=t.onBlockingError,c=t.qplEvent,d=t.strEncKey;try{var m=o("WormMaintenanceSchema").makeWormMaintenanceSchema(i,d,a,l,function(t){if(t instanceof o("WormEAR").DecryptionError){var a,i,l=t;r("FBLogger")("messenger_web").mustfix("EAR decryption error in store: %s. Dropping corrupted entity",l.store),r("promiseDone")((a=(i=s)==null?void 0:i.runInTransaction([l.store],"readwrite",function(e){var t=e.stores[l.store];return l.maybeHashedPk!=null?t.delete(l.maybeHashedPk):t.clear()},"delete-corrupted-entity"))!=null?a:(e||(e=n("Promise"))).resolve())}},c);return s=m,yield m.init(),u.resolve(m),m}catch(e){throw r("FBLogger")("messenger_web").catching(r("getErrorSafe")(e)).mustfix("Error performing WORM PersistedQueue init"),e}}),d.apply(this,arguments)}function m(){if(s==null)throw r("err")("WormMaintenanceDb is not initialized");return s}function p(){return u.promise}l.makeWormMaintenanceDb=c,l.getWormMaintenanceDb=m,l.getWormMaintenanceDbPromise=p}),98);
__d("MAWWormMaintenanceDbSetup",["BackendInitLoggingUtils","MAWCurrentUser","MAWIndexedDbMetadata","MAWODSProxy","MessengerWebInitData","WAOdsEnums","WormMaintenanceDb","asyncToGeneratorRuntime","justknobx","qpl"],(function(t,n,r,o,a,i,l){"use strict";function e(){return s.apply(this,arguments)}function s(){return s=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield o("BackendInitLoggingUtils").measureMawInit("worm_maintenance_db_init",n("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield o("WormMaintenanceDb").makeWormMaintenanceDb({blockingErrorThreshold:r("justknobx")._("3218"),dbName:o("MAWIndexedDbMetadata").wormMaintenanceDbName(o("MAWCurrentUser").getID()),onBlockingError:function(t){o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.WORM,key:"reverb.unrecoverable."+t})},qplEvent:r("qpl")._(1056840657,"2716"),strEncKey:r("MessengerWebInitData").accountKeyV2})}))}),s.apply(this,arguments)}l.mawWormDbMaintenanceDbSetup=e}),98);
__d("MWChatEncryptedBackupsQPLEvents",["qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e=r("qpl"))._(521476140,"378"),u=e._(521472542,"295"),c=e._(521484256,"3212"),d=e._(521473384,"31"),m=e._(521482085,"409"),p=e._(521485406,"272"),_=e._(521482763,"296"),f=e._(521484295,"1460"),g=e._(521482969,"1519"),h=e._(521479124,"1939"),y=e._(521474385,"263"),C=e._(521476098,"504"),b=e._(521482858,"1290"),v=e._(521473194,"1331"),S=e._(521471024,"2275");l.pinCodeChangeQplEvent=s,l.optOutQplEvent=u,l.resetBackupQplEvent=c,l.ebResetObserverQplEvent=d,l.backupSetupQplEvent=m,l.mobileOnboardingQplEvent=p,l.restoreQplEvent=_,l.restoreDeviceAuthQplEvent=f,l.messageRestoreQplEvent=g,l.restoreWithAutoRestoreConsentQplEvent=h,l.hsmFleetMigrationQplEvent=y,l.virtualDeviceRevocationQplEvent=C,l.onboardingAuthQplEvent=b,l.processBackupIdsQPLEvent=v,l.fetchBackupIdsQPLEvent=S}),98);
__d("MWXMAV2IsCollapsibleXMA",["MWXMAV2IsDataclassLiveLocationXMA"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t;return!(e==null||((t=e.layout_config)==null?void 0:t.collapsible_id)==null&&!o("MWXMAV2IsDataclassLiveLocationXMA").isDataclassLiveLocationXMA(e))}l.isCollapsibleXMA=e}),98);
__d("MpsLogger",["FBLogger"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t){return r("FBLogger")("mps",t)};l.MpsLogger=e}),98);
__d("MpsToBridgeMessageId",["MAWJidUtils","MpsTypes","WAJids","WAStanzaUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){return o("MAWJidUtils").formatProtocolMsgIdFromExternalId(o("WAJids").unsafeCoerceToChatJid(e),o("WAStanzaUtils").toStanzaId(t))}function s(e){var t=e.lastIndexOf("."),n=e.substring(0,t),r=e.substring(t+1);return{messageId:o("MpsTypes").toMessageId(r),threadId:o("MpsTypes").toThreadId(n)}}l.mpsToBridgeMsgId=e,l.bridgeMsgIdToMps=s}),98);
__d("MpsMessageToBridgeWrapper",["MAWProtobufDeserializers","MAWUserJidWrapper","MpsToBridgeMessageId","WAJids","WATimeUtils","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";var e=o("WAJids").createJidUtils({platform:"msgr"}),s=(function(){function t(e,t){this.message=e,this.topLevel=t}t.fromTopLevel=function(n){return new t(n,n)},t.fromSupplemental=function(n,a){var e,i=o("MAWProtobufDeserializers").DeserializedBackupMessage.create(n.payload),l={messageId:n.messageId,payload:n.payload,senderId:r("nullthrows")((e=i.proto.metadata)==null?void 0:e.senderId),threadId:a.threadId,timestampMs:n.timestampMs};return new t(l,a)};var n=t.prototype;return n.getChatJid=function(){return o("WAJids").unsafeCoerceToChatJid(this.message.threadId)},n.getExternalId=function(){return this.message.messageId},n.getMsgId=function(){return o("MpsToBridgeMessageId").mpsToBridgeMsgId(this.message.threadId,this.message.messageId)},n.getSenderJid=function(){return e.toUserJid(this.message.senderId)},n.topLevelMetadata=function(){return t.fromTopLevel(this.topLevel)},n.isAuthorMe=function(){return o("WAJids").userIdFromJid(o("MAWUserJidWrapper").getMyUserJid())===this.message.senderId},n.getAuthor=function(){return this.isAuthorMe()?o("WAJids").AUTHOR_ME:this.getSenderJid()},n.getUnixTs=function(){return o("WATimeUtils").castMilliSecondsToUnixTime(this.message.timestampMs)},n.deserialize=function(){return o("MAWProtobufDeserializers").DeserializedBackupMessage.create(this.message.payload)},t})();l.MpsMessageToBridgeWrapper=s}),98);
__d("WebReverbSchema",["FBLogger","MAWWormOdsLogger","WAHex","Worm","WormEAR","WormIDbDriver","WormMemoryDriver"],(function(t,n,r,o,a,i,l){"use strict";var e={autoIncrement:!0,indexes:{"[threadId+messageId]":{fields:["threadId","messageId"],unique:!0},"[threadId+timestampMs+messageId]":{fields:["threadId","timestampMs","messageId"],unique:!1},expiryTimestampMs:{fields:["expiryTimestampMs"],unique:!1},messageId:{fields:["messageId"],unique:!1},timestampMs:{fields:["timestampMs"],unique:!1}},nonEncryptedFields:["timestampMs","expiryTimestampMs","messageId","debugFlags"],primaryKey:"pk",secure:!0},s={autoIncrement:!0,indexes:{"[threadId+topLevelMessageId+supplementalKey]":{fields:["threadId","topLevelMessageId","supplementalKey"],unique:!0}},nonEncryptedFields:["topLevelMessageId"],primaryKey:"pk",secure:!0},u={autoIncrement:!0,indexes:{"[threadId+deletedMessageId]":{fields:["threadId","deletedMessageId"],unique:!0},"[threadId+timestampMs+deletedMessageId]":{fields:["threadId","timestampMs","deletedMessageId"],unique:!0},"[threadId+topLevelMessageId+supplementalKey]":{fields:["threadId","topLevelMessageId","supplementalKey"],unique:!1},deletionTimestampMs:{fields:["deletionTimestampMs"],unique:!1}},nonEncryptedFields:["topLevelMessageId","deletionTimestampMs"],primaryKey:"pk",secure:!0},c={autoIncrement:!0,indexes:{"[threadId+messageId+tag]":{fields:["threadId","messageId","tag"],unique:!0},"[threadId+tag+timestampMs]":{fields:["threadId","tag","timestampMs"],unique:!1}},nonEncryptedFields:["messageId","timestampMs","messagePk","tag"],primaryKey:"pk",secure:!0},d={autoIncrement:!1,indexes:{},primaryKey:"pk",secure:!0},m={dbMetadata:d,deleted:u,message:e,supplemental:s,tags:c};function p(e,t,n,a,i){var l=o("WAHex").parseHex(t),s="reverb",u=new(o("WormEAR")).WormEAR(m,s,l),c=new(o("Worm")).WormDatabase(new(o("WormIDbDriver")).WormIDbDriver(e,s,m,u,o("MAWWormOdsLogger").wormOdsWorkerLogger,{blockingErrorThreshold:n,onBlockingError:a,onTransactionError:function(t){if(t instanceof o("WormEAR").DecryptionError){var e=t;r("FBLogger")("mps").mustfix("EAR decryption error in store: %s. Dropping corrupted entity %s",e.store,e.maybeHashedPk),c.runInTransaction([e.store],"readwrite",function(t){var n=t.stores[e.store];return e.maybeHashedPk!=null?n.delete(e.maybeHashedPk):n.clear()},"delete-corrupted-entity")}}}),i);return c}function _(e){return new(o("Worm")).WormDatabase(new(o("WormMemoryDriver")).WormMemoryDriver("reverb_test",m,o("MAWWormOdsLogger").wormOdsWorkerLogger),e)}l.schema=m,l.makeWebReverbSchema=p,l.makeInMemoryReverbSchema_TEST_ONLY=_}),98);
__d("WebReverbDB",["MpsLogger","WAResolvable","WebReverbSchema","asyncToGeneratorRuntime","err","getErrorSafe","vulture"],(function(t,n,r,o,a,i,l){"use strict";var e,s=new(o("WAResolvable")).Resolvable;function u(e,t,n,r,o){return c.apply(this,arguments)}function c(){return c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n,a,i,l){var u;try{var c=o("WebReverbSchema").makeWebReverbSchema(t,n,a,i,l);return e=c,u=yield c.init(),s.resolve(c),u}catch(e){throw o("MpsLogger").MpsLogger().catching(r("getErrorSafe")(e)).mustfix("Error performing WebReverb init"),e}}),c.apply(this,arguments)}function d(){if(e==null)throw r("err")("Reverb DB is not initialized");return e}function m(){return s.promise}function p(e){return r("vulture")("V7Y7Nqdo8syOAwHMrSvML57TUyw="),"WebReverb - "+e}l.makeWebReverb=u,l.getWebReverbDB=d,l.getDbPromise=m,l.mpsOp=p}),98);
__d("WorkerSchedulerError",[],(function(t,n,r,o,a,i){"use strict";var e=(function(e){function t(t,n){var r;return r=e.call(this,"Task execution exceeds timeout "+t+":"+n)||this,r.name="WorkerSchedulerTimeoutError",r}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error));i.WorkerSchedulerTimeoutError=e}),66);
__d("WorkerSchedulerPriority",[],(function(t,n,r,o,a,i){"use strict";var e=2,l=1,s=0;i.BACKGROUND_PRIORITY=e,i.REGULAR_PRIORITY=l,i.BLOCKING_PRIORITY=s}),66);
__d("WorkerScheduler",["$InternalEnum","Promise","QPLFlow","QuickPerformanceLogger","WAResolvable","WAShiftTimer","WATagsLogger","WATimeUtils","WorkerSchedulerError","WorkerSchedulerPriority","err","getSafeQplErrorMessage","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f,g,h,y,C,b,v=o("WATagsLogger").TAGS(["WorkerScheduler"]),S=0,R=100,L=3e4,E=10,k=6e4,I=n("$InternalEnum")({CREATED:0,SCHEDULED:1,RUNNING:2,COMPLETED:3,CANCELLED:-3,FAILED:-2,STUCK:-1}),T=(function(){function t(e,t){var n;this.$3=!1,this.$4=new Map,this.$5=new Map,this.$6=new Map,this.$7=[new Set,new Set,new Set],this.$8=[new(n=o("WAResolvable")).Resolvable,new n.Resolvable,new n.Resolvable],this.$9=new n.Resolvable,this.$1=e,this.config=t,this.$2=v.TAGS([e])}var a=t.prototype;return a.waitUntilEndReached=function(){return this.$9.promise},a.waitUntilBlockingEnded=function(){return this.$8[o("WorkerSchedulerPriority").BLOCKING_PRIORITY].promise},a.waitUntilRegularEnded=function(){return this.$8[o("WorkerSchedulerPriority").REGULAR_PRIORITY].promise},a.waitUntilBackgroundEnded=function(){return this.$8[o("WorkerSchedulerPriority").BACKGROUND_PRIORITY].promise},a.getDebugState=function(){var e=this,t=Date.now();return{activeTasks:Array.from(this.$6.entries()).map(function(n){var r=n[0],o=n[1],a=e.$5.get(r);return!a||a.startTime==null?null:{executionTimeMs:t-a.startTime,priority:o,task:a.name,waitTimeMs:t-a.scheduledTime}}).filter(Boolean),pendingTasksByPriority:this.$7.map(function(n){var r=[];return n.forEach(function(n){var o=e.$5.get(n);o&&r.push({task:o.name,waitTimeMs:t-o.scheduledTime})}),r})}},a.$10=function(){if(this.$6.size<this.config.maxTaskLimit){var e=this.pendingTasksTick({increaseCounter:!1,lowestTier:this.$3?o("WorkerSchedulerPriority").BACKGROUND_PRIORITY:o("WorkerSchedulerPriority").BLOCKING_PRIORITY,tasksToPick:1,tickDelta:0}),t=e.candidates,n=x.getHighestActivePriority();t.length>0&&this.maybeStartTask(t[0].id,n)}},a.runTask=function(t){return this.task(t).run()},a.task=function(t){var e,n=this.$1+":"+t.name+":"+S++,r=(e=t.priority)!=null?e:o("WorkerSchedulerPriority").REGULAR_PRIORITY,a=this.$11(n,{annotations:t.annotations,customFlags:t.customFlags,eventSamplingRate:t.eventSamplingRate,fn:t.fn,name:t.name,priority:r});return this.$4.set(n,a),a.publicApi},a.$12=function(t){var e=this.$4.get(t);return e==null?(b||(b=n("Promise"))).reject(r("err")("Cannot run task from Scheduler:"+this.$1+" Task was already cancelled")):(e.publicApi.status=I.SCHEDULED,this.$5.set(t,e),this.$7[e.priority].add(t),this.$13(e.priority),e.metric.addPoint("schedule_start"),x.scheduleTimerIfNeeded(),this.$10(),e.resolvable.promise)},a.$11=function(n,r){var t,a,i,l=this,s=new(o("WAResolvable")).Resolvable,u=o("QPLFlow").startQplFlowWithCoinflip($,r.eventSamplingRate!=null?r.eventSamplingRate:this.config.defaultSamplingRate,{annotations:{bool:babelHelpers.extends({},(t=r.annotations)==null?void 0:t.bool,r.customFlags),int:babelHelpers.extends({},(a=r.annotations)==null?void 0:a.int,{originalPriority:r.priority}),string:babelHelpers.extends({},(i=r.annotations)==null?void 0:i.string,{name:r.name,scheduler:this.$1,workerID:self!=null&&"worker_id"in self?self.worker_id:void 0})}}),c={fn:r.fn,id:n,loggingParams:{},maxTickDelta:0,metric:u,name:r.name,priority:r.priority,publicApi:{cancel:function(){return c.publicApi.status!==I.CREATED&&c.publicApi.status!==I.SCHEDULED?!1:(l.$14(n,I.CANCELLED),l.$4.delete(n))},id:n,name:r.name,promise:s.promise,promote:function(n){return l.$2.DEV(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Promoting "," from "," to ",""])),c.id,c.priority,n),(c.publicApi.status===I.CREATED||c.publicApi.status===I.SCHEDULED)&&c.priority>n?(l.$15(c,n),!0):!1},run:function(){return l.$12(n)},status:I.CREATED},resolvable:s,scheduledTime:Date.now(),startTime:null,tickCounter:0,waitCounter:0};return c},a.$14=function(t,n){var e=this.$5.get(t),r=e==null?void 0:e.publicApi.status;if(!(e==null||r===I.COMPLETED||r===I.FAILED||r===I.STUCK)){this.$5.delete(t),this.$6.delete(t),e.publicApi.status=n;var a=[this.$7[o("WorkerSchedulerPriority").BLOCKING_PRIORITY].size===0,this.$7[o("WorkerSchedulerPriority").REGULAR_PRIORITY].size===0,this.$7[o("WorkerSchedulerPriority").BACKGROUND_PRIORITY].size===0];this.$6.forEach(function(e){a[e]=!1}),a[o("WorkerSchedulerPriority").BLOCKING_PRIORITY]&&a[o("WorkerSchedulerPriority").REGULAR_PRIORITY]&&a[o("WorkerSchedulerPriority").BACKGROUND_PRIORITY]&&this.$9.resolve();for(var i=o("WorkerSchedulerPriority").BLOCKING_PRIORITY;i<=o("WorkerSchedulerPriority").BACKGROUND_PRIORITY;i++)a[i]&&this.$8[i].resolve()}},a.maybeStartTask=function(t,n){var e=this.$5.get(t);if(e==null){this.$2.ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Safeguard: Task without corresponding record: Task: ",", Scheduler: ",""])),t,this.$1);return}if(n==null||this.$3===!0)return this.$16(e);if(!(n<e.priority))return this.$16(e)},a.$16=function(t){var e=this;this.$7[t.priority].delete(t.id),this.$6.set(t.id,t.priority),this.$2.TAGS([t.name]).LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Started: ",", priority: ",""])),t.id,t.priority),t.startTime=Date.now(),t.publicApi.status=I.RUNNING,t.metric.addPoint("schedule_end",{int:{priorityTier:t.priority,waitTicks:t.waitCounter}}),t.metric.addPoint("run_start",{int:{startPriority:t.priority}});var r;try{r=t.fn({metric:t.metric})}catch(e){r=(b||(b=n("Promise"))).reject(e)}this.config.warnTaskLimit!=null&&this.$6.size>=this.config.warnTaskLimit&&this.$6.entries().forEach(function(t){var n=t[0],r=t[1],o=e.$5.get(n);o!=null&&o.metric.addAnnotations({bool:{exceedsWarnLimit:!0}})}),r.then(function(n){t.resolvable.resolve(n),e.$2.TAGS([t.name]).LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Completed: ",""])),t.id),t.metric.addPoint("run_end",{int:{executionTicks:t.tickCounter}}),e.$14(t.id,I.COMPLETED),t.metric.endSuccess({int:{maxTickDeltaMs:t.maxTickDelta}}),e.$10()}).catch(function(n){t.resolvable.reject(n),e.$2.TAGS([t.name]).WARN(d||(d=babelHelpers.taggedTemplateLiteralLoose(["Failed: ",""])),t.id),t.metric.addPoint("run_fail"),e.$2.TAGS([t.name]).ERROR(m||(m=babelHelpers.taggedTemplateLiteralLoose(["Debug params: "," failed: ",""])),t.loggingParams,n),e.$14(t.id,I.FAILED),t.metric.endFail("runtime",{int:{maxTickDeltaMs:t.maxTickDelta},string:{jsError:o("getSafeQplErrorMessage").getSafeQPLErrorMessage(n)}}),e.$10()})},a.$13=function(t){for(var e=o("WorkerSchedulerPriority").BLOCKING_PRIORITY;e<=t;e++)this.$8[e].resolveWasCalled()&&(this.$8[e]=new(o("WAResolvable")).Resolvable);this.$9.resolveWasCalled()&&(this.$9=new(o("WAResolvable")).Resolvable)},a.getHighestActivePriority=function(){var e=this,t=null;return this.$6.forEach(function(n,r){var o=e.$5.get(r);if(o==null){v.ERROR(p||(p=babelHelpers.taggedTemplateLiteralLoose(["Safeguard: Active task without corresponding record: Task: ",", Scheduler: ",""])),r,e.$1),e.$6.delete(r);return}(t==null||t>o.priority)&&(t=o.priority)}),t},a.activeTasksTick=function(t){var e=this,n=null;return this.$6.forEach(function(r,a){var i=e.$5.get(a);if(i==null){v.ERROR(_||(_=babelHelpers.taggedTemplateLiteralLoose(["Safeguard: Active task without corresponding record: Task: ",", Scheduler: ",""])),a,e.$1),e.$6.delete(a);return}i.tickCounter++,i.maxTickDelta=Math.max(t,i.maxTickDelta),(n==null||n>i.priority)&&(n=i.priority),i.tickCounter>e.config.ticksToTimeout&&i.publicApi.status===I.RUNNING&&(v.WARN(f||(f=babelHelpers.taggedTemplateLiteralLoose(["Possibly stuck: ",""])),i.name),e.$14(i.id,I.STUCK),e.config.shouldContinueAfterTimeout||i.resolvable.reject(new(o("WorkerSchedulerError")).WorkerSchedulerTimeoutError(e.$1,i.id)),i.metric.endCancel(113,{int:{maxTickDeltaMs:i.maxTickDelta}}))}),n},a.$15=function(t,n){function e(){switch(r){case o("WorkerSchedulerPriority").BACKGROUND_PRIORITY:return o("WorkerSchedulerPriority").REGULAR_PRIORITY;case o("WorkerSchedulerPriority").REGULAR_PRIORITY:return o("WorkerSchedulerPriority").BLOCKING_PRIORITY;default:return o("WorkerSchedulerPriority").BLOCKING_PRIORITY}}var r=t.priority,a=n!=null?n:e();a!==r&&(t.metric.addPoint("promote_to_"+a),this.$7[r].delete(t.id),t.priority=a,this.$7[a].add(t.id))},a.pendingTasksTick=function(t){for(var e=this,n=t.increaseCounter,r=t.lowestTier,a=t.tasksToPick,i=t.tickDelta,l=[],s=!0,u=function(r){s&&(s=e.$7[r].size===0),e.$7[r].forEach(function(t){var s=e.$5.get(t);if(s==null){v.ERROR(g||(g=babelHelpers.taggedTemplateLiteralLoose(["Safeguard: Pending task without corresponding record: Task: ",", Scheduler: ",""])),t,e.$1),e.$7[r].delete(t);return}n&&(s.waitCounter++,s.maxTickDelta=Math.max(i,s.maxTickDelta),s.priority>o("WorkerSchedulerPriority").REGULAR_PRIORITY&&s.waitCounter>=e.config.throttleTicks&&e.$15(s),s.priority===o("WorkerSchedulerPriority").REGULAR_PRIORITY&&s.waitCounter>=x.maxWaitTicksMultiplierForFinalPromotion*e.config.throttleTicks&&(v.LOG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Promoting task ",":"," to blocking priority"])),e.$1,s.name),e.$15(s))),!(l.length>=a)&&(e.$6.size+l.length>=e.config.maxTaskLimit||l.push(s))})},c=o("WorkerSchedulerPriority").BLOCKING_PRIORITY;c<=r;c++)u(c);return{candidates:l.map(function(e){return{id:e.id,priority:e.priority}}),isEmpty:s}},a.TEST_ONLY_ignore_delays=function(){this.$3=!0},t})(),D=(function(){function e(){var e=this;this.$1=new Map,this.tickFrequencyMs=R,this.maxThrottleMs=k,this.maxWaitTicksMultiplierForFinalPromotion=E,this.$2=null,this.$3=new(o("WAShiftTimer")).ShiftTimer(function(){var t=!1;try{var n,r=o("WATimeUtils").performanceAbsoluteNow();t=e.$4(r-((n=e.$2)!=null?n:r))}catch(e){v.ERROR(y||(y=babelHelpers.taggedTemplateLiteralLoose(["Scheduler fatal: ",""])),e)}finally{t===!1?(e.$2=o("WATimeUtils").performanceAbsoluteNow(),e.$3.onOrBefore(e.tickFrequencyMs)):e.$2=null}}),this.$5=new Map}var t=e.prototype;return t.getHighestActivePriority=function(){var e=null;return this.$5.forEach(function(t){var n=t.getHighestActivePriority();e!=null&&n!=null&&e<n&&(e=n),e==null&&n!=null&&(e=n)}),e},t.$4=function(t){var e,n=!0,r=null;this.$5.forEach(function(e){var n=e.activeTasksTick(t);r!=null&&n!=null&&r<n&&(r=n),r==null&&n!=null&&(r=n)});var a=[[],[],[]];this.$5.forEach(function(e){var r=e.pendingTasksTick({increaseCounter:!0,lowestTier:o("WorkerSchedulerPriority").BACKGROUND_PRIORITY,tasksToPick:e.config.concurrency,tickDelta:t}),i=r.candidates,l=r.isEmpty;n&&(n=l),i.forEach(function(t){a[t.priority].push({id:t.id,scheduler:e})})});var i=(e=a.find(function(e){return e.length>0}))!=null?e:[];for(var l of i){var s=l.id,u=l.scheduler;u.maybeStartTask(s,r)}return n},t.scheduleTimerIfNeeded=function(){this.$3.onOrBefore(this.tickFrequencyMs)},t.newScheduler=function(t,n){var e=this.$5.get(t);return e||(e=new T(t,n),this.$5.set(t,e),e)},t.TEST_ONLY_reset=function(){this.$5=new Map,this.$1=new Map},e})(),x=new D,$=r("qpl")._(1056838280,"1566");function P(e,t){var n,r,o,a,i;return x.newScheduler(e,{concurrency:(n=t.concurrency)!=null?n:1,defaultSamplingRate:(r=t.defaultSamplingRate)!=null?r:1e4,maxTaskLimit:t.maxTaskLimit,shouldContinueAfterTimeout:(o=t.shouldContinueAfterTimeout)!=null?o:!1,throttleTicks:Math.round(((a=t.maxThrottleMs)!=null?a:x.maxThrottleMs)/x.tickFrequencyMs),ticksToTimeout:Math.round(((i=t.timeoutMs)!=null?i:L)/x.tickFrequencyMs),warnTaskLimit:t.warnTaskLimit})}function N(e){e.tickFrequencyMs!=null&&(x.tickFrequencyMs=e.tickFrequencyMs),e.maxThrottleMs!=null&&(x.maxThrottleMs=e.maxThrottleMs),e.maxWaitTicksMultiplierForFinalPromotion!=null&&(x.maxWaitTicksMultiplierForFinalPromotion=e.maxWaitTicksMultiplierForFinalPromotion),e.qplEventType!=null&&($=e.qplEventType),(C||(C=r("QuickPerformanceLogger"))).setAlwaysOnSampleRate($,1)}function M(){x.TEST_ONLY_reset()}l.BACKGROUND_PRIORITY=o("WorkerSchedulerPriority").BACKGROUND_PRIORITY,l.BLOCKING_PRIORITY=o("WorkerSchedulerPriority").BLOCKING_PRIORITY,l.REGULAR_PRIORITY=o("WorkerSchedulerPriority").REGULAR_PRIORITY,l.SchedulerExecutionState=I,l.makeScheduler=P,l.configWorkerScheduler=N,l.TEST_ONLY_reset=M}),98);
__d("WAWaitForUserUnblocked",["WAResolvable","WorkerScheduler"],(function(t,n,r,o,a,i,l){"use strict";var e=12e4,s=new(o("WAResolvable")).Resolvable,u=o("WorkerScheduler").makeScheduler("offline-queue",{concurrency:1,maxTaskLimit:1,defaultSamplingRate:1e3,timeoutMs:e});function c(){s.resolveWasCalled()&&(s=new(o("WAResolvable")).Resolvable,d())}function d(){u.runTask({name:"offline-queue",fn:function(){return s.promise},priority:o("WorkerScheduler").BLOCKING_PRIORITY})}function m(){return s.promise}function p(){s.resolve()}function _(){return!s.resolveWasCalled()}l.maybeResetWaitForUserUnblocked=c,l.markOfflineQueueAsStarted=d,l.waitForUserUnblocked=m,l.unblockUser=p,l.isStillWaitingForUserUnblocked=_}),98);
__d("getMediaTypeFromConsumerMessage",["MAWEncodeMediaTransportProtocol","WAMediaTransport.pb","decodeProtobuf","gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n,a,i=((t=e.ancillary)==null?void 0:t.gifPlayback)===!0||((n=e.ancillary)==null?void 0:n.gifAttribution)!=null,l=(a=e.integral)==null||(a=a.transport)==null||(a=a.ancillary)==null?void 0:a.mimetype;if(r("gkx")("13045")){if(i&&!(l!=null&&l.startsWith("video/")))return"gif"}else if(i&&l===o("MAWEncodeMediaTransportProtocol").GIF_MIME_TYPE)return"gif";return"video"}function s(t){var n,r=t==null||(n=t.payload)==null?void 0:n.content;if((r==null?void 0:r.audioMessage)!=null)return"ptt";if((r==null?void 0:r.videoMessage)!=null){var a,i=r==null||(a=r.videoMessage)==null||(a=a.video)==null?void 0:a.payload,l=o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").VideoTransportSpec,i);return e(l)}if((r==null?void 0:r.documentMessage)!=null)return"document";if((r==null?void 0:r.stickerMessage)!=null)return"sticker";if((r==null?void 0:r.imageMessage)!=null)return"image";if((r==null?void 0:r.extendedContentMessage)!=null)return"xma-image"}l.getMediaTypeForVideo=e,l.getMediaTypeFromConsumerMessage=s}),98);
__d("MpsTags",["FBLogger","MAWProtobufDeserializers","MSGDataclassTypes.flow","getErrorSafe","getMediaTypeFromConsumerMessage"],(function(t,n,r,o,a,i,l){"use strict";function e(e){try{var t,n=o("MAWProtobufDeserializers").DeserializedBackupMessage.create(e),a=(t=n.encryptedTransportMessage())==null||(t=t.consumerMessage())==null?void 0:t.proto,i=o("getMediaTypeFromConsumerMessage").getMediaTypeFromConsumerMessage(a);return s(i)}catch(e){var l=r("getErrorSafe")(e);return r("FBLogger")("wmi").tags(["mps","mps-tags"]).catching(l).mustfix("Failed to get the tag from the protobuf"),null}}function s(e){return e==="image"?o("MSGDataclassTypes.flow").MpsMessageTag.Photo:e==="video"?o("MSGDataclassTypes.flow").MpsMessageTag.Video:e==="gif"?o("MSGDataclassTypes.flow").MpsMessageTag.Gif:e==="ptt"?o("MSGDataclassTypes.flow").MpsMessageTag.Audio:e==="document"?o("MSGDataclassTypes.flow").MpsMessageTag.File:e==="sticker"||e==="md-app-state"||e==="xma-image"||e===void 0||e===null?null:(function(){throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+e)})()}l.getTagFromProto=e,l.getMpsMessageTagFromMediaType=s}),98);
__d("WebMpsPopulateMediaTagsDBMigration",["MpsTags","MpsTypes","WebReverbDB","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e=20,s=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n){var r=t!=null?o("MpsTypes").toTimestamp(parseInt(t,10)):null,a=yield o("WebReverbDB").getWebReverbDB().runInTransaction(["message"],"readonly",function(t){return t.stores.message.readIndexRange("timestampMs",{greaterThan:[r!=null?r:o("MpsTypes").toTimestamp(0)]},{limit:e,order:"asc"})},"get-message-batch-after-timestamp");if(n.addPoint("messages_fetched_from_reverb",{int:{messageCount:a.length}}),a.length===0)return{hasMore:!1};var i=a.map(function(e){var t=o("MpsTags").getTagFromProto(e.payload);if(t==null)return null;var n=t;return{item:{messageId:e.messageId,messagePk:e.pk,tag:n,threadId:e.threadId,timestampMs:e.timestampMs},selector:[e.threadId,e.messageId,n]}}).filter(Boolean);return n.addPoint("tags_generated",{int:{tagCount:i.length}}),yield o("WebReverbDB").getWebReverbDB().runInTransaction(["tags"],"readwrite",function(e){return e.stores.tags.bulkUpsert("[threadId+messageId+tag]",i)},"upsert-tags"),n.addPoint("tags_updated"),{hasMore:!0,nextCursor:a[a.length-1].timestampMs.toString()}});return function(n,r){return t.apply(this,arguments)}})();l.WebMpsPopulateMediaTagsMigrationTask=s}),98);
__d("WormDbMigrationScheduler",["FBLogger","MpsTypes","ODS","QPLFlow","WAWaitForUserUnblocked","WebMpsPopulateMediaTagsDBMigration","WorkerScheduler","WormMaintenanceDb","asyncToGeneratorRuntime","getErrorSafe","justknobx","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=function(){return r("FBLogger")("wmi").tags(["worm_db_migration"])},d=null,m={concurrency:1,maxTaskLimit:1,maxThrottleMs:r("justknobx")._("3546"),timeoutMs:r("justknobx")._("3614")},p={"reverb-populate-media-tags":o("WebMpsPopulateMediaTagsDBMigration").WebMpsPopulateMediaTagsMigrationTask},_=new Map;function f(e,t){return e+":"+(t!=null?t:"null")}function g(e){var t;return(t=_.get(e))!=null?t:0}function h(e){_.set(e,g(e)+1)}function y(){return C.apply(this,arguments)}function C(){return C=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){return yield o("WAWaitForUserUnblocked").waitForUserUnblocked(),b(p)}),C.apply(this,arguments)}function b(e){return v.apply(this,arguments)}function v(){return v=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){if(!r("justknobx")._("3720")){c().info("DB Migrations are disabled");return}if(d!=null){c().info("DB Migrations are already running");return}var t=!1,n=!1,o;try{for(var a=babelHelpers.asyncIterator(Object.entries(e)),i;t=!(i=yield a.next()).done;t=!1){var l=i.value,s=l[0],u=l[1];yield S(s,u)}}catch(e){n=!0,o=e}finally{try{t&&a.return!=null&&(yield a.return())}finally{if(n)throw o}}}),v.apply(this,arguments)}function S(e,t){return R.apply(this,arguments)}function R(){return R=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n){var a=o("QPLFlow").startQPLFlow(r("qpl")._(767107656,"1154"),{annotations:{string:{migrationName:t}}}),i=yield L(t),l;if(i==null?(a.addPoint("migration_state_not_found"),l=yield E(t),(u||(u=o("ODS"))).bumpEntityKey(9819,"worm.db_migration",t+".started"),a.addPoint("initial_migration_state_set")):(a.addPoint("migration_state_retrieved"),l=i),l.finishedAtMs!=null){c().info("Migration "+t+" is already complete"),(u||(u=o("ODS"))).bumpEntityKey(9819,"worm.db_migration",t+".skipped"),a.addPoint("migration_already_complete"),a.endSuccess();return}var p=f(t,l.currentCursor),_=g(p);if(_>r("justknobx")._("2141")){c().INFO(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Migration "," has exceeded the max retry count"])),t),(u||(u=o("ODS"))).bumpEntityKey(9819,"worm.db_migration",t+".stuck"),a.addPoint("retry_count_exceeded"),a.endSuccess();return}d=o("WorkerScheduler").makeScheduler("WormDbMigrations",m).task({fn:function(){return n(l.currentCursor,a)},name:"worm_db_migration_"+t,priority:o("WorkerScheduler").BACKGROUND_PRIORITY});try{var y=yield d.run();a.addPoint("migration_task_complete"),d=null,y.hasMore?(yield k(babelHelpers.extends({},l,{currentCursor:y.nextCursor})),a.addPoint("migration_state_updated"),S(t,n)):(yield k(babelHelpers.extends({},l,{currentCursor:void 0,finishedAtMs:o("MpsTypes").toTimestamp(Date.now())})),(u||(u=o("ODS"))).bumpEntityKey(9819,"worm.db_migration",t+".complete"),a.addPoint("migration_complete")),a.endSuccess()}catch(e){d=null;var C=r("getErrorSafe")(e);c().FATAL(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Runtime error when running migration ",": ",""])),t,C.message),a.endFail("runtime_error",{string:{errorMessage:C.message}}),h(p),S(t,n)}}),R.apply(this,arguments)}function L(e){return o("WormMaintenanceDb").getWormMaintenanceDb().runInTransaction(["migrations"],"readonly",function(t){return t.stores.migrations.getByIndex("name",[e])},"mps-get-migration-by-name")}function E(e){return o("WormMaintenanceDb").getWormMaintenanceDb().runInTransaction(["migrations"],"readwrite",(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n={name:e,startedAtMs:o("MpsTypes").toTimestamp(Date.now())},r=yield t.stores.migrations.bulkAdd([n]),a=r[0];return babelHelpers.extends({},n,{pk:a})});return function(e){return t.apply(this,arguments)}})(),"mps-add-initial-migration-state")}function k(e){return o("WormMaintenanceDb").getWormMaintenanceDb().runInTransaction(["migrations"],"readwrite",(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){yield t.stores.migrations.bulkPut([e])});return function(e){return t.apply(this,arguments)}})(),"mps-set-migration-state")}l.runAllDbMigrations=y,l.getDbMigrationStateByName=L}),98);
__d("MpsReverbInit",["BrowserLockManager","MAWMpsMigrationStatus","MAWWormMaintenanceDbSetup","Promise","WebReverbDB","WormDbMigrationScheduler","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s="wmi_mps_new_db_status_lock",u=["reverb-populate-media-tags"],c=new Map(u.map(function(e){return[e,null]}));function d(e){return m.apply(this,arguments)}function m(){return m=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var a=yield o("WebReverbDB").makeWebReverb(t.name,t.strEncKey,t.blockingErrorThreshold,t.onBlockingError,t.qplEvent),i=a.isNewDb;yield o("MAWWormMaintenanceDbSetup").mawWormDbMaintenanceDbSetup();var l=[];if(i?l=u.map(function(e){return{migrationName:e,ready:!0}}):l=yield(e||(e=n("Promise"))).all(u.map((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=yield o("WormDbMigrationScheduler").getDbMigrationStateByName(e);return{migrationName:e,ready:(t==null?void 0:t.finishedAtMs)!=null}});return function(t){return e.apply(this,arguments)}})())),r("BrowserLockManager")==null){l.forEach(function(e){o("MAWMpsMigrationStatus").setDbMigrationState(e.migrationName,e.ready)});return}var d=yield r("BrowserLockManager").query(),m=d.held.some(function(e){return e.name===s});if(m){u.forEach(function(e){o("MAWMpsMigrationStatus").setDbMigrationState(e,!0)});return}l.forEach(function(t){var a="LOCK_NOT_READY_MIGRATION-"+t.migrationName;if(t.ready){var i=d.held.some(function(e){return e.name===a})||d.pending.some(function(e){return e.name===a});i?o("MAWMpsMigrationStatus").setDbMigrationState(t.migrationName,!1):o("MAWMpsMigrationStatus").setDbMigrationState(t.migrationName,!0)}else o("MAWMpsMigrationStatus").setDbMigrationState(t.migrationName,!1),c.set(t.migrationName,r("BrowserLockManager").request(a,function(){return new(e||(e=n("Promise")))(function(){})}))})}),m.apply(this,arguments)}l.initReverb=d}),98);
__d("WAGetPlatformFromStanzaId",["WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){try{if(t.startsWith("3EB0"))return"web";var n=31,r=BigInt(n<<17),a=BigInt(0),i=BigInt(1<<17),l=BigInt(t)&r;return l===a?"web":l===i?"mobile":"unknown"}catch(n){return o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Failed to parse stanza id "," for platform: ",""])),t,n),"error"}}l.getPlatformFromStanzaId=s}),98);
__d("WAJobOrchestratorTypes",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum")({SKIP:"SKIP_PRIORITIZATION",UI_ACTION:"UI_ACTION",LOW:"LOW",HIGH:"HIGH",OFFLINE:"OFFLINE",HISTORY_SYNC:"HISTORY_SYNC",BEST_EFFORT:"BEST_EFFORT"}),l=1,s=e.LOW,u=10*1e3;i.JOB_PRIORITY=e,i.DEFAULT_CONCURRENCY=l,i.DEFAULT_JOB_PRIORITY=s,i.DEFAULT_JOB_TIMEOUT_MS=u}),66);
__d("WAMedia",[],(function(t,n,r,o,a,i){"use strict";var e="Image",l="Video",s="Ptt",u="Gif",c="Sticker",d="DocumentFile",m={IMAGE:e,VIDEO:l,PTT:s,GIF:u,STICKER:c,DOCUMENT_FILE:d};i.IMAGE=e,i.VIDEO=l,i.PTT=s,i.GIF=u,i.STICKER=c,i.DOCUMENT_FILE=d,i.MEDIA_TYPE=m}),66);
__d("WAMediaQplHelper",[],(function(t,n,r,o,a,i){"use strict";function e(e){return e==null||e<0||e>1e3*1024*1024?"invalid_size":e===0?"size equal to 0KB":e<=1*1024?"size lower than 1 KB":e<=50*1024?"size between 1 KB and 50 KB":e<=100*1024?"size between 50 KB and 100 KB":e<=500*1024?"size between 100 KB and 500 KB":e<=1*1024*1024?"size between 500 KB and 1 MB":e<=2*1024*1024?"size between 1 MB and 2 MB":e<=5*1024*1024?"size between 2 MB and 5 MB":e<=10*1024*1024?"size between 5 MB and 10 MB":e<=20*1024*1024?"size between 10 MB and 20 MB":e<=25*1024*1024?"size between 20 MB and 25 MB":e<=30*1024*1024?"size between 25 MB and 30 MB":e<=50*1024*1024?"size between 30 MB and 50 MB":e<=75*1024*1024?"size between 50 MB and 75 MB":e<=100*1024*1024?"size between 75 MB and 100 MB":"size above 100 MB"}i.convertIntegerSizeToStringBucket=e}),66);
__d("WAParseReadOnlyMetadataDataclassUtils",["err"],(function(t,n,r,o,a,i,l){"use strict";function e(e){if((e==null?void 0:e.readonlyMetadataDataclass)!=null)try{var t=JSON.parse(e==null?void 0:e.readonlyMetadataDataclass);return t}catch(e){throw r("err")("Failed to parse readonly metadata dataclass JSON")}return null}function s(t){var n,r=e(t);return(r==null||(n=r.power_up)==null?void 0:n.power_up_style)!=null}function u(t){var n,r=e(t);return(r==null||(n=r.note_metadata)==null?void 0:n.message_type)==="MENTION"}l.isPowerUp=s,l.isNoteMention=u}),98);
__d("first",[],(function(t,n,r,o,a,i){"use strict";function e(e){for(var t of e)return t;return null}i.default=e}),66);
__d("groupBy",[],(function(t,n,r,o,a,i){function e(e,t){return e.reduce(function(e,n){return(e[t(n)]=e[t(n)]||[]).push(n),e},{})}i.default=e}),66);
__d("maybeConvertMessageTextMentionsV2ToV1",["WACommon.pb"],(function(t,n,r,o,a,i,l){function e(e){if(e==null||e.text==null||e.mentions==null||e.mentions.length===0)return e;var t=e.text,n=[],r=[],a=0;for(var i of e.mentions){var l=i.length,s=i.mentionedJid,u=i.mentionType,c=i.offset;u!==o("WACommon.pb").MENTION_MENTION_TYPE.PROFILE||c==null||l==null||s==null||(r.push(s+"@msgr"),n.push(t.substring(a,c)),n.push("@"+s+"@msgr"),a=c+l)}return r.length===0?e:(n.push(t.substring(a)),babelHelpers.extends({},e,{text:n.join(""),mentionedJid:r,mentions:[]}))}l.default=e}),98);